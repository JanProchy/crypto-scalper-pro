var Fy=Object.defineProperty,Ly=Object.defineProperties;var Vy=Object.getOwnPropertyDescriptors;var cs=Object.getOwnPropertySymbols;var lf=Object.prototype.hasOwnProperty,cf=Object.prototype.propertyIsEnumerable;var af=(n,e,t)=>e in n?Fy(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,I=(n,e)=>{for(var t in e||={})lf.call(e,t)&&af(n,t,e[t]);if(cs)for(var t of cs(e))cf.call(e,t)&&af(n,t,e[t]);return n},P=(n,e)=>Ly(n,Vy(e));var cl=(n,e)=>{var t={};for(var i in n)lf.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&cs)for(var i of cs(n))e.indexOf(i)<0&&cf.call(n,i)&&(t[i]=n[i]);return t};var ul;function us(){return ul}function rt(n){let e=ul;return ul=n,e}var uf=Symbol("NotFound");function Wn(n){return n===uf||n?.name==="\u0275NotFound"}function ms(n,e){return Object.is(n,e)}var he=null,ds=!1,dl=1,By=null,Te=Symbol("SIGNAL");function F(n){let e=he;return he=n,e}function gs(){return he}var Kt={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function vs(n){if(ds)throw new Error("");if(he===null)return;he.consumerOnSignalRead(n);let e=he.producersTail;if(e!==void 0&&e.producer===n)return;let t,i=he.recomputing;if(i&&(t=e!==void 0?e.nextProducer:he.producers,t!==void 0&&t.producer===n)){he.producersTail=t,t.lastReadVersion=n.version;return}let r=n.consumersTail;if(r!==void 0&&r.consumer===he&&(!i||Uy(r,he)))return;let s=Zn(he),o={producer:n,consumer:he,nextProducer:t,prevConsumer:r,lastReadVersion:n.version,nextConsumer:void 0};he.producersTail=o,e!==void 0?e.nextProducer=o:he.producers=o,s&&hf(n,o)}function df(){dl++}function ys(n){if(!(Zn(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===dl)){if(!n.producerMustRecompute(n)&&!zi(n)){ps(n);return}n.producerRecomputeValue(n),ps(n)}}function hl(n){if(n.consumers===void 0)return;let e=ds;ds=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let i=t.consumer;i.dirty||jy(i)}}finally{ds=e}}function fl(){return he?.consumerAllowSignalWrites!==!1}function jy(n){n.dirty=!0,hl(n),n.consumerMarkedDirty?.(n)}function ps(n){n.dirty=!1,n.lastCleanEpoch=dl}function Yn(n){return n&&(n.producersTail=void 0,n.recomputing=!0),F(n)}function $i(n,e){if(F(e),!n)return;n.recomputing=!1;let t=n.producersTail,i=t!==void 0?t.nextProducer:n.producers;if(i!==void 0){if(Zn(n))do i=pl(i);while(i!==void 0);t!==void 0?t.nextProducer=void 0:n.producers=void 0}}function zi(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,i=e.lastReadVersion;if(i!==t.version||(ys(t),i!==t.version))return!0}return!1}function qn(n){if(Zn(n)){let e=n.producers;for(;e!==void 0;)e=pl(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function hf(n,e){let t=n.consumersTail,i=Zn(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!i)for(let r=n.producers;r!==void 0;r=r.nextProducer)hf(r.producer,r)}function pl(n){let e=n.producer,t=n.nextProducer,i=n.nextConsumer,r=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!Zn(e)){let s=e.producers;for(;s!==void 0;)s=pl(s)}return t}function Zn(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Ds(n){By?.(n)}function Uy(n,e){let t=e.producersTail;if(t!==void 0){let i=e.producers;do{if(i===n)return!0;if(i===t)break;i=i.nextProducer}while(i!==void 0)}return!1}function Es(n,e){let t=Object.create(Hy);t.computation=n,e!==void 0&&(t.equal=e);let i=()=>{if(ys(t),vs(t),t.value===Hi)throw t.error;return t.value};return i[Te]=t,Ds(t),i}var hs=Symbol("UNSET"),fs=Symbol("COMPUTING"),Hi=Symbol("ERRORED"),Hy=P(I({},Kt),{value:hs,dirty:!0,error:null,equal:ms,kind:"computed",producerMustRecompute(n){return n.value===hs||n.value===fs},producerRecomputeValue(n){if(n.value===fs)throw new Error("");let e=n.value;n.value=fs;let t=Yn(n),i,r=!1;try{i=n.computation(),F(null),r=e!==hs&&e!==Hi&&i!==Hi&&n.equal(e,i)}catch(s){i=Hi,n.error=s}finally{$i(n,t)}if(r){n.value=e;return}n.value=i,n.version++}});function $y(){throw new Error}var ff=$y;function pf(n){ff(n)}function ml(n){ff=n}var zy=null;function gl(n,e){let t=Object.create(gf);t.value=n,e!==void 0&&(t.equal=e);let i=()=>mf(t);return i[Te]=t,Ds(t),[i,o=>bs(t,o),o=>vl(t,o)]}function mf(n){return vs(n),n.value}function bs(n,e){fl()||pf(n),n.equal(n.value,e)||(n.value=e,Gy(n))}function vl(n,e){fl()||pf(n),bs(n,e(n.value))}var gf=P(I({},Kt),{equal:ms,value:void 0,kind:"signal"});function Gy(n){n.version++,df(),hl(n),zy?.(n)}function U(n){return typeof n=="function"}function ws(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var _s=ws(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Jt(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ue=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(U(i))try{i()}catch(s){e=s instanceof _s?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{vf(s)}catch(o){e=e??[],o instanceof _s?e=[...e,...o.errors]:e.push(o)}}if(e)throw new _s(e)}}add(e){var t;if(e&&e!==this)if(this.closed)vf(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Jt(t,e)}remove(e){let{_finalizers:t}=this;t&&Jt(t,e),e instanceof n&&e._removeParent(this)}};ue.EMPTY=(()=>{let n=new ue;return n.closed=!0,n})();var yl=ue.EMPTY;function Cs(n){return n instanceof ue||n&&"closed"in n&&U(n.remove)&&U(n.add)&&U(n.unsubscribe)}function vf(n){U(n)?n():n.unsubscribe()}var Ye={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qn={setTimeout(n,e,...t){let{delegate:i}=Qn;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Qn;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ss(n){Qn.setTimeout(()=>{let{onUnhandledError:e}=Ye;if(e)e(n);else throw n})}function Dl(){}var yf=El("C",void 0,void 0);function Df(n){return El("E",void 0,n)}function Ef(n){return El("N",n,void 0)}function El(n,e,t){return{kind:n,value:e,error:t}}var en=null;function Xn(n){if(Ye.useDeprecatedSynchronousErrorHandling){let e=!en;if(e&&(en={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=en;if(en=null,t)throw i}}else n()}function bf(n){Ye.useDeprecatedSynchronousErrorHandling&&en&&(en.errorThrown=!0,en.error=n)}var tn=class extends ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Cs(e)&&e.add(this)):this.destination=qy}static create(e,t,i){return new Kn(e,t,i)}next(e){this.isStopped?wl(Ef(e),this):this._next(e)}error(e){this.isStopped?wl(Df(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wl(yf,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Wy=Function.prototype.bind;function bl(n,e){return Wy.call(n,e)}var _l=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Ms(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Ms(i)}else Ms(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ms(t)}}},Kn=class extends tn{constructor(e,t,i){super();let r;if(U(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Ye.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&bl(e.next,s),error:e.error&&bl(e.error,s),complete:e.complete&&bl(e.complete,s)}):r=e}this.destination=new _l(r)}};function Ms(n){Ye.useDeprecatedSynchronousErrorHandling?bf(n):Ss(n)}function Yy(n){throw n}function wl(n,e){let{onStoppedNotification:t}=Ye;t&&Qn.setTimeout(()=>t(n,e))}var qy={closed:!0,next:Dl,error:Yy,complete:Dl};var Jn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Is(n){return n}function wf(n){return n.length===0?Is:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Y=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=Qy(t)?t:new Kn(t,i,r);return Xn(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=_f(i),new i((r,s)=>{let o=new Kn({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Jn](){return this}pipe(...t){return wf(t)(this)}toPromise(t){return t=_f(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function _f(n){var e;return(e=n??Ye.Promise)!==null&&e!==void 0?e:Promise}function Zy(n){return n&&U(n.next)&&U(n.error)&&U(n.complete)}function Qy(n){return n&&n instanceof tn||Zy(n)&&Cs(n)}function Xy(n){return U(n?.lift)}function ne(n){return e=>{if(Xy(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ie(n,e,t,i,r){return new Cl(n,e,t,i,r)}var Cl=class extends tn{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Cf=ws(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var At=(()=>{class n extends Y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Ts(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Cf}next(t){Xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?yl:(this.currentObservers=null,s.push(t),new ue(()=>{this.currentObservers=null,Jt(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new Y;return t.source=this,t}}return n.create=(e,t)=>new Ts(e,t),n})(),Ts=class extends At{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:yl}};var Gi=class extends At{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Sl={now(){return(Sl.delegate||Date).now()},delegate:void 0};var xs=class extends ue{constructor(e,t){super()}schedule(e,t=0){return this}};var Wi={setInterval(n,e,...t){let{delegate:i}=Wi;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Wi;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ns=class extends xs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return Wi.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Wi.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Jt(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ei=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};ei.now=Sl.now;var As=class extends ei{constructor(e,t=ei.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var Ky=new As(Ns),Sf=Ky;var Mf=new Y(n=>n.complete());function Rs(n){return n&&U(n.schedule)}function Jy(n){return n[n.length-1]}function If(n){return Rs(Jy(n))?n.pop():void 0}function xf(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function Tf(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nn(n){return this instanceof nn?(this.v=n,this):new nn(n)}function Nf(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){i[f]&&(r[f]=function(g){return new Promise(function(v,y){s.push([f,g,v,y])>1||l(f,g)})},p&&(r[f]=p(r[f])))}function l(f,p){try{c(i[f](p))}catch(g){h(s[0][3],g)}}function c(f){f.value instanceof nn?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Af(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Tf=="function"?Tf(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var Ps=n=>n&&typeof n.length=="number"&&typeof n!="function";function ks(n){return U(n?.then)}function Os(n){return U(n[Jn])}function Fs(n){return Symbol.asyncIterator&&U(n?.[Symbol.asyncIterator])}function Ls(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function e0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vs=e0();function Bs(n){return U(n?.[Vs])}function js(n){return Nf(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield nn(t.read());if(r)return yield nn(void 0);yield yield nn(i)}}finally{t.releaseLock()}})}function Us(n){return U(n?.getReader)}function fe(n){if(n instanceof Y)return n;if(n!=null){if(Os(n))return t0(n);if(Ps(n))return n0(n);if(ks(n))return i0(n);if(Fs(n))return Rf(n);if(Bs(n))return r0(n);if(Us(n))return s0(n)}throw Ls(n)}function t0(n){return new Y(e=>{let t=n[Jn]();if(U(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function n0(n){return new Y(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function i0(n){return new Y(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ss)})}function r0(n){return new Y(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Rf(n){return new Y(e=>{o0(n,e).catch(t=>e.error(t))})}function s0(n){return Rf(js(n))}function o0(n,e){var t,i,r,s;return xf(this,void 0,void 0,function*(){try{for(t=Af(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function Le(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Hs(n,e=0){return ne((t,i)=>{t.subscribe(ie(i,r=>Le(i,n,()=>i.next(r),e),()=>Le(i,n,()=>i.complete(),e),r=>Le(i,n,()=>i.error(r),e)))})}function $s(n,e=0){return ne((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Pf(n,e){return fe(n).pipe($s(e),Hs(e))}function kf(n,e){return fe(n).pipe($s(e),Hs(e))}function Of(n,e){return new Y(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function Ff(n,e){return new Y(t=>{let i;return Le(t,e,()=>{i=n[Vs](),Le(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>U(i?.return)&&i.return()})}function zs(n,e){if(!n)throw new Error("Iterable cannot be null");return new Y(t=>{Le(t,e,()=>{let i=n[Symbol.asyncIterator]();Le(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Lf(n,e){return zs(js(n),e)}function Vf(n,e){if(n!=null){if(Os(n))return Pf(n,e);if(Ps(n))return Of(n,e);if(ks(n))return kf(n,e);if(Fs(n))return zs(n,e);if(Bs(n))return Ff(n,e);if(Us(n))return Lf(n,e)}throw Ls(n)}function Bf(n,e){return e?Vf(n,e):fe(n)}function Gs(...n){let e=If(n);return Bf(n,e)}function Ml(n,e){let t=U(n)?n:()=>n,i=r=>r.error(t());return new Y(e?r=>e.schedule(i,0,r):i)}function jf(n){return n instanceof Date&&!isNaN(n)}function Ve(n,e){return ne((t,i)=>{let r=0;t.subscribe(ie(i,s=>{i.next(n.call(e,s,r++))}))})}function Uf(n,e,t,i,r,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<i?p(g):l.push(g),p=g=>{s&&e.next(g),c++;let v=!1;fe(t(g,u++)).subscribe(ie(e,y=>{r?.(y),s?f(y):e.next(y)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<i;){let y=l.shift();o?Le(e,o,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return n.subscribe(ie(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Ws(n,e,t=1/0){return U(e)?Ws((i,r)=>Ve((s,o)=>e(i,s,r,o))(fe(n(i,r))),t):(typeof e=="number"&&(t=e),ne((i,r)=>Uf(i,r,n,t)))}function Hf(n=0,e,t=Sf){let i=-1;return e!=null&&(Rs(e)?t=e:i=e),new Y(r=>{let s=jf(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Il(n,e){return ne((t,i)=>{let r=0;t.subscribe(ie(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Ys(n){return ne((e,t)=>{let i=null,r=!1,s;i=e.subscribe(ie(t,void 0,void 0,o=>{s=fe(n(o,Ys(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Tl(n,e){return U(e)?Ws(n,e,1):Ws(n,1)}function xl(n){return n<=0?()=>Mf:ne((e,t)=>{let i=0;e.subscribe(ie(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Nl(n){return ne((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Al(n=1/0){let e;n&&typeof n=="object"?e=n:e={count:n};let{count:t=1/0,delay:i,resetOnSuccess:r=!1}=e;return t<=0?Is:ne((s,o)=>{let a=0,l,c=()=>{let u=!1;l=s.subscribe(ie(o,d=>{r&&(a=0),o.next(d)},void 0,d=>{if(a++<t){let h=()=>{l?(l.unsubscribe(),l=null,c()):u=!0};if(i!=null){let f=typeof i=="number"?Hf(i):fe(i(d,a)),p=ie(o,()=>{p.unsubscribe(),h()},()=>{o.complete()});f.subscribe(p)}else h()}else o.error(d)})),u&&(l.unsubscribe(),l=null,c())};c()})}function Rl(n,e){return ne((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(ie(i,l=>{r?.unsubscribe();let c=0,u=s++;fe(n(l,u)).subscribe(r=ie(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}var $f=P(I({},Kt),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,kind:"effect"});function zf(n){if(n.dirty=!1,n.hasRun&&!zi(n))return;n.hasRun=!0;let e=Yn(n);try{n.cleanup(),n.fn()}finally{$i(n,e)}}var zl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",N=class extends Error{code;constructor(e,t){super(ln(e,t)),this.code=e}};function a0(n){return`NG0${Math.abs(n)}`}function ln(n,e){return`${a0(n)}${e?": "+e:""}`}var cn=globalThis;function W(n){for(let e in n)if(n[e]===W)return e;throw Error("")}function Rt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Rt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let i=t.indexOf(`
`);return i>=0?t.slice(0,i):t}function Gl(n,e){return n?e?`${n} ${e}`:n:e||""}var l0=W({__forward_ref__:W});function Xi(n){return n.__forward_ref__=Xi,n.toString=function(){return Rt(this())},n}function xe(n){return Yf(n)?n():n}function Yf(n){return typeof n=="function"&&n.hasOwnProperty(l0)&&n.__forward_ref__===Xi}function qf(n,e){n==null&&Wl(e,n,null,"!=")}function Wl(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(i==null?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}function j(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Et(n){return{providers:n.providers||[],imports:n.imports||[]}}function Js(n){return c0(n,eo)}function c0(n,e){return n.hasOwnProperty(e)&&n[e]||null}function u0(n){let e=n?.[eo]??null;return e||null}function kl(n){return n&&n.hasOwnProperty(Zs)?n[Zs]:null}var eo=W({\u0275prov:W}),Zs=W({\u0275inj:W}),k=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=j({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Yl(n){return n&&!!n.\u0275providers}var ql=W({\u0275cmp:W}),Zl=W({\u0275dir:W}),Ql=W({\u0275pipe:W});var Ol=W({\u0275fac:W}),un=W({__NG_ELEMENT_ID__:W}),Gf=W({__NG_ENV_ID__:W});function Ki(n){return typeof n=="string"?n:n==null?"":String(n)}function Qs(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ki(n)}var Xl=W({ngErrorCode:W}),Zf=W({ngErrorMessage:W}),qi=W({ngTokenPath:W});function Kl(n,e){return Qf("",-200,e)}function to(n,e){throw new N(-201,!1)}function d0(n,e){n[qi]??=[];let t=n[qi],i;typeof e=="object"&&"multi"in e&&e?.multi===!0?(qf(e.provide,"Token with multi: true should have a provide property"),i=Qs(e.provide)):i=Qs(e),t[0]!==i&&n[qi].unshift(i)}function h0(n,e){let t=n[qi],i=n[Xl],r=n[Zf]||n.message;return n.message=p0(r,i,t,e),n}function Qf(n,e,t){let i=new N(e,n);return i[Xl]=e,i[Zf]=n,t&&(i[qi]=t),i}function f0(n){return n[Xl]}function p0(n,e,t=[],i=null){let r="";t&&t.length>1&&(r=` Path: ${t.join(" -> ")}.`);let s=i?` Source: ${i}.`:"";return ln(e,`${n}${s}${r}`)}var Fl;function Xf(){return Fl}function ve(n){let e=Fl;return Fl=n,e}function Jl(n,e,t){let i=Js(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&8)return null;if(e!==void 0)return e;to(n,"Injector")}var m0={},rn=m0,g0="__NG_DI_FLAG__",Ll=class{injector;constructor(e){this.injector=e}retrieve(e,t){let i=sn(t)||0;try{return this.injector.get(e,i&8?null:rn,i)}catch(r){if(Wn(r))return r;throw r}}};function v0(n,e=0){let t=us();if(t===void 0)throw new N(-203,!1);if(t===null)return Jl(n,void 0,e);{let i=y0(e),r=t.retrieve(n,i);if(Wn(r)){if(i.optional)return null;throw r}return r}}function V(n,e=0){return(Xf()||v0)(xe(n),e)}function M(n,e){return V(n,sn(e))}function sn(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function y0(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Vl(n){let e=[];for(let t=0;t<n.length;t++){let i=xe(n[t]);if(Array.isArray(i)){if(i.length===0)throw new N(900,!1);let r,s=0;for(let o=0;o<i.length;o++){let a=i[o],l=D0(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}e.push(V(r,s))}else e.push(V(i))}return e}function D0(n){return n[g0]}function on(n,e){let t=n.hasOwnProperty(Ol);return t?n[Ol]:null}function Kf(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}function Jf(n){return n.flat(Number.POSITIVE_INFINITY)}function no(n,e){n.forEach(t=>Array.isArray(t)?no(t,e):e(t))}function ec(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ji(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ep(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function tp(n,e,t){let i=ni(n,e);return i>=0?n[i|1]=t:(i=~i,ep(n,i,e,t)),i}function io(n,e){let t=ni(n,e);if(t>=0)return n[t|1]}function ni(n,e){return E0(n,e,1)}function E0(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var dn={},Be=[],kt=new k(""),tc=new k("",-1),nc=new k(""),Zi=class{get(e,t=rn){if(t===rn){let r=Qf("",-201);throw r.name="\u0275NotFound",r}return t}};function hn(n){return n[ql]||null}function ic(n){return n[Zl]||null}function np(n){return n[Ql]||null}function fn(n){return{\u0275providers:n}}function ip(n){return fn([{provide:kt,multi:!0,useValue:n}])}function rp(...n){return{\u0275providers:rc(!0,n),\u0275fromNgModule:!0}}function rc(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return no(e,o=>{let a=o;Xs(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&sp(r,s),t}function sp(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];sc(r,s=>{e(s,i)})}}function Xs(n,e,t,i){if(n=xe(n),!n)return!1;let r=null,s=kl(n),o=!s&&hn(n);if(!s&&!o){let l=n.ngModule;if(s=kl(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)Xs(c,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let c;try{no(s.imports,u=>{Xs(u,e,t,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&sp(c,e)}if(!a){let c=on(r)||(()=>new r);e({provide:r,useFactory:c,deps:Be},r),e({provide:nc,useValue:r,multi:!0},r),e({provide:kt,useValue:()=>V(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let c=n;sc(l,u=>{e(u,c)})}}else return!1;return r!==n&&n.providers!==void 0}function sc(n,e){for(let t of n)Yl(t)&&(t=t.\u0275providers),Array.isArray(t)?sc(t,e):e(t)}var b0=W({provide:String,useValue:W});function op(n){return n!==null&&typeof n=="object"&&b0 in n}function w0(n){return!!(n&&n.useExisting)}function _0(n){return!!(n&&n.useFactory)}function Ks(n){return typeof n=="function"}var er=new k(""),qs={},Wf={},Pl;function tr(){return Pl===void 0&&(Pl=new Zi),Pl}var we=class{},an=class extends we{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,jl(e,o=>this.processProvider(o)),this.records.set(tc,ti(void 0,this)),r.has("environment")&&this.records.set(we,ti(void 0,this));let s=this.records.get(er);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(nc,Be,{self:!0}))}retrieve(e,t){let i=sn(t)||0;try{return this.get(e,rn,i)}catch(r){if(Wn(r))return r;throw r}}destroy(){Yi(this),this._destroyed=!0;let e=F(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),F(e)}}onDestroy(e){return Yi(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Yi(this);let t=rt(this),i=ve(void 0),r;try{return e()}finally{rt(t),ve(i)}}get(e,t=rn,i){if(Yi(this),e.hasOwnProperty(Gf))return e[Gf](this);let r=sn(i),s,o=rt(this),a=ve(void 0);try{if(!(r&4)){let c=this.records.get(e);if(c===void 0){let u=T0(e)&&Js(e);u&&this.injectableDefInScope(u)?c=ti(Bl(e),qs):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let l=r&2?tr():this.parent;return t=r&8&&t===rn?null:t,l.get(e,t)}catch(l){let c=f0(l);throw c===-200||c===-201?new N(c,null):l}finally{ve(a),rt(o)}}resolveInjectorInitializers(){let e=F(null),t=rt(this),i=ve(void 0),r;try{let s=this.get(kt,Be,{self:!0});for(let o of s)o()}finally{rt(t),ve(i),F(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Rt(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=xe(e);let t=Ks(e)?e:xe(e&&e.provide),i=S0(e);if(!Ks(e)&&e.multi===!0){let r=this.records.get(t);r||(r=ti(void 0,qs,!0),r.factory=()=>Vl(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t,i){let r=F(null);try{if(t.value===Wf)throw Kl(Rt(e));return t.value===qs&&(t.value=Wf,t.value=t.factory(void 0,i)),typeof t.value=="object"&&t.value&&I0(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{F(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=xe(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Bl(n){let e=Js(n),t=e!==null?e.factory:on(n);if(t!==null)return t;if(n instanceof k)throw new N(204,!1);if(n instanceof Function)return C0(n);throw new N(204,!1)}function C0(n){if(n.length>0)throw new N(204,!1);let t=u0(n);return t!==null?()=>t.factory(n):()=>new n}function S0(n){if(op(n))return ti(void 0,n.useValue);{let e=ap(n);return ti(e,qs)}}function ap(n,e,t){let i;if(Ks(n)){let r=xe(n);return on(r)||Bl(r)}else if(op(n))i=()=>xe(n.useValue);else if(_0(n))i=()=>n.useFactory(...Vl(n.deps||[]));else if(w0(n))i=(r,s)=>V(xe(n.useExisting),s!==void 0&&s&8?8:void 0);else{let r=xe(n&&(n.useClass||n.provide));if(M0(n))i=()=>new r(...Vl(n.deps));else return on(r)||Bl(r)}return i}function Yi(n){if(n.destroyed)throw new N(205,!1)}function ti(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function M0(n){return!!n.deps}function I0(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function T0(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function jl(n,e){for(let t of n)Array.isArray(t)?jl(t,e):t&&Yl(t)?jl(t.\u0275providers,e):e(t)}function ii(n,e){let t;n instanceof an?(Yi(n),t=n):t=new Ll(n);let i,r=rt(t),s=ve(void 0);try{return e()}finally{rt(r),ve(s)}}function lp(){return Xf()!==void 0||us()!=null}var Qe=0,A=1,O=2,re=3,je=4,Ue=5,ri=6,si=7,ee=8,pn=9,bt=10,K=11,oi=12,oc=13,mn=14,Ne=15,Ot=16,gn=17,ot=18,nr=19,ac=20,Dt=21,ro=22,wt=23,Ae=24,so=25,Q=26,cp=1,lc=6,Ft=7,ir=8,vn=9,oe=10;function at(n){return Array.isArray(n)&&typeof n[cp]=="object"}function Xe(n){return Array.isArray(n)&&n[cp]===!0}function cc(n){return(n.flags&4)!==0}function Lt(n){return n.componentOffset>-1}function rr(n){return(n.flags&1)===1}function yn(n){return!!n.template}function ai(n){return(n[O]&512)!==0}function Dn(n){return(n[O]&256)===256}var up="svg",dp="math";function He(n){for(;Array.isArray(n);)n=n[Qe];return n}function uc(n,e){return He(e[n])}function lt(n,e){return He(e[n.index])}function sr(n,e){return n.data[e]}function or(n,e){return n[e]}function ar(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function $e(n,e){let t=e[n];return at(t)?t:t[Qe]}function hp(n){return(n[O]&4)===4}function oo(n){return(n[O]&128)===128}function fp(n){return Xe(n[re])}function ze(n,e){return e==null?null:n[e]}function dc(n){n[gn]=0}function hc(n){n[O]&1024||(n[O]|=1024,oo(n)&&En(n))}function pp(n,e){for(;n>0;)e=e[mn],n--;return e}function lr(n){return!!(n[O]&9216||n[Ae]?.dirty)}function ao(n){n[bt].changeDetectionScheduler?.notify(8),n[O]&64&&(n[O]|=1024),lr(n)&&En(n)}function En(n){n[bt].changeDetectionScheduler?.notify(0);let e=Pt(n);for(;e!==null&&!(e[O]&8192||(e[O]|=8192,!oo(e)));)e=Pt(e)}function fc(n,e){if(Dn(n))throw new N(911,!1);n[Dt]===null&&(n[Dt]=[]),n[Dt].push(e)}function mp(n,e){if(n[Dt]===null)return;let t=n[Dt].indexOf(e);t!==-1&&n[Dt].splice(t,1)}function Pt(n){let e=n[re];return Xe(e)?e[re]:e}function pc(n){return n[si]??=[]}function mc(n){return n.cleanup??=[]}function gp(n,e,t,i){let r=pc(e);r.push(t),n.firstCreatePass&&mc(n).push(i,r.length-1)}var B={lFrame:xp(null),bindingsEnabled:!0,skipHydrationRootTNode:null},cr=(function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n})(cr||{}),x0=0,Ul=!1;function vp(){return B.lFrame.elementDepthCount}function yp(){B.lFrame.elementDepthCount++}function gc(){B.lFrame.elementDepthCount--}function vc(){return B.bindingsEnabled}function Dp(){return B.skipHydrationRootTNode!==null}function yc(n){return B.skipHydrationRootTNode===n}function Dc(){B.skipHydrationRootTNode=null}function L(){return B.lFrame.lView}function ae(){return B.lFrame.tView}function ye(n){return B.lFrame.contextLView=n,n[ee]}function De(n){return B.lFrame.contextLView=null,n}function Ee(){let n=Ec();for(;n!==null&&n.type===64;)n=n.parent;return n}function Ec(){return B.lFrame.currentTNode}function Ep(){let n=B.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function bn(n,e){let t=B.lFrame;t.currentTNode=n,t.isParent=e}function bc(){return B.lFrame.isParent}function bp(){B.lFrame.isParent=!1}function wc(){return B.lFrame.contextLView}function _c(n){Wl("Must never be called in production mode"),x0=n}function Cc(){return Ul}function li(n){let e=Ul;return Ul=n,e}function ci(){let n=B.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function wp(){return B.lFrame.bindingIndex}function _p(n){return B.lFrame.bindingIndex=n}function ui(){return B.lFrame.bindingIndex++}function Sc(n){let e=B.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Cp(){return B.lFrame.inI18n}function Sp(n,e){let t=B.lFrame;t.bindingIndex=t.bindingRootIndex=n,lo(e)}function Mp(){return B.lFrame.currentDirectiveIndex}function lo(n){B.lFrame.currentDirectiveIndex=n}function Ip(n){let e=B.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Mc(){return B.lFrame.currentQueryIndex}function co(n){B.lFrame.currentQueryIndex=n}function N0(n){let e=n[A];return e.type===2?e.declTNode:e.type===1?n[Ue]:null}function Ic(n,e,t){if(t&4){let r=e,s=n;for(;r=r.parent,r===null&&!(t&1);)if(r=N0(s),r===null||(s=s[mn],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=B.lFrame=Tp();return i.currentTNode=e,i.lView=n,!0}function uo(n){let e=Tp(),t=n[A];B.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Tp(){let n=B.lFrame,e=n===null?null:n.child;return e===null?xp(n):e}function xp(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Np(){let n=B.lFrame;return B.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Tc=Np;function ho(){let n=Np();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ap(n){return(B.lFrame.contextLView=pp(n,B.lFrame.contextLView))[ee]}function ct(){return B.lFrame.selectedIndex}function Vt(n){B.lFrame.selectedIndex=n}function xc(){let n=B.lFrame;return sr(n.tView,n.selectedIndex)}function Rp(){return B.lFrame.currentNamespace}var Pp=!0;function fo(){return Pp}function po(n){Pp=n}var A0={elements:void 0};function mo(){return A0}function Hl(n,e=null,t=null,i){let r=kp(n,e,t,i);return r.resolveInjectorInitializers(),r}function kp(n,e=null,t=null,i,r=new Set){let s=[t||Be,rp(n)];return i=i||(typeof n=="object"?void 0:Rt(n)),new an(s,e||tr(),i||null,r)}var st=class n{static THROW_IF_NOT_FOUND=rn;static NULL=new Zi;static create(e,t){if(Array.isArray(e))return Hl({name:""},t,e,"");{let i=e.name??"";return Hl({name:i},e.parent,e.providers,i)}}static \u0275prov=j({token:n,providedIn:"any",factory:()=>V(tc)});static __NG_ELEMENT_ID__=-1},_e=new k(""),_t=(()=>{class n{static __NG_ELEMENT_ID__=R0;static __NG_ENV_ID__=t=>t}return n})(),Qi=class extends _t{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Dn(this._lView)}onDestroy(e){let t=this._lView;return fc(t,e),()=>mp(t,e)}};function R0(){return new Qi(L())}var qe=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ke=new k("",{providedIn:"root",factory:()=>{let n=M(we),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(qe),e.handleError(t))}}}),Op={provide:kt,useValue:()=>void M(qe),multi:!0},P0=new k("",{providedIn:"root",factory:()=>{let n=M(_e).defaultView;if(!n)return;let e=M(Ke),t=s=>{e(s.reason),s.preventDefault()},i=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},r=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",i)};typeof Zone<"u"?Zone.root.run(r):r(),M(_t).onDestroy(()=>{n.removeEventListener("error",i),n.removeEventListener("unhandledrejection",t)})}});function Nc(){return fn([ip(()=>void M(P0))])}function Je(n,e){let[t,i,r]=gl(n,e?.equal),s=t,o=s[Te];return s.set=i,s.update=r,s.asReadonly=Ac.bind(s),s}function Ac(){let n=this[Te];if(n.readonlyFn===void 0){let e=()=>this();e[Te]=n,n.readonlyFn=e}return n.readonlyFn}var Ze=class{},ur=new k("",{providedIn:"root",factory:()=>!1});var Rc=new k(""),go=new k("");var dr=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=k0}return n})();function k0(){return new dr(L(),Ee())}var Bt=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Gi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Y(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),hr=(()=>{class n{internalPendingTasks=M(Bt);scheduler=M(Ze);errorHandler=M(Ke);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let i=this.add();t().catch(this.errorHandler).finally(i)}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})();function wn(...n){}var fr=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>new $l})}return n})(),$l=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,i=this.queues.get(t);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,i]of this.queues)t===null?e||=this.flushQueue(i):e||=t.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,t=!0,i.run());return t}};function Lo(n){return{toString:n}.toString()}function G0(n){return typeof n=="function"}var _o=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function um(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function W0(n){return n.type.prototype.ngOnChanges&&(n.setInput=q0),Y0}function Y0(){let n=hm(this),e=n?.current;if(e){let t=n.previous;if(t===dn)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function q0(n,e,t,i,r){let s=this.declaredInputs[i],o=hm(n)||Z0(n,{previous:dn,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new _o(c&&c.currentValue,t,l===dn),um(n,e,r,t)}var dm="__ngSimpleChanges__";function hm(n){return n[dm]||null}function Z0(n,e){return n[dm]=e}var Fp=[];var q=function(n,e=null,t){for(let i=0;i<Fp.length;i++){let r=Fp[i];r(n,e,t)}};function Q0(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=W0(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function fm(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function yo(n,e,t){pm(n,e,3,t)}function Do(n,e,t,i){(n[O]&3)===t&&pm(n,e,t,i)}function Pc(n,e){let t=n[O];(t&3)===e&&(t&=16383,t+=1,n[O]=t)}function pm(n,e,t,i){let r=i!==void 0?n[gn]&65535:0,s=i??-1,o=e.length-1,a=0;for(let l=r;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[gn]+=65536),(a<s||s==-1)&&(X0(n,t,e,l),n[gn]=(n[gn]&4294901760)+l+2),l++}function Lp(n,e){q(4,n,e);let t=F(null);try{e.call(n)}finally{F(t),q(5,n,e)}}function X0(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[O]>>14<n[gn]>>16&&(n[O]&3)===e&&(n[O]+=16384,Lp(a,s)):Lp(a,s)}var hi=-1,gr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=t,this.injectImpl=i}};function K0(n){return(n.flags&8)!==0}function J0(n){return(n.flags&16)!==0}function eD(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];nD(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function tD(n){return n===3||n===4||n===6}function nD(n){return n.charCodeAt(0)===64}function Vo(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?Vp(n,t,r,null,e[++i]):Vp(n,t,r,null,null))}}return n}function Vp(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){r!==null&&(n[s+1]=r);return}s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r)}function mm(n){return n!==hi}function Co(n){return n&32767}function iD(n){return n>>16}function So(n,e){let t=iD(n),i=e;for(;t>0;)i=i[mn],t--;return i}var Uc=!0;function Mo(n){let e=Uc;return Uc=n,e}var rD=256,gm=rD-1,vm=5,sD=0,ut={};function oD(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(un)&&(i=t[un]),i==null&&(i=t[un]=sD++);let r=i&gm,s=1<<r;e.data[n+(r>>vm)]|=s}function ym(n,e){let t=Dm(n,e);if(t!==-1)return t;let i=e[A];i.firstCreatePass&&(n.injectorIndex=e.length,kc(i.data,n),kc(e,null),kc(i.blueprint,null));let r=gu(n,e),s=n.injectorIndex;if(mm(r)){let o=Co(r),a=So(r,e),l=a[A].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function kc(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Dm(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function gu(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=Cm(r),i===null)return hi;if(t++,r=r[mn],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return hi}function aD(n,e,t){oD(n,e,t)}function Em(n,e,t){if(t&8||n!==void 0)return n;to(e,"NodeInjector")}function bm(n,e,t,i){if(t&8&&i===void 0&&(i=null),(t&3)===0){let r=n[pn],s=ve(void 0);try{return r?r.get(e,i,t&8):Jl(e,i,t&8)}finally{ve(s)}}return Em(i,e,t)}function wm(n,e,t,i=0,r){if(n!==null){if(e[O]&2048&&!(i&2)){let o=dD(n,e,t,i,ut);if(o!==ut)return o}let s=_m(n,e,t,i,ut);if(s!==ut)return s}return bm(e,t,i,r)}function _m(n,e,t,i,r){let s=cD(t);if(typeof s=="function"){if(!Ic(e,n,i))return i&1?Em(r,t,i):bm(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&8))to(t);else return o}finally{Tc()}}else if(typeof s=="number"){let o=null,a=Dm(n,e),l=hi,c=i&1?e[Ne][Ue]:null;for((a===-1||i&4)&&(l=a===-1?gu(n,e):e[a+8],l===hi||!jp(i,!1)?a=-1:(o=e[A],a=Co(l),e=So(l,e)));a!==-1;){let u=e[A];if(Bp(s,a,u.data)){let d=lD(a,e,t,o,i,c);if(d!==ut)return d}l=e[a+8],l!==hi&&jp(i,e[A].data[a+8]===c)&&Bp(s,a,e)?(o=u,a=Co(l),e=So(l,e)):a=-1}}return r}function lD(n,e,t,i,r,s){let o=e[A],a=o.data[n+8],l=i==null?Lt(a)&&Uc:i!=o&&(a.type&3)!==0,c=r&1&&s===a,u=Eo(a,o,t,l,c);return u!==null?Io(e,o,u,a,r):ut}function Eo(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:c;for(let f=d;f<h;f++){let p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){let f=o[l];if(f&&yn(f)&&f.type===t)return l}return null}function Io(n,e,t,i,r){let s=n[t],o=e.data;if(s instanceof gr){let a=s;if(a.resolving){let f=Qs(o[t]);throw Kl(f)}let l=Mo(a.canSeeViewProviders);a.resolving=!0;let c=o[t].type||o[t],u,d=a.injectImpl?ve(a.injectImpl):null,h=Ic(n,i,0);try{s=n[t]=a.factory(void 0,r,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&Q0(t,o[t],e)}finally{d!==null&&ve(d),Mo(l),a.resolving=!1,Tc()}}return s}function cD(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(un)?n[un]:void 0;return typeof e=="number"?e>=0?e&gm:uD:e}function Bp(n,e,t){let i=1<<n;return!!(t[e+(n>>vm)]&i)}function jp(n,e){return!(n&2)&&!(n&1&&e)}var Cn=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return wm(this._tNode,this._lView,e,sn(i),t)}};function uD(){return new Cn(Ee(),L())}function dD(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[O]&2048&&!ai(o);){let a=_m(s,o,t,i|2,ut);if(a!==ut)return a;let l=s.parent;if(!l){let c=o[ac];if(c){let u=c.get(t,ut,i);if(u!==ut)return u}l=Cm(o),o=o[mn]}s=l}return r}function Cm(n){let e=n[A],t=e.type;return t===2?e.declTNode:t===1?n[Ue]:null}function hD(){return mi(Ee(),L())}function mi(n,e){return new Ut(lt(n,e))}var Ut=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=hD}return n})();function fD(n){return n instanceof Ut?n.nativeElement:n}function pD(){return this._results[Symbol.iterator]()}var To=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new At}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=Jf(e);(this._changesDetected=!Kf(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=pD};function Sm(n){return(n.flags&128)===128}var vu=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(vu||{}),Mm=new Map,mD=0;function gD(){return mD++}function vD(n){Mm.set(n[nr],n)}function Hc(n){Mm.delete(n[nr])}var Up="__ngContext__";function fi(n,e){at(e)?(n[Up]=e[nr],vD(e)):n[Up]=e}function Im(n){return xm(n[oi])}function Tm(n){return xm(n[je])}function xm(n){for(;n!==null&&!Xe(n);)n=n[je];return n}var $c;function yu(n){$c=n}function Nm(){if($c!==void 0)return $c;if(typeof document<"u")return document;throw new N(210,!1)}var Bo=new k("",{providedIn:"root",factory:()=>yD}),yD="ng",jo=new k(""),gi=new k("",{providedIn:"platform",factory:()=>"unknown"});var Uo=new k("",{providedIn:"root",factory:()=>Nm().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var DD="h",ED="b";var Am="r";var Rm="di";var Pm=!1,km=new k("",{providedIn:"root",factory:()=>Pm});var bD=(n,e,t,i)=>{};function wD(n,e,t,i){bD(n,e,t,i)}function Du(n){return(n.flags&32)===32}var _D=()=>null;function Om(n,e,t=!1){return _D(n,e,t)}function Fm(n,e){let t=n.contentQueries;if(t!==null){let i=F(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];co(s),a.contentQueries(2,e[o],o)}}}finally{F(i)}}}function zc(n,e,t){co(0);let i=F(null);try{e(n,t)}finally{F(i)}}function Lm(n,e,t){if(cc(e)){let i=F(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=t[o];a.contentQueries(1,l,o)}}}finally{F(i)}}}var Ct=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Ct||{});var Gc=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zl})`}};function Vm(n){return n instanceof Gc?n.changingThisBreaksApplicationSecurity:n}function CD(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}var Bm="ng-template";function SD(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&CD(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(Eu(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Eu(n){return n.type===4&&n.value!==Bm}function MD(n,e,t){let i=n.type===4&&!t?Bm:n.value;return e===i}function ID(n,e,t){let i=4,r=n.attrs,s=r!==null?ND(r):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!et(i)&&!et(l))return!1;if(o&&et(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!MD(n,l,t)||l===""&&e.length===1){if(et(i))return!1;o=!0}}else if(i&8){if(r===null||!SD(n,r,l,t)){if(et(i))return!1;o=!0}}else{let c=e[++a],u=TD(l,r,Eu(n),t);if(u===-1){if(et(i))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(et(i))return!1;o=!0}}}}return et(i)||o}function et(n){return(n&1)===0}function TD(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return AD(e,n)}function xD(n,e,t=!1){for(let i=0;i<e.length;i++)if(ID(n,e[i],t))return!0;return!1}function ND(n){for(let e=0;e<n.length;e++){let t=n[e];if(tD(t))return e}return n.length}function AD(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function Hp(n,e){return n?":not("+e.trim()+")":e}function RD(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!et(o)&&(e+=Hp(s,r),r=""),i=o,s=s||!et(i);t++}return r!==""&&(e+=Hp(s,r)),e}function PD(n){return n.map(RD).join(",")}function kD(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!et(r))break;r=s}i++}return t.length&&e.push(1,...t),e}var Re={};function OD(n,e){return n.createText(e)}function FD(n,e,t){n.setValue(e,t)}function jm(n,e,t){return n.createElement(e,t)}function xo(n,e,t,i,r){n.insertBefore(e,t,i,r)}function Um(n,e,t){n.appendChild(e,t)}function $p(n,e,t,i,r){i!==null?xo(n,e,t,i,r):Um(n,e,t)}function Hm(n,e,t){n.removeChild(null,e,t)}function LD(n,e,t){n.setAttribute(e,"style",t)}function VD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function $m(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&eD(n,e,i),r!==null&&VD(n,e,r),s!==null&&LD(n,e,s)}function bu(n,e,t,i,r,s,o,a,l,c,u){let d=Q+i,h=d+r,f=BD(d,h),p=typeof c=="function"?c():c;return f[A]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function BD(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Re);return t}function jD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=bu(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function wu(n,e,t,i,r,s,o,a,l,c,u){let d=e.blueprint.slice();return d[Qe]=r,d[O]=i|4|128|8|64|1024,(c!==null||n&&n[O]&2048)&&(d[O]|=2048),dc(d),d[re]=d[mn]=n,d[ee]=t,d[bt]=o||n&&n[bt],d[K]=a||n&&n[K],d[pn]=l||n&&n[pn]||null,d[Ue]=s,d[nr]=gD(),d[ri]=u,d[ac]=c,d[Ne]=e.type==2?n[Ne]:d,d}function UD(n,e,t){let i=lt(e,n),r=jD(t),s=n[bt].rendererFactory,o=_u(n,wu(n,r,null,zm(t),i,e,null,s.createRenderer(i,t),null,null,null));return n[e.index]=o}function zm(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Gm(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function _u(n,e){return n[oi]?n[oc][je]=e:n[oi]=e,n[oc]=e,e}function _(n=1){Wm(ae(),L(),ct()+n,!1)}function Wm(n,e,t,i){if(!i)if((e[O]&3)===3){let s=n.preOrderCheckHooks;s!==null&&yo(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Do(e,s,0,t)}Vt(t)}var Ho=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ho||{});function Wc(n,e,t,i){let r=F(null);try{let[s,o,a]=n.inputs[t],l=null;(o&Ho.SignalBased)!==0&&(l=e[s][Te]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),n.setInput!==null?n.setInput(e,l,i,t,s):um(e,l,s,i)}finally{F(r)}}var ht=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(ht||{}),HD;function Cu(n,e){return HD(n,e)}function di(n,e,t,i,r){if(i!=null){let s,o=!1;Xe(i)?s=i:at(i)&&(o=!0,i=i[Qe]);let a=He(i);n===0&&t!==null?r==null?Um(e,t,a):xo(e,t,a,r||null,!0):n===1&&t!==null?xo(e,t,a,r||null,!0):n===2?Hm(e,a,o):n===3&&e.destroyNode(a),s!=null&&eE(e,n,s,t,r)}}function $D(n,e){Ym(n,e),e[Qe]=null,e[Ue]=null}function zD(n,e,t,i,r,s){i[Qe]=r,i[Ue]=e,zo(n,i,t,1,r,s)}function Ym(n,e){e[bt].changeDetectionScheduler?.notify(9),zo(n,e,e[K],2,null,null)}function GD(n){let e=n[oi];if(!e)return Oc(n[A],n);for(;e;){let t=null;if(at(e))t=e[oi];else{let i=e[oe];i&&(t=i)}if(!t){for(;e&&!e[je]&&e!==n;)at(e)&&Oc(e[A],e),e=e[re];e===null&&(e=n),at(e)&&Oc(e[A],e),t=e&&e[je]}e=t}}function Su(n,e){let t=n[vn],i=t.indexOf(e);t.splice(i,1)}function $o(n,e){if(Dn(e))return;let t=e[K];t.destroyNode&&zo(n,e,t,3,null,null),GD(e)}function Oc(n,e){if(Dn(e))return;let t=F(null);try{e[O]&=-129,e[O]|=256,e[Ae]&&qn(e[Ae]),YD(n,e),WD(n,e),e[A].type===1&&e[K].destroy();let i=e[Ot];if(i!==null&&Xe(e[re])){i!==e[re]&&Su(i,e);let r=e[ot];r!==null&&r.detachView(n)}Hc(e)}finally{F(t)}}function WD(n,e){let t=n.cleanup,i=e[si];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[t[o+1]];t[o].call(a)}i!==null&&(e[si]=null);let r=e[Dt];if(r!==null){e[Dt]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}let s=e[wt];if(s!==null){e[wt]=null;for(let o of s)o.destroy()}}function YD(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof gr)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];q(4,a,l);try{l.call(a)}finally{q(5,a,l)}}else{q(4,r,s);try{s.call(r)}finally{q(5,r,s)}}}}}function qD(n,e,t){return ZD(n,e.parent,t)}function ZD(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Qe];if(Lt(i)){let{encapsulation:r}=n.data[i.directiveStart+i.componentOffset];if(r===Ct.None||r===Ct.Emulated)return null}return lt(i,t)}function QD(n,e,t){return KD(n,e,t)}function XD(n,e,t){return n.type&40?lt(n,t):null}var KD=XD,zp;function Mu(n,e,t,i){let r=qD(n,i,e),s=e[K],o=i.parent||e[Ue],a=QD(o,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)$p(s,r,t[l],a,!1);else $p(s,r,t,a,!1);zp!==void 0&&zp(s,i,e,t,r)}function pr(n,e){if(e!==null){let t=e.type;if(t&3)return lt(e,n);if(t&4)return Yc(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return pr(n,i);{let r=n[e.index];return Xe(r)?Yc(-1,r):He(r)}}else{if(t&128)return pr(n,e.next);if(t&32)return Cu(e,n)()||He(n[e.index]);{let i=qm(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Pt(n[Ne]);return pr(r,i)}else return pr(n,e.next)}}}return null}function qm(n,e){if(e!==null){let i=n[Ne][Ue],r=e.projection;return i.projection[r]}return null}function Yc(n,e){let t=oe+n+1;if(t<e.length){let i=e[t],r=i[A].firstChild;if(r!==null)return pr(i,r)}return e[Ft]}function Iu(n,e,t,i,r,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(o&&e===0&&(a&&fi(He(a),i),t.flags|=2),!Du(t))if(l&8)Iu(n,e,t.child,i,r,s,!1),di(e,n,r,a,s);else if(l&32){let c=Cu(t,i),u;for(;u=c();)di(e,n,r,u,s);di(e,n,r,a,s)}else l&16?JD(n,e,i,t,r,s):di(e,n,r,a,s);t=o?t.projectionNext:t.next}}function zo(n,e,t,i,r,s){Iu(t,i,n.firstChild,e,r,s,!1)}function JD(n,e,t,i,r,s){let o=t[Ne],l=o[Ue].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];di(e,n,r,u,s)}else{let c=l,u=o[re];Sm(i)&&(c.flags|=128),Iu(n,e,c,u,r,s,!0)}}function eE(n,e,t,i,r){let s=t[Ft],o=He(t);s!==o&&di(e,n,i,s,r);for(let a=oe;a<t.length;a++){let l=t[a];zo(l[A],l,n,e,i,s)}}function tE(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:ht.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ht.Important),n.setStyle(t,i,r,s))}}function Zm(n,e,t,i,r){let s=ct(),o=i&2;try{Vt(-1),o&&e.length>Q&&Wm(n,e,Q,!1),q(o?2:0,r,t),t(i,r)}finally{Vt(s),q(o?3:1,r,t)}}function Tu(n,e,t){lE(n,e,t),(t.flags&64)===64&&cE(n,e,t)}function Go(n,e,t=lt){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function nE(n,e,t,i){let s=i.get(km,Pm)||t===Ct.ShadowDom,o=n.selectRootElement(e,s);return iE(o),o}function iE(n){rE(n)}var rE=()=>null;function sE(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function oE(n,e,t,i,r,s){let o=e[A];if(xu(n,o,e,t,i)){Lt(n)&&aE(e,n.index);return}n.type&3&&(t=sE(t)),Qm(n,e,t,i,r,s)}function Qm(n,e,t,i,r,s){if(n.type&3){let o=lt(n,e);i=s!=null?s(i,n.value||"",t):i,r.setProperty(o,t,i)}else n.type&12}function aE(n,e){let t=$e(e,n);t[O]&16||(t[O]|=64)}function lE(n,e,t){let i=t.directiveStart,r=t.directiveEnd;Lt(t)&&UD(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ym(t,e);let s=t.initialInputs;for(let o=i;o<r;o++){let a=n.data[o],l=Io(e,n,o,t);if(fi(l,e),s!==null&&dE(e,o-i,l,a,t,s),yn(a)){let c=$e(t.index,e);c[ee]=Io(e,n,o,t)}}}function cE(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=Mp();try{Vt(s);for(let a=i;a<r;a++){let l=n.data[a],c=e[a];lo(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&uE(l,c)}}finally{Vt(-1),lo(o)}}function uE(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Xm(n,e){let t=n.directiveRegistry,i=null;if(t)for(let r=0;r<t.length;r++){let s=t[r];xD(e,s.selectors,!1)&&(i??=[],yn(s)?i.unshift(s):i.push(s))}return i}function dE(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1];Wc(i,t,l,c)}}function Km(n,e,t,i,r){let s=Q+t,o=e[A],a=r(o,e,n,i,t);e[s]=a,bn(n,!0);let l=n.type===2;return l?($m(e[K],a,n),(vp()===0||rr(n))&&fi(a,e),yp()):fi(a,e),fo()&&(!l||!Du(n))&&Mu(o,e,a,n),n}function Jm(n){let e=n;return bc()?bp():(e=e.parent,bn(e,!1)),e}function hE(n,e){let t=n[pn];if(!t)return;let i;try{i=t.get(Ke,null)}catch{i=null}i?.(e)}function xu(n,e,t,i,r){let s=n.inputs?.[i],o=n.hostDirectiveInputs?.[i],a=!1;if(o)for(let l=0;l<o.length;l+=2){let c=o[l],u=o[l+1],d=e.data[c];Wc(d,t[c],u,r),a=!0}if(s)for(let l of s){let c=t[l],u=e.data[l];Wc(u,c,i,r),a=!0}return a}function fE(n,e){let t=$e(e,n),i=t[A];pE(i,t);let r=t[Qe];r!==null&&t[ri]===null&&(t[ri]=Om(r,t[pn])),q(18),Nu(i,t,t[ee]),q(19,t[ee])}function pE(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Nu(n,e,t){uo(e);try{let i=n.viewQuery;i!==null&&zc(1,i,t);let r=n.template;r!==null&&Zm(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ot]?.finishViewCreation(n),n.staticContentQueries&&Fm(n,e),n.staticViewQueries&&zc(2,n.viewQuery,t);let s=n.components;s!==null&&mE(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[O]&=-5,ho()}}function mE(n,e){for(let t=0;t<e.length;t++)fE(n,e[t])}function Wo(n,e,t,i){let r=F(null);try{let s=e.tView,a=n[O]&4096?4096:16,l=wu(n,s,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[e.index];l[Ot]=c;let u=n[ot];return u!==null&&(l[ot]=u.createEmbeddedView(s)),Nu(s,l,t),l}finally{F(r)}}function vr(n,e){return!e||e.firstChild===null||Sm(n)}var Gp=!1,gE=new k("");function yr(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&i.push(He(s)),Xe(s)&&eg(s,i);let o=t.type;if(o&8)yr(n,e,t.child,i);else if(o&32){let a=Cu(t,e),l;for(;l=a();)i.push(l)}else if(o&16){let a=qm(e,t);if(Array.isArray(a))i.push(...a);else{let l=Pt(e[Ne]);yr(l[A],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function eg(n,e){for(let t=oe;t<n.length;t++){let i=n[t],r=i[A].firstChild;r!==null&&yr(i[A],i,r,e)}n[Ft]!==n[Qe]&&e.push(n[Ft])}function tg(n){if(n[so]!==null){for(let e of n[so])e.impl.addSequence(e);n[so].length=0}}var ng=[];function vE(n){return n[Ae]??yE(n)}function yE(n){let e=ng.pop()??Object.create(EE);return e.lView=n,e}function DE(n){n.lView[Ae]!==n&&(n.lView=null,ng.push(n))}var EE=P(I({},Kt),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{En(n.lView)},consumerOnSignalRead(){this.lView[Ae]=this}});function bE(n){let e=n[Ae]??Object.create(wE);return e.lView=n,e}var wE=P(I({},Kt),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Pt(n.lView);for(;e&&!ig(e[A]);)e=Pt(e);e&&hc(e)},consumerOnSignalRead(){this.lView[Ae]=this}});function ig(n){return n.type!==2}function rg(n){if(n[wt]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[wt])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[O]&8192)}}var _E=100;function Au(n,e=0){let i=n[bt].rendererFactory,r=!1;r||i.begin?.();try{CE(n,e)}finally{r||i.end?.()}}function CE(n,e){let t=Cc();try{li(!0),qc(n,e);let i=0;for(;lr(n);){if(i===_E)throw new N(103,!1);i++,qc(n,1)}}finally{li(t)}}function sg(n,e){_c(e?cr.Exhaustive:cr.OnlyDirtyViews);try{Au(n)}finally{_c(cr.Off)}}function SE(n,e,t,i){if(Dn(e))return;let r=e[O],s=!1,o=!1;uo(e);let a=!0,l=null,c=null;s||(ig(n)?(c=vE(e),l=Yn(c)):gs()===null?(a=!1,c=bE(e),l=Yn(c)):e[Ae]&&(qn(e[Ae]),e[Ae]=null));try{dc(e),_p(n.bindingStartIndex),t!==null&&Zm(n,e,t,2,i);let u=(r&3)===3;if(!s)if(u){let f=n.preOrderCheckHooks;f!==null&&yo(e,f,null)}else{let f=n.preOrderHooks;f!==null&&Do(e,f,0,null),Pc(e,0)}if(o||ME(e),rg(e),og(e,0),n.contentQueries!==null&&Fm(n,e),!s)if(u){let f=n.contentCheckHooks;f!==null&&yo(e,f)}else{let f=n.contentHooks;f!==null&&Do(e,f,1),Pc(e,1)}TE(n,e);let d=n.components;d!==null&&lg(e,d,0);let h=n.viewQuery;if(h!==null&&zc(2,h,i),!s)if(u){let f=n.viewCheckHooks;f!==null&&yo(e,f)}else{let f=n.viewHooks;f!==null&&Do(e,f,2),Pc(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ro]){for(let f of e[ro])f();e[ro]=null}s||(tg(e),e[O]&=-73)}catch(u){throw s||En(e),u}finally{c!==null&&($i(c,l),a&&DE(c)),ho()}}function og(n,e){for(let t=Im(n);t!==null;t=Tm(t))for(let i=oe;i<t.length;i++){let r=t[i];ag(r,e)}}function ME(n){for(let e=Im(n);e!==null;e=Tm(e)){if(!(e[O]&2))continue;let t=e[vn];for(let i=0;i<t.length;i++){let r=t[i];hc(r)}}}function IE(n,e,t){q(18);let i=$e(e,n);ag(i,t),q(19,i[ee])}function ag(n,e){oo(n)&&qc(n,e)}function qc(n,e){let i=n[A],r=n[O],s=n[Ae],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&zi(s)),o||=!1,s&&(s.dirty=!1),n[O]&=-9217,o)SE(i,n,i.template,n[ee]);else if(r&8192){let a=F(null);try{rg(n),og(n,1);let l=i.components;l!==null&&lg(n,l,1),tg(n)}finally{F(a)}}}function lg(n,e,t){for(let i=0;i<e.length;i++)IE(n,e[i],t)}function TE(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Vt(~r);else{let s=r,o=t[++i],a=t[++i];Sp(o,s);let l=e[s];q(24,l),a(2,l),q(25,l)}}}finally{Vt(-1)}}function Ru(n,e){let t=Cc()?64:1088;for(n[bt].changeDetectionScheduler?.notify(e);n;){n[O]|=t;let i=Pt(n);if(ai(n)&&!i)return n;n=i}return null}function cg(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function ug(n,e){let t=oe+e;if(t<n.length)return n[t]}function Yo(n,e,t,i=!0){let r=e[A];if(xE(r,e,n,t),i){let o=Yc(t,n),a=e[K],l=a.parentNode(n[Ft]);l!==null&&zD(r,n[Ue],a,e,l,o)}let s=e[ri];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function dg(n,e){let t=Dr(n,e);return t!==void 0&&$o(t[A],t),t}function Dr(n,e){if(n.length<=oe)return;let t=oe+e,i=n[t];if(i){let r=i[Ot];r!==null&&r!==n&&Su(r,i),e>0&&(n[t-1][je]=i[je]);let s=Ji(n,oe+e);$D(i[A],i);let o=s[ot];o!==null&&o.detachView(s[A]),i[re]=null,i[je]=null,i[O]&=-129}return i}function xE(n,e,t,i){let r=oe+i,s=t.length;i>0&&(t[r-1][je]=e),i<s-oe?(e[je]=t[r],ec(t,oe+i,e)):(t.push(e),e[je]=null),e[re]=t;let o=e[Ot];o!==null&&t!==o&&hg(o,e);let a=e[ot];a!==null&&a.insertView(n),ao(e),e[O]|=128}function hg(n,e){let t=n[vn],i=e[re];if(at(i))n[O]|=2;else{let r=i[re][Ne];e[Ne]!==r&&(n[O]|=2)}t===null?n[vn]=[e]:t.push(e)}var jt=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[A];return yr(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[ee]}set context(e){this._lView[ee]=e}get destroyed(){return Dn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[re];if(Xe(e)){let t=e[ir],i=t?t.indexOf(this):-1;i>-1&&(Dr(e,i),Ji(t,i))}this._attachedToViewContainer=!1}$o(this._lView[A],this._lView)}onDestroy(e){fc(this._lView,e)}markForCheck(){Ru(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[O]&=-129}reattach(){ao(this._lView),this._lView[O]|=128}detectChanges(){this._lView[O]|=1024,Au(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new N(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ai(this._lView),t=this._lView[Ot];t!==null&&!e&&Su(t,this._lView),Ym(this._lView[A],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new N(902,!1);this._appRef=e;let t=ai(this._lView),i=this._lView[Ot];i!==null&&!t&&hg(i,this._lView),ao(this._lView)}};var Sn=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=NE;constructor(t,i,r){this._declarationLView=t,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,i){return this.createEmbeddedViewImpl(t,i)}createEmbeddedViewImpl(t,i,r){let s=Wo(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:i,dehydratedView:r});return new jt(s)}}return n})();function NE(){return Pu(Ee(),L())}function Pu(n,e){return n.type&4?new Sn(e,n,mi(n,e)):null}function vi(n,e,t,i,r){let s=n.data[e];if(s===null)s=AE(n,e,t,i,r),Cp()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=Ep();s.injectorIndex=o===null?-1:o.injectorIndex}return bn(s,!0),s}function AE(n,e,t,i,r){let s=Ec(),o=bc(),a=o?s:s&&s.parent,l=n.data[e]=PE(n,a,t,e,i,r);return RE(n,l,s,o),l}function RE(n,e,t,i){n.firstChild===null&&(n.firstChild=e),t!==null&&(i?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function PE(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Dp()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var f1=new RegExp(`^(\\d+)*(${ED}|${DD})*(.*)`);function kE(n){let e=n[lc]??[],i=n[re][K],r=[];for(let s of e)s.data[Rm]!==void 0?r.push(s):OE(s,i);n[lc]=r}function OE(n,e){let t=0,i=n.firstChild;if(i){let r=n.data[Am];for(;t<r;){let s=i.nextSibling;Hm(e,i,!1),i=s,t++}}}var FE=()=>null,LE=()=>null;function Zc(n,e){return FE(n,e)}function fg(n,e,t){return LE(n,e,t)}var pg=class{},qo=class{},Qc=class{resolveComponentFactory(e){throw new N(917,!1)}},Zo=class{static NULL=new Qc},Mn=class{},Qo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>VE()}return n})();function VE(){let n=L(),e=Ee(),t=$e(e.index,n);return(at(t)?t:n)[K]}var mg=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>null})}return n})();var bo={},Xc=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){let r=this.injector.get(e,bo,i);return r!==bo||t===bo?r:this.parentInjector.get(e,t,i)}};function No(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=Gl(r,a);else if(s==2){let l=a,c=e[++o];i=Gl(i,l+": "+c+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function tt(n,e=0){let t=L();if(t===null)return V(n,e);let i=Ee();return wm(i,t,xe(n),e)}function gg(n,e,t,i,r){let s=i===null?null:{"":-1},o=r(n,t);if(o!==null){let a=o,l=null,c=null;for(let u of o)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(o);break}UE(n,e,t,a,s,l,c)}s!==null&&i!==null&&BE(t,i,s)}function BE(n,e,t){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new N(-301,!1);i.push(e[r],s)}}function jE(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function UE(n,e,t,i,r,s,o){let a=i.length,l=!1;for(let h=0;h<a;h++){let f=i[h];!l&&yn(f)&&(l=!0,jE(n,t,h)),aD(ym(t,e),n,f.type)}YE(t,n.data.length,a);for(let h=0;h<a;h++){let f=i[h];f.providersResolver&&f.providersResolver(f)}let c=!1,u=!1,d=Gm(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=i[h];if(t.mergedAttrs=Vo(t.mergedAttrs,f.hostAttrs),$E(n,t,e,d,f),WE(d,f,r),o!==null&&o.has(f)){let[g,v]=o.get(f);t.directiveToIndex.set(f.type,[d,g+t.directiveStart,v+t.directiveStart])}else(s===null||!s.has(f))&&t.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(t.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(t.flags|=64);let p=f.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),c=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),u=!0),d++}HE(n,t,s)}function HE(n,e,t){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=n.data[i];if(t===null||!t.has(r))Wp(0,e,r,i),Wp(1,e,r,i),qp(e,i,!1);else{let s=t.get(r);Yp(0,e,s,i),Yp(1,e,s,i),qp(e,i,!0)}}}function Wp(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(i),vg(e,s)}}function Yp(n,e,t,i){let r=n===0?t.inputs:t.outputs;for(let s in r)if(r.hasOwnProperty(s)){let o=r[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(i,s),vg(e,o)}}function vg(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function qp(n,e,t){let{attrs:i,inputs:r,hostDirectiveInputs:s}=n;if(i===null||!t&&r===null||t&&s===null||Eu(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&r.hasOwnProperty(l)){let c=r[l];for(let u of c)if(u===e){o??=[],o.push(l,i[a+1]);break}}else if(t&&s.hasOwnProperty(l)){let c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===e){o??=[],o.push(c[u+1],i[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function $E(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=on(r.type,!0)),o=new gr(s,yn(r),tt,null);n.blueprint[i]=o,t[i]=o,zE(n,e,i,Gm(n,t,r.hostVars,Re),r)}function zE(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;GE(o)!=a&&o.push(a),o.push(t,i,s)}}function GE(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function WE(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;yn(e)&&(t[""]=n)}}function YE(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function yg(n,e,t,i,r,s,o,a){let l=e[A],c=l.consts,u=ze(c,o),d=vi(l,n,t,i,u);return s&&gg(l,e,d,ze(c,a),r),d.mergedAttrs=Vo(d.mergedAttrs,d.attrs),d.attrs!==null&&No(d,d.attrs,!1),d.mergedAttrs!==null&&No(d,d.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,d),d}function Dg(n,e){fm(n,e),cc(e)&&n.queries.elementEnd(e)}function qE(n,e,t,i,r,s){let o=e.consts,a=ze(o,r),l=vi(e,n,t,i,a);if(l.mergedAttrs=Vo(l.mergedAttrs,l.attrs),s!=null){let c=ze(o,s);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&No(l,l.attrs,!1),l.mergedAttrs!==null&&No(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function ku(n){return bg(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Eg(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function bg(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Xo(n,e,t){return n[e]=t}function ZE(n,e){return n[e]}function ft(n,e,t){if(t===Re)return!1;let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function Ou(n,e,t,i){let r=ft(n,e,t);return ft(n,e+1,i)||r}function QE(n,e,t,i,r){let s=Ou(n,e,t,i);return ft(n,e+2,r)||s}function wo(n,e,t){return function i(r){let s=Lt(n)?$e(n.index,e):e;Ru(s,5);let o=e[ee],a=Zp(e,o,t,r),l=i.__ngNextListenerFn__;for(;l;)a=Zp(e,o,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function Zp(n,e,t,i){let r=F(null);try{return q(6,e,t),t(i)!==!1}catch(s){return hE(n,s),!1}finally{q(7,e,t),F(r)}}function wg(n,e,t,i,r,s,o,a){let l=rr(n),c=!1,u=null;if(!i&&l&&(u=XE(e,t,s,n.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=o,u.__ngLastListenerFn__=o,c=!0}else{let d=lt(n,t),h=i?i(d):d;wD(t,h,s,a);let f=r.listen(h,s,a),p=i?g=>i(He(g[n.index])):n.index;_g(p,e,t,s,a,f,!1)}return c}function XE(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[si],l=r[s+2];return a&&a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function _g(n,e,t,i,r,s,o){let a=e.firstCreatePass?mc(e):null,l=pc(t),c=l.length;l.push(r,s),a&&a.push(i,n,c,(c+1)*(o?-1:1))}function Qp(n,e,t,i,r,s){let o=e[t],a=e[A],c=a.data[t].outputs[i],d=o[c].subscribe(s);_g(n.index,a,e,r,s,d,!0)}var Kc=Symbol("BINDING");var Jc=class extends Zo{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=hn(e);return new Er(t,this.ngModule)}};function KE(n){return Object.keys(n).map(e=>{let[t,i,r]=n[e],s={propName:t,templateName:e,isSignal:(i&Ho.SignalBased)!==0};return r&&(s.transform=r),s})}function JE(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function eb(n,e,t){let i=e instanceof we?e:e?.injector;return i&&n.getStandaloneInjector!==null&&(i=n.getStandaloneInjector(i)||i),i?new Xc(t,i):t}function tb(n){let e=n.get(Mn,null);if(e===null)throw new N(407,!1);let t=n.get(mg,null),i=n.get(Ze,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:i,ngReflect:!1}}function nb(n,e){let t=Cg(n);return jm(e,t,t==="svg"?up:t==="math"?dp:null)}function Cg(n){return(n.selectors[0][0]||"div").toLowerCase()}var Er=class extends qo{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=KE(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=JE(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=PD(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,i,r,s,o){q(22);let a=F(null);try{let l=this.componentDef,c=ib(i,l,o,s),u=eb(l,r||this.ngModule,e),d=tb(u),h=d.rendererFactory.createRenderer(null,l),f=i?nE(h,i,l.encapsulation,u):nb(l,h),p=o?.some(Xp)||s?.some(y=>typeof y!="function"&&y.bindings.some(Xp)),g=wu(null,c,null,512|zm(l),null,null,d,h,u,null,Om(f,u,!0));g[Q]=f,uo(g);let v=null;try{let y=yg(Q,g,2,"#host",()=>c.directiveRegistry,!0,0);f&&($m(h,f,y),fi(f,g)),Tu(c,g,y),Lm(c,y,g),Dg(c,y),t!==void 0&&sb(y,this.ngContentSelectors,t),v=$e(y.index,g),g[ee]=v[ee],Nu(c,g,null)}catch(y){throw v!==null&&Hc(v),Hc(g),y}finally{q(23),ho()}return new Ao(this.componentType,g,!!p)}finally{F(a)}}};function ib(n,e,t,i){let r=n?["ng-version","20.2.4"]:kD(e.selectors[0]),s=null,o=null,a=0;if(t)for(let u of t)a+=u[Kc].requiredVars,u.create&&(u.targetIdx=0,(s??=[]).push(u)),u.update&&(u.targetIdx=0,(o??=[]).push(u));if(i)for(let u=0;u<i.length;u++){let d=i[u];if(typeof d!="function")for(let h of d.bindings){a+=h[Kc].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(s??=[]).push(h)),h.update&&(h.targetIdx=f,(o??=[]).push(h))}}let l=[e];if(i)for(let u of i){let d=typeof u=="function"?u:u.type,h=ic(d);l.push(h)}return bu(0,null,rb(s,o),1,a,l,null,null,null,[r],null)}function rb(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let i of n)i.create();if(t&2&&e)for(let i of e)i.update()}}function Xp(n){let e=n[Kc].kind;return e==="input"||e==="twoWay"}var Ao=class extends pg{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,i){super(),this._rootLView=t,this._hasInputBindings=i,this._tNode=sr(t[A],Q),this.location=mi(this._tNode,t),this.instance=$e(this._tNode.index,t)[ee],this.hostView=this.changeDetectorRef=new jt(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView,s=xu(i,r[A],r,e,t);this.previousInputValues.set(e,t);let o=$e(i.index,r);Ru(o,1)}get injector(){return new Cn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function sb(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null&&s.length?Array.from(s):null)}}var yi=(()=>{class n{static __NG_ELEMENT_ID__=ob}return n})();function ob(){let n=Ee();return Mg(n,L())}var ab=yi,Sg=class extends ab{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return mi(this._hostTNode,this._hostLView)}get injector(){return new Cn(this._hostTNode,this._hostLView)}get parentInjector(){let e=gu(this._hostTNode,this._hostLView);if(mm(e)){let t=So(e,this._hostLView),i=Co(e),r=t[A].data[i+8];return new Cn(r,t)}else return new Cn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Kp(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-oe}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=Zc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,vr(this._hostTNode,o)),a}createComponent(e,t,i,r,s,o,a){let l=e&&!G0(e),c;if(l)c=t;else{let v=t||{};c=v.index,i=v.injector,r=v.projectableNodes,s=v.environmentInjector||v.ngModuleRef,o=v.directives,a=v.bindings}let u=l?e:new Er(hn(e)),d=i||this.parentInjector;if(!s&&u.ngModule==null){let y=(l?d:this.parentInjector).get(we,null);y&&(s=y)}let h=hn(u.componentType??{}),f=Zc(this._lContainer,h?.id??null),p=f?.firstChild??null,g=u.create(d,r,p,s,o,a);return this.insertImpl(g.hostView,c,vr(this._hostTNode,f)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(fp(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[re],c=new Sg(l,l[Ue],l[re]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return Yo(o,r,s,i),e.attachToViewContainerRef(),ec(Fc(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Kp(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Dr(this._lContainer,t);i&&(Ji(Fc(this._lContainer),t),$o(i[A],i))}detach(e){let t=this._adjustIndex(e,-1),i=Dr(this._lContainer,t);return i&&Ji(Fc(this._lContainer),t)!=null?new jt(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function Kp(n){return n[ir]}function Fc(n){return n[ir]||(n[ir]=[])}function Mg(n,e){let t,i=e[n.index];return Xe(i)?t=i:(t=cg(i,e,null,n),e[n.index]=t,_u(e,t)),cb(t,e,n,i),new Sg(t,n,e)}function lb(n,e){let t=n[K],i=t.createComment(""),r=lt(e,n),s=t.parentNode(r);return xo(t,s,i,t.nextSibling(r),!1),i}var cb=hb,ub=()=>!1;function db(n,e,t){return ub(n,e,t)}function hb(n,e,t,i){if(n[Ft])return;let r;t.type&8?r=He(i):r=lb(e,t),n[Ft]=r}var eu=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},tu=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Fu(e,t).matches!==null&&this.queries[t].setDirty()}},nu=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=Eb(e):this.predicate=e}},iu=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ru=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,t,fb(t,s)),this.matchTNodeWithReadOption(e,t,Eo(t,e,s,!1,!1))}else i===Sn?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Eo(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Ut||r===yi||r===Sn&&t.type&4)this.addMatch(t.index,-2);else{let s=Eo(t,e,r,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function fb(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function pb(n,e){return n.type&11?mi(n,e):n.type&4?Pu(n,e):null}function mb(n,e,t,i){return t===-1?pb(e,n):t===-2?gb(n,e,i):Io(n,n[A],t,e)}function gb(n,e,t){if(t===Ut)return mi(e,n);if(t===Sn)return Pu(e,n);if(t===yi)return Mg(e,n)}function Ig(n,e,t,i){let r=e[ot].queries[i];if(r.matches===null){let s=n.data,o=t.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(mb(e,u,o[l+1],t.metadata.read))}}r.matches=a}return r.matches}function su(n,e,t,i){let r=n.queries.getByIndex(t),s=r.matches;if(s!==null){let o=Ig(n,e,r,t);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)i.push(o[a/2]);else{let c=s[a+1],u=e[-l];for(let d=oe;d<u.length;d++){let h=u[d];h[Ot]===h[re]&&su(h[A],h,c,i)}if(u[vn]!==null){let d=u[vn];for(let h=0;h<d.length;h++){let f=d[h];su(f[A],f,c,i)}}}}}return i}function vb(n,e){return n[ot].queries[e].queryList}function yb(n,e,t){let i=new To((t&4)===4);return gp(n,e,i,i.destroy),(e[ot]??=new tu).queries.push(new eu(i))-1}function Db(n,e,t){let i=ae();return i.firstCreatePass&&(bb(i,new nu(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),yb(i,L(),e)}function Eb(n){return n.split(",").map(e=>e.trim())}function bb(n,e,t){n.queries===null&&(n.queries=new iu),n.queries.track(new ru(e,t))}function Fu(n,e){return n.queries.getByIndex(e)}function wb(n,e){let t=n[A],i=Fu(t,e);return i.crossesNgTemplate?su(t,n,e,[]):Ig(t,n,i,e)}var Jp=new Set;function Ht(n){Jp.has(n)||(Jp.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var br=class{};var wr=class extends br{injector;componentFactoryResolver=new Jc(this);instance=null;constructor(e){super();let t=new an([...e.providers,{provide:br,useValue:this},{provide:Zo,useValue:this.componentFactoryResolver}],e.parent||tr(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Tg(n,e,t=null){return new wr({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var _b=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=rc(!1,t.type),r=i.length>0?Tg([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=j({token:n,providedIn:"environment",factory:()=>new n(V(we))})}return n})();function be(n){return Lo(()=>{let e=xg(n),t=P(I({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(_b).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ct.Emulated,styles:n.styles||Be,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ht("NgStandalone"),Ng(t);let i=n.dependencies;return t.directiveDefs=em(i,Cb),t.pipeDefs=em(i,np),t.id=Ib(t),t})}function Cb(n){return hn(n)||ic(n)}function $t(n){return Lo(()=>({type:n.type,bootstrap:n.bootstrap||Be,declarations:n.declarations||Be,imports:n.imports||Be,exports:n.exports||Be,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Sb(n,e){if(n==null)return dn;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s,o,a,l;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s,l=r[3]||null):(s=r,o=r,a=Ho.None,l=null),t[s]=[i,a,l],e[s]=o}return t}function Mb(n){if(n==null)return dn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Sr(n){return Lo(()=>{let e=xg(n);return Ng(e),e})}function Ko(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function xg(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||dn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Be,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Sb(n.inputs,e),outputs:Mb(n.outputs),debugInfo:null}}function Ng(n){n.features?.forEach(e=>e(n))}function em(n,e){return n?()=>{let t=typeof n=="function"?n():n,i=[];for(let r of t){let s=e(r);s!==null&&i.push(s)}return i}:null}function Ib(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ag(n,e,t,i,r,s,o,a){if(t.firstCreatePass){n.mergedAttrs=Vo(n.mergedAttrs,n.attrs);let u=n.tView=bu(2,n,r,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),u.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),bn(n,!1);let l=xb(t,e,n,i);fo()&&Mu(t,e,l,n),fi(l,e);let c=cg(l,e,l,n);e[i+Q]=c,_u(e,c),db(c,n,e)}function Tb(n,e,t,i,r,s,o,a,l,c,u){let d=t+Q,h;return e.firstCreatePass?(h=vi(e,d,4,o||null,a||null),vc()&&gg(e,n,h,ze(e.consts,c),Xm),fm(e,h)):h=e.data[d],Ag(h,n,e,t,i,r,s,l),rr(h)&&Tu(e,n,h),c!=null&&Go(n,h,u),h}function Ro(n,e,t,i,r,s,o,a,l,c,u){let d=t+Q,h;if(e.firstCreatePass){if(h=vi(e,d,4,o||null,a||null),c!=null){let f=ze(e.consts,c);h.localNames=[];for(let p=0;p<f.length;p+=2)h.localNames.push(f[p],-1)}}else h=e.data[d];return Ag(h,n,e,t,i,r,s,l),c!=null&&Go(n,h,u),h}function Jo(n,e,t,i,r,s,o,a){let l=L(),c=ae(),u=ze(c.consts,s);return Tb(l,c,n,e,t,i,r,u,void 0,o,a),Jo}var xb=Nb;function Nb(n,e,t,i){return po(!0),e[K].createComment("")}var Lu=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Lu||{}),Mr=new k(""),Rg=!1,ou=class extends At{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,lp()&&(this.destroyRef=M(_t,{optional:!0})??void 0,this.pendingTasks=M(Bt,{optional:!0})??void 0)}emit(e){let t=F(null);try{super.next(e)}finally{F(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof ue&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},dt=ou;function Pg(n){let e,t;function i(){n=wn;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function tm(n){return queueMicrotask(()=>n()),()=>{n=wn}}var Vu="isAngularZone",Po=Vu+"_ID",Ab=0,se=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new dt(!1);onMicrotaskEmpty=new dt(!1);onStable=new dt(!1);onError=new dt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=Rg}=e;if(typeof Zone>"u")throw new N(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,kb(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Vu)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new N(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new N(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Rb,wn,wn);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},Rb={};function Bu(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Pb(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Pg(()=>{n.callbackScheduled=!1,au(n),n.isCheckStableRunning=!0,Bu(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),au(n)}function kb(n){let e=()=>{Pb(n)},t=Ab++;n._inner=n._inner.fork({name:"angular",properties:{[Vu]:!0,[Po]:t,[Po+t]:!0},onInvokeTask:(i,r,s,o,a,l)=>{if(Ob(l))return i.invokeTask(s,o,a,l);try{return nm(n),i.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),im(n)}},onInvoke:(i,r,s,o,a,l,c)=>{try{return nm(n),i.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Fb(l)&&e(),im(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,au(n),Bu(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function au(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function nm(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function im(n){n._nesting--,Bu(n)}var _r=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new dt;onMicrotaskEmpty=new dt;onStable=new dt;onError=new dt;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function Ob(n){return kg(n,"__ignore_ng_zone__")}function Fb(n){return kg(n,"__scheduler_tick__")}function kg(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Og=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})();var ju=new k("");function Ir(n){return!!n&&typeof n.then=="function"}function Uu(n){return!!n&&typeof n.subscribe=="function"}var Fg=new k("");var Hu=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=M(Fg,{optional:!0})??[];injector=M(st);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let s=ii(this.injector,r);if(Ir(s))t.push(s);else if(Uu(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lg=new k("");function Vg(){ml(()=>{let n="";throw new N(600,n)})}function Bg(n){return n.isBoundToModule}var Lb=10;var Di=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Ke);afterRenderManager=M(Og);zonelessEnabled=M(ur);rootEffectScheduler=M(fr);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new At;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Bt);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ve(t=>!t))}constructor(){M(Mr,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=M(we);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,i){return this.bootstrapImpl(t,i)}bootstrapImpl(t,i,r=st.NULL){return this._injector.get(se).run(()=>{q(10);let o=t instanceof qo;if(!this._injector.get(Hu).done){let p="";throw new N(405,p)}let l;o?l=t:l=this._injector.get(Zo).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let c=Bg(l)?void 0:this._injector.get(br),u=i||l.selector,d=l.create(r,[],u,c),h=d.location.nativeElement,f=d.injector.get(ju,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),mr(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),q(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){q(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Lu.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new N(101,!1);let t=F(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,F(t),this.afterTick.next(),q(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Mn,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Lb;)q(14),this.synchronizeOnce(),q(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!lr(r))continue;let s=i&&!this.zonelessEnabled?0:1;Au(r,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>lr(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;mr(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(t),this._injector.get(Lg,[]).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>mr(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new N(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mr(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var $u=new k("",{providedIn:"root",factory:()=>!1}),zu=new k("",{providedIn:"root",factory:()=>Vb}),Vb=4e3;var D1=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var lu=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),s=this.detach(r);if(r-i>1){let o=this.detach(i);this.attach(i,s),this.attach(r,o)}else this.attach(i,s)}move(e,t){this.attach(t,this.detach(e))}};function Lc(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function Bb(n,e,t){let i,r,s=0,o=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;s<=o&&s<=l;){let c=n.at(s),u=e[s],d=Lc(s,c,s,u,t);if(d!==0){d<0&&n.updateValue(s,u),s++;continue}let h=n.at(o),f=e[l],p=Lc(o,h,l,f,t);if(p!==0){p<0&&n.updateValue(o,f),o--,l--;continue}let g=t(s,c),v=t(o,h),y=t(s,u);if(Object.is(y,v)){let S=t(l,f);Object.is(S,g)?(n.swap(s,o),n.updateValue(o,f),l--,o--):n.move(o,s),n.updateValue(s,u),s++;continue}if(i??=new ko,r??=sm(n,s,o,t),cu(n,i,s,y))n.updateValue(s,u),s++,o++;else if(r.has(y))i.set(g,n.detach(s)),o--;else{let S=n.create(s,e[s]);n.attach(s,S),s++,o++}}for(;s<=l;)rm(n,i,t,s,e[s]),s++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&s<=o;){let u=n.at(s),d=c.value,h=Lc(s,u,s,d,t);if(h!==0)h<0&&n.updateValue(s,d),s++,c=l.next();else{i??=new ko,r??=sm(n,s,o,t);let f=t(s,d);if(cu(n,i,s,f))n.updateValue(s,d),s++,o++,c=l.next();else if(!r.has(f))n.attach(s,n.create(s,d)),s++,o++,c=l.next();else{let p=t(s,u);i.set(p,n.detach(s)),o--}}}for(;!c.done;)rm(n,i,t,n.length,c.value),c=l.next()}for(;s<=o;)n.destroy(n.detach(o--));i?.forEach(l=>{n.destroy(l)})}function cu(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function rm(n,e,t,i,r){if(cu(n,e,i,t(i,r)))n.updateValue(i,r);else{let s=n.create(i,r);n.attach(i,s)}}function sm(n,e,t,i){let r=new Set;for(let s=e;s<=t;s++)r.add(i(s,n.at(s)));return r}var ko=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function Ge(n,e,t,i,r,s,o,a){Ht("NgControlFlow");let l=L(),c=ae(),u=ze(c.consts,s);return Ro(l,c,n,e,t,i,r,u,256,o,a),Gu}function Gu(n,e,t,i,r,s,o,a){Ht("NgControlFlow");let l=L(),c=ae(),u=ze(c.consts,s);return Ro(l,c,n,e,t,i,r,u,512,o,a),Gu}function We(n,e){Ht("NgControlFlow");let t=L(),i=ui(),r=t[i]!==Re?t[i]:-1,s=r!==-1?Oo(t,Q+r):void 0,o=0;if(ft(t,i,n)){let a=F(null);try{if(s!==void 0&&dg(s,o),n!==-1){let l=Q+n,c=Oo(t,l),u=fu(t[A],l),d=fg(c,u,t),h=Wo(t,u,e,{dehydratedView:d});Yo(c,h,o,vr(u,d))}}finally{F(a)}}else if(s!==void 0){let a=ug(s,o);a!==void 0&&(a[ee]=e)}}var uu=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-oe}};function Wu(n){return n}function Yu(n,e){return e}var du=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function Tr(n,e,t,i,r,s,o,a,l,c,u,d,h){Ht("NgControlFlow");let f=L(),p=ae(),g=l!==void 0,v=L(),y=a?o.bind(v[Ne][ee]):o,S=new du(g,y);v[Q+n]=S,Ro(f,p,n+1,e,t,i,r,ze(p.consts,s),256),g&&Ro(f,p,n+2,l,c,u,d,ze(p.consts,h),512)}var hu=class extends lu{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-oe}at(e){return this.getLView(e)[ee].$implicit}attach(e,t){let i=t[ri];this.needsIndexUpdate||=e!==this.length,Yo(this.lContainer,t,e,vr(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,jb(this.lContainer,e)}create(e,t){let i=Zc(this.lContainer,this.templateTNode.tView.ssrId),r=Wo(this.hostLView,this.templateTNode,new uu(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){$o(e[A],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[ee].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ee].$index=e}getLView(e){return Ub(this.lContainer,e)}};function xr(n){let e=F(null),t=ct();try{let i=L(),r=i[A],s=i[t],o=t+1,a=Oo(i,o);if(s.liveCollection===void 0){let c=fu(r,o);s.liveCollection=new hu(a,i,c)}else s.liveCollection.reset();let l=s.liveCollection;if(Bb(l,n,s.trackByFn),l.updateIndexes(),s.hasEmptyBlock){let c=ui(),u=l.length===0;if(ft(i,c,u)){let d=t+2,h=Oo(i,d);if(u){let f=fu(r,d),p=fg(h,f,i),g=Wo(i,f,void 0,{dehydratedView:p});Yo(h,g,0,vr(f,p))}else r.firstUpdatePass&&kE(h),dg(h,0)}}}finally{F(e)}}function Oo(n,e){return n[e]}function jb(n,e){return Dr(n,e)}function Ub(n,e){return ug(n,e)}function fu(n,e){return sr(n,e)}function Ce(n,e,t){let i=L(),r=ui();if(ft(i,r,e)){let s=ae(),o=xc();oE(o,i,n,e,i[K],t)}return Ce}function om(n,e,t,i,r){xu(e,n,t,r?"class":"style",i)}function w(n,e,t,i){let r=L(),s=r[A],o=n+Q,a=s.firstCreatePass?yg(o,r,2,e,Xm,vc(),t,i):s.data[o];if(Km(a,r,n,e,jg),rr(a)){let l=r[A];Tu(l,r,a),Lm(l,a,r)}return i!=null&&Go(r,a),w}function b(){let n=ae(),e=Ee(),t=Jm(e);return n.firstCreatePass&&Dg(n,t),yc(t)&&Dc(),gc(),t.classesWithoutHost!=null&&K0(t)&&om(n,t,L(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&J0(t)&&om(n,t,L(),t.stylesWithoutHost,!1),b}function Tn(n,e,t,i){return w(n,e,t,i),b(),Tn}function D(n,e,t,i){let r=L(),s=r[A],o=n+Q,a=s.firstCreatePass?qE(o,s,2,e,t,i):s.data[o];return Km(a,r,n,e,jg),i!=null&&Go(r,a),D}function E(){let n=Ee(),e=Jm(n);return yc(e)&&Dc(),gc(),E}function ea(n,e,t,i){return D(n,e,t,i),E(),ea}var jg=(n,e,t,i,r)=>(po(!0),jm(e[K],i,Rp()));function zt(){return L()}function ta(n,e,t){let i=L(),r=ui();if(ft(i,r,e)){let s=ae(),o=xc();Qm(o,i,n,e,i[K],t)}return ta}var _n=void 0;function Hb(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var $b=["en",[["a","p"],["AM","PM"],_n],[["AM","PM"],_n,_n],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_n,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_n,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_n,"{1} 'at' {0}",_n],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Hb],Vc={};function na(n){let e=zb(n),t=am(e);if(t)return t;let i=e.split("-")[0];if(t=am(i),t)return t;if(i==="en")return $b;throw new N(701,!1)}function am(n){return n in Vc||(Vc[n]=cn.ng&&cn.ng.common&&cn.ng.common.locales&&cn.ng.common.locales[n]),Vc[n]}var xn=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(xn||{});function zb(n){return n.toLowerCase().replace(/_/g,"-")}var Nr="en-US";var Gb=Nr;function Ug(n){typeof n=="string"&&(Gb=n.toLowerCase().replace(/_/g,"-"))}function Se(n,e,t){let i=L(),r=ae(),s=Ee();return Wb(r,i,i[K],s,n,e,t),Se}function Gt(n,e,t){let i=L(),r=ae(),s=Ee();return(s.type&3||t)&&wg(s,r,i,t,i[K],n,e,wo(s,i,e)),Gt}function Wb(n,e,t,i,r,s,o){let a=!0,l=null;if((i.type&3||o)&&(l??=wo(i,e,s),wg(i,n,e,o,t,r,s,l)&&(a=!1)),a){let c=i.outputs?.[r],u=i.hostDirectiveOutputs?.[r];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];l??=wo(i,e,s),Qp(i,e,h,f,r,l)}if(c&&c.length)for(let d of c)l??=wo(i,e,s),Qp(i,e,d,r,r,l)}}function Pe(n=1){return Ap(n)}function Nn(n,e,t){Db(n,e,t)}function An(n){let e=L(),t=ae(),i=Mc();co(i+1);let r=Fu(t,i);if(n.dirty&&hp(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=wb(e,i);n.reset(s,fD),n.notifyOnChanges()}return!0}return!1}function Rn(){return vb(L(),Mc())}function qu(n){let e=wc();return or(e,Q+n)}function vo(n,e){return n<<17|e<<2}function In(n){return n>>17&32767}function Yb(n){return(n&2)==2}function qb(n,e){return n&131071|e<<17}function pu(n){return n|2}function pi(n){return(n&131068)>>2}function Bc(n,e){return n&-131069|e<<2}function Zb(n){return(n&1)===1}function mu(n){return n|1}function Qb(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=In(o),l=pi(o);n[i]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||ni(d,u)>0)&&(c=!0)}else u=t;if(r)if(l!==0){let h=In(n[a+1]);n[i+1]=vo(h,a),h!==0&&(n[h+1]=Bc(n[h+1],i)),n[a+1]=qb(n[a+1],i)}else n[i+1]=vo(a,0),a!==0&&(n[a+1]=Bc(n[a+1],i)),a=i;else n[i+1]=vo(l,0),a===0?a=i:n[l+1]=Bc(n[l+1],i),l=i;c&&(n[i+1]=pu(n[i+1])),lm(n,u,i,!0),lm(n,u,i,!1),Xb(e,u,n,i,s),o=vo(a,l),s?e.classBindings=o:e.styleBindings=o}function Xb(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&ni(s,e)>=0&&(t[i+1]=mu(t[i+1]))}function lm(n,e,t,i){let r=n[t+1],s=e===null,o=i?In(r):pi(r),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],c=n[o+1];Kb(l,e)&&(a=!0,n[o+1]=i?mu(c):pu(c)),o=i?In(c):pi(c)}a&&(n[t+1]=i?pu(r):mu(r))}function Kb(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ni(n,e)>=0:!1}function pe(n,e){return Jb(n,e,null,!0),pe}function Jb(n,e,t,i){let r=L(),s=ae(),o=Sc(2);if(s.firstUpdatePass&&tw(s,n,o,i),e!==Re&&ft(r,o,e)){let a=s.data[ct()];ow(s,a,r,r[K],n,r[o+1]=aw(e,t),i,o)}}function ew(n,e){return e>=n.expandoStartIndex}function tw(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[ct()],o=ew(n,t);lw(s,i)&&e===null&&!o&&(e=!1),e=nw(r,s,e,i),Qb(r,s,e,t,o,i)}}function nw(n,e,t,i){let r=Ip(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=jc(null,n,e,t,i),t=Cr(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=jc(r,n,e,t,i),s===null){let l=iw(n,e,i);l!==void 0&&Array.isArray(l)&&(l=jc(null,n,e,l[1],i),l=Cr(l,e.attrs,i),rw(n,e,i,l))}else s=sw(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function iw(n,e,t){let i=t?e.classBindings:e.styleBindings;if(pi(i)!==0)return n[In(i)]}function rw(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[In(r)]=i}function sw(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=Cr(i,o,t)}return Cr(i,e.attrs,t)}function jc(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=Cr(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Cr(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),tp(n,o,t?!0:e[++s]))}return n===void 0?null:n}function ow(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=Zb(c)?cm(l,e,t,r,pi(c),o):void 0;if(!Fo(u)){Fo(s)||Yb(c)&&(s=cm(l,null,t,r,a,o));let d=uc(ct(),t);tE(i,o,d,r,s)}}function cm(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=t[r+1];h===Re&&(h=d?Be:void 0);let f=d?io(h,i):u===i?h:void 0;if(c&&!Fo(f)&&(f=io(l,i)),Fo(f)&&(a=f,o))return a;let p=n[r+1];r=o?In(p):pi(p)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=io(l,i))}return a}function Fo(n){return n!==void 0}function aw(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Rt(Vm(n)))),n}function lw(n,e){return(n.flags&(e?8:16))!==0}function m(n,e=""){let t=L(),i=ae(),r=n+Q,s=i.firstCreatePass?vi(i,r,1,e,null):i.data[r],o=cw(i,t,s,e,n);t[r]=o,fo()&&Mu(i,t,o,s),bn(s,!1)}var cw=(n,e,t,i,r)=>(po(!0),OD(e[K],i));function uw(n,e,t,i=""){return ft(n,ui(),t)?e+Ki(t)+i:Re}function dw(n,e,t,i,r,s=""){let o=wp(),a=Ou(n,o,t,r);return Sc(2),a?e+Ki(t)+i+Ki(r)+s:Re}function ia(n){return T("",n),ia}function T(n,e,t){let i=L(),r=uw(i,n,e,t);return r!==Re&&Hg(i,ct(),r),T}function Ei(n,e,t,i,r){let s=L(),o=dw(s,n,e,t,i,r);return o!==Re&&Hg(s,ct(),o),Ei}function Hg(n,e,t){let i=uc(e,n);FD(n[K],i,t)}var $g={};function Ar(n){let e=ae(),t=L(),i=n+Q,r=vi(e,i,128,null,null);return bn(r,!1),ar(e,t,i,$g),Ar}function bi(n){Ht("NgLet");let e=ae(),t=L(),i=ct();return ar(e,t,i,n),n}function wi(n){let e=wc(),t=or(e,Q+n);if(t===$g)throw new N(314,!1);return t}function Pn(n,e,t){let i=ci()+n,r=L();return r[i]===Re?Xo(r,i,t?e.call(t):e()):ZE(r,i)}function kn(n,e,t,i,r){return zg(L(),ci(),n,e,t,i,r)}function Zu(n,e,t,i,r,s){return fw(L(),ci(),n,e,t,i,r,s)}function Qu(n,e){let t=n[e];return t===Re?void 0:t}function hw(n,e,t,i,r,s){let o=e+t;return ft(n,o,r)?Xo(n,o+1,s?i.call(s,r):i(r)):Qu(n,o+1)}function zg(n,e,t,i,r,s,o){let a=e+t;return Ou(n,a,r,s)?Xo(n,a+2,o?i.call(o,r,s):i(r,s)):Qu(n,a+2)}function fw(n,e,t,i,r,s,o,a){let l=e+t;return QE(n,l,r,s,o)?Xo(n,l+3,a?i.call(a,r,s,o):i(r,s,o)):Qu(n,l+3)}function H(n,e){let t=ae(),i,r=n+Q;t.firstCreatePass?(i=pw(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let s=i.factory||(i.factory=on(i.type,!0)),o,a=ve(tt);try{let l=Mo(!1),c=s();return Mo(l),ar(t,L(),r,c),c}finally{ve(a)}}function pw(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function Xu(n,e,t){let i=n+Q,r=L(),s=or(r,i);return Gg(r,i)?hw(r,ci(),e,s.transform,t,s):s.transform(t)}function $(n,e,t,i){let r=n+Q,s=L(),o=or(s,r);return Gg(s,r)?zg(s,ci(),e,o.transform,t,i,o):o.transform(t,i)}function Gg(n,e){return n[A].data[e].pure}var mw=(()=>{class n{zone=M(se);changeDetectionScheduler=M(Ze);applicationRef=M(Di);applicationErrorHandler=M(Ke);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Wg({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new se(P(I({},Yg()),{scheduleInRootZone:t})),[{provide:se,useFactory:n},{provide:kt,multi:!0,useFactory:()=>{let i=M(mw,{optional:!0});return()=>i.initialize()}},{provide:kt,multi:!0,useFactory:()=>{let i=M(gw);return()=>{i.initialize()}}},e===!0?{provide:Rc,useValue:!0}:[],{provide:go,useValue:t??Rg},{provide:Ke,useFactory:()=>{let i=M(se),r=M(we),s;return o=>{i.runOutsideAngular(()=>{r.destroyed&&!s?setTimeout(()=>{throw o}):(s??=r.get(qe),s.handleError(o))})}}}]}function Yg(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var gw=(()=>{class n{subscription=new ue;initialized=!1;zone=M(se);pendingTasks=M(Bt);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{se.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{se.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ku=(()=>{class n{applicationErrorHandler=M(Ke);appRef=M(Di);taskService=M(Bt);ngZone=M(se);zonelessEnabled=M(ur);tracing=M(Mr,{optional:!0});disableScheduling=M(Rc,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ue;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Po):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(go,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof _r||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?tm:Pg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Po+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(t),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,tm(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ju(){return Ht("NgZoneless"),fn([{provide:Ze,useExisting:Ku},{provide:se,useClass:_r},{provide:ur,useValue:!0},{provide:go,useValue:!1},[]])}function vw(){return typeof $localize<"u"&&$localize.locale||Nr}var Rr=new k("",{providedIn:"root",factory:()=>M(Rr,{optional:!0,skipSelf:!0})||vw()});function nt(n,e){return Es(n,e?.equal)}var ed=class{[Te];constructor(e){this[Te]=e}destroy(){this[Te].destroy()}};function Wt(n,e){let t=e?.injector??M(st),i=e?.manualCleanup!==!0?t.get(_t):null,r,s=t.get(dr,null,{optional:!0}),o=t.get(Ze);return s!==null?(r=Ew(s.view,o,n),i instanceof Qi&&i._lView===s.view&&(i=null)):r=bw(n,t.get(fr),o),r.injector=t,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new ed(r)}var qg=P(I({},$f),{cleanupFns:void 0,zone:null,onDestroyFn:wn,run(){let n=li(!1);try{zf(this)}finally{li(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=F(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],F(n)}}}),yw=P(I({},qg),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){qn(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),Dw=P(I({},qg),{consumerMarkedDirty(){this.view[O]|=8192,En(this.view),this.notifier.notify(13)},destroy(){qn(this),this.onDestroyFn(),this.cleanup(),this.view[wt]?.delete(this)}});function Ew(n,e,t){let i=Object.create(Dw);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=Zg(i,t),n[wt]??=new Set,n[wt].add(i),i.consumerMarkedDirty(i),i}function bw(n,e,t){let i=Object.create(yw);return i.fn=Zg(i,n),i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function Zg(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}var Lw=new k("");Lw.__NG_ELEMENT_ID__=n=>{let e=Ee();if(e===null)throw new N(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new N(204,!1)};var td=new k(""),Vw=new k("");function Pr(n){return!n.moduleRef}function Bw(n){let e=Pr(n)?n.r3Injector:n.moduleRef.injector,t=e.get(se);return t.run(()=>{Pr(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Ke),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:i})}),Pr(n)){let s=()=>e.destroy(),o=n.platformInjector.get(td);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(td);o.add(s),n.moduleRef.onDestroy(()=>{mr(n.allPlatformModules,n.moduleRef),r.unsubscribe(),o.delete(s)})}return Uw(i,t,()=>{let s=e.get(Bt),o=s.add(),a=e.get(Hu);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(Rr,Nr);if(Ug(l||Nr),!e.get(Vw,!0))return Pr(n)?e.get(Di):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Pr(n)){let u=e.get(Di);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return jw?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var jw;function Uw(n,e,t){try{let i=t();return Ir(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n(i)),i}}var ra=null;function Hw(n=[],e){return st.create({name:e,providers:[{provide:er,useValue:"platform"},{provide:td,useValue:new Set([()=>ra=null])},...n]})}function $w(n=[]){if(ra)return ra;let e=Hw(n);return ra=e,Vg(),zw(e),e}function zw(n){let e=n.get(jo,null);ii(n,()=>{e?.forEach(t=>t())})}var oa=(()=>{class n{static __NG_ELEMENT_ID__=Gw}return n})();function Gw(n){return Ww(Ee(),L(),(n&16)===16)}function Ww(n,e,t){if(Lt(n)&&!t){let i=$e(n.index,e);return new jt(i,i)}else if(n.type&175){let i=e[Ne];return new jt(i,e)}return null}var nd=class{constructor(){}supports(e){return ku(e)}create(e){return new id(e)}},Yw=(n,e)=>e,id=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Yw}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let o=!i||t&&t.currentIndex<Qg(i,r,s)?t:i,a=Qg(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,o.previousIndex==null)r++;else{s||(s=[]);let c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ku(e))throw new N(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),i=!0):(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,Eg(e,a=>{o=this._trackByFn(r,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new rd(t,i),s,r)),e}_verifyReinsertion(e,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new sa),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new sa),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},rd=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},sd=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},sa=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new sd,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Qg(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function Xg(){return new od([new nd])}var od=(()=>{class n{factories;static \u0275prov=j({token:n,providedIn:"root",factory:Xg});constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let i=M(n,{optional:!0,skipSelf:!0});return n.create(t,i||Xg())}}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new N(901,!1)}}return n})();function ev(n){q(8);try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=$w(i),s=[Wg({}),{provide:Ze,useExisting:Ku},Op,...t||[]],o=new wr({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return Bw({r3Injector:o.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}finally{q(9)}}var tv=null;function Or(){return tv}function ad(n){tv??=n}var kr=class{};var dd=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(dd||{});var pt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function _i(n,e){let t=na(n),i=t[xn.NumberSymbols][e];if(typeof i>"u"){if(e===pt.CurrencyDecimal)return t[xn.NumberSymbols][pt.Decimal];if(e===pt.CurrencyGroup)return t[xn.NumberSymbols][pt.Group]}return i}function sv(n,e){return na(n)[xn.NumberFormats][e]}var qw=/^(\d+)?\.((\d+)(-(\d+))?)?$/,nv=22,aa=".",Fr="0",Zw=";",Qw=",",ld="#";function Xw(n,e,t,i,r,s,o=!1){let a="",l=!1;if(!isFinite(n))a=_i(t,pt.Infinity);else{let c=e_(n);o&&(c=Jw(c));let u=e.minInt,d=e.minFrac,h=e.maxFrac;if(s){let S=s.match(qw);if(S===null)throw new N(2306,!1);let R=S[1],x=S[3],G=S[5];R!=null&&(u=cd(R)),x!=null&&(d=cd(x)),G!=null?h=cd(G):x!=null&&d>h&&(h=d)}t_(c,d,h);let f=c.digits,p=c.integerLen,g=c.exponent,v=[];for(l=f.every(S=>!S);p<u;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?v=f.splice(p,f.length):(v=f,f=[0]);let y=[];for(f.length>=e.lgSize&&y.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)y.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(_i(t,i)),v.length&&(a+=_i(t,r)+v.join("")),g&&(a+=_i(t,pt.Exponential)+"+"+g)}return n<0&&!l?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function ov(n,e,t){let i=sv(e,dd.Decimal),r=Kw(i,_i(e,pt.MinusSign));return Xw(n,r,e,pt.Group,pt.Decimal,t)}function Kw(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(Zw),r=i[0],s=i[1],o=r.indexOf(aa)!==-1?r.split(aa):[r.substring(0,r.lastIndexOf(Fr)+1),r.substring(r.lastIndexOf(Fr)+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf(ld));for(let u=0;u<l.length;u++){let d=l.charAt(u);d===Fr?t.minFrac=t.maxFrac=u+1:d===ld?t.maxFrac=u+1:t.posSuf+=d}let c=a.split(Qw);if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){let u=r.length-t.posPre.length-t.posSuf.length,d=s.indexOf(ld);t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function Jw(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function e_(n){let e=Math.abs(n)+"",t=0,i,r,s,o,a;for((r=e.indexOf(aa))>-1&&(e=e.replace(aa,"")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;e.charAt(s)===Fr;s++);if(s===(a=e.length))i=[0],r=1;else{for(a--;e.charAt(a)===Fr;)a--;for(r-=s,i=[],o=0;s<=a;s++,o++)i[o]=Number(e.charAt(s))}return r>nv&&(i=i.splice(0,nv-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}function t_(n,e,t){if(e>t)throw new N(2307,!1);let i=n.digits,r=i.length-n.integerLen,s=Math.min(Math.max(e,r),t),o=s+n.integerLen,a=i[o];if(o>0){i.splice(Math.max(n.integerLen,o));for(let d=o;d<i.length;d++)i[d]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,o=s+1),i[0]=0;for(let d=1;d<o;d++)i[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[o-1]++;for(;r<Math.max(0,s);r++)i.push(0);let l=s!==0,c=e+n.integerLen,u=i.reduceRight(function(d,h,f,p){return h=h+d,p[f]=h<10?h:h-10,l&&(p[f]===0&&f>=c?p.pop():l=!1),h>=10?1:0},0);u&&(i.unshift(u),n.integerLen++)}function cd(n){let e=parseInt(n);if(isNaN(e))throw new N(2305,!1);return e}var ud=/\s+/,iv=[],Fn=(()=>{class n{_ngEl;_renderer;initialClasses=iv;rawClass;stateMap=new Map;constructor(t,i){this._ngEl=t,this._renderer=i}set klass(t){this.initialClasses=t!=null?t.trim().split(ud):iv}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(ud):t}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let i of t)this._updateState(i,!0);else if(t!=null)for(let i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){let r=this.stateMap.get(t);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){t=t.trim(),t.length>0&&t.split(ud).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||n)(tt(Ut),tt(Qo))};static \u0275dir=Sr({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var la=class{$implicit;ngForOf;index;count;constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ca=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new la(r.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)i.remove(s===null?void 0:s);else if(s!==null){let a=i.get(s);i.move(a,o),rv(a,r)}});for(let r=0,s=i.length;r<s;r++){let a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let s=i.get(r.currentIndex);rv(s,r)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(tt(yi),tt(Sn),tt(od))};static \u0275dir=Sr({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function rv(n,e){n.context.$implicit=e.item}function n_(n,e){return new N(2100,!1)}var hd=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Ko({name:"json",type:n,pure:!1})}return n})();var it=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,i,r){if(!i_(t))return null;r||=this._locale;try{let s=r_(t);return ov(s,r,i)}catch(s){throw n_(n,s.message)}}static \u0275fac=function(i){return new(i||n)(tt(Rr,16))};static \u0275pipe=Ko({name:"number",type:n,pure:!0})}return n})();function i_(n){return!(n==null||n===""||n!==n)}function r_(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new N(2309,!1);return n}var Me=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$t({type:n});static \u0275inj=Et({})}return n})();function Lr(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var Ln=class{};var av="browser";var da=new k(""),vd=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r,s){return this._findPluginFor(i).addEventListener(t,i,r,s)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new N(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(V(da),V(se))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Br=class{_doc;constructor(e){this._doc=e}manager},fd="ng-app-id";function lv(n){for(let e of n)e.remove()}function cv(n,e){let t=e.createElement("style");return t.textContent=n,t}function s_(n,e,t,i){let r=n.head?.querySelectorAll(`style[${fd}="${e}"],link[${fd}="${e}"]`);if(r)for(let s of r)s.removeAttribute(fd),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function md(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var yd=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,s_(t,i,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,i){for(let r of t)this.addUsage(r,this.inline,cv);i?.forEach(r=>this.addUsage(r,this.external,md))}removeStyles(t,i){for(let r of t)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(t,i,r){let s=i.get(t);s?s.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,r(t,this.doc)))})}removeUsage(t,i){let r=i.get(t);r&&(r.usage--,r.usage<=0&&(lv(r.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])lv(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(t,cv(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(t,md(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(V(_e),V(Bo),V(Uo,8),V(gi))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),pd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Dd=/%COMP%/g;var dv="%COMP%",o_=`_nghost-${dv}`,a_=`_ngcontent-${dv}`,l_=!0,c_=new k("",{providedIn:"root",factory:()=>l_});function u_(n){return a_.replace(Dd,n)}function d_(n){return o_.replace(Dd,n)}function hv(n,e){return e.map(t=>t.replace(Dd,n))}var Ed=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;animationDisabled;maxAnimationTimeout;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;registry;constructor(t,i,r,s,o,a,l,c=null,u,d,h=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.animationDisabled=u,this.maxAnimationTimeout=d,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new jr(t,o,l,this.platformIsServer,this.tracingService,this.registry=mo(),this.maxAnimationTimeout)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(t,i);return r instanceof ua?r.applyToHost(t):r instanceof Ur&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,s=r.get(i.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(i.encapsulation){case Ct.Emulated:s=new ua(l,c,i,this.appId,u,o,a,d,h,this.registry,this.animationDisabled,this.maxAnimationTimeout);break;case Ct.ShadowDom:return new gd(l,c,t,i,o,a,this.nonce,d,h,this.registry,this.maxAnimationTimeout);default:s=new Ur(l,c,i,u,o,a,d,h,this.registry,this.animationDisabled,this.maxAnimationTimeout);break}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(i){return new(i||n)(V(vd),V(yd),V(Bo),V(c_),V(_e),V(gi),V(se),V(Uo),V($u),V(zu),V(Mr,8))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),jr=class{eventManager;doc;ngZone;platformIsServer;tracingService;registry;maxAnimationTimeout;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,r,s,o,a){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.tracingService=s,this.registry=o,this.maxAnimationTimeout=a}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(pd[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(uv(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(uv(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){let{elements:i}=this.registry;if(i){i.animate(t,()=>t.remove(),this.maxAnimationTimeout);return}t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new N(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=pd[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=pd[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ht.DashCase|ht.Important)?e.style.setProperty(t,i,r&ht.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ht.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i,r){if(typeof e=="string"&&(e=Or().getGlobalEventTarget(this.doc,e),!e))throw new N(5102,!1);let s=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,r)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function uv(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var gd=class extends jr{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,r,s,o,a,l,c,u,d){super(e,s,o,l,c,u,d),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=hv(r.id,h);for(let p of h){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}let f=r.getExternalStyles?.();if(f)for(let p of f){let g=md(p,s);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ur=class extends jr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;_animationDisabled;constructor(e,t,i,r,s,o,a,l,c,u,d,h){super(e,s,o,a,l,c,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this._animationDisabled=u;let f=i.styles;this.styles=h?hv(h,f):f,this.styleUrls=i.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){if(this.removeStylesOnCompDestroy){if(!this._animationDisabled&&this.registry.elements){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)},this.maxAnimationTimeout)});return}this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}},ua=class extends Ur{contentAttr;hostAttr;constructor(e,t,i,r,s,o,a,l,c,u,d,h){let f=r+"-"+i.id;super(e,t,i,s,o,a,l,c,u,d,h,f),this.contentAttr=u_(f),this.hostAttr=d_(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}};var ha=class n extends kr{supportsDOMEvents=!0;static makeCurrent(){ad(new n)}onAndCancel(e,t,i,r){return e.addEventListener(t,i,r),()=>{e.removeEventListener(t,i,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=h_();return t==null?null:f_(t)}resetBaseElement(){Hr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Lr(document.cookie,e)}},Hr=null;function h_(){return Hr=Hr||document.head.querySelector("base"),Hr?Hr.getAttribute("href"):null}function f_(n){return new URL(n,document.baseURI).pathname}var p_=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),pv=(()=>{class n extends Br{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r,s){return t.addEventListener(i,r,s),()=>this.removeEventListener(t,i,r,s)}removeEventListener(t,i,r,s){return t.removeEventListener(i,r,s)}static \u0275fac=function(i){return new(i||n)(V(_e))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),fv=["alt","control","meta","shift"],m_={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},g_={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},mv=(()=>{class n extends Br{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r,s){let o=n.parseEventName(i),a=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Or().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let s=n._normalizeKey(i.pop()),o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),fv.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=m_[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),fv.forEach(o=>{if(o!==r){let a=g_[o];a(t)&&(s+=o+".")}}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(V(_e))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function bd(n,e){let t=I({rootComponent:n},v_(e));return ev(t)}function v_(n){return{appProviders:[...w_,...n?.providers??[]],platformProviders:b_}}function y_(){ha.makeCurrent()}function D_(){return new qe}function E_(){return yu(document),document}var b_=[{provide:gi,useValue:av},{provide:jo,useValue:y_,multi:!0},{provide:_e,useFactory:E_}];var w_=[{provide:er,useValue:"root"},{provide:qe,useFactory:D_},{provide:da,useClass:pv,multi:!0,deps:[_e]},{provide:da,useClass:mv,multi:!0,deps:[_e]},Ed,yd,vd,{provide:Mn,useExisting:Ed},{provide:Ln,useClass:p_},[]];var Mi=class{},$r=class{},Yt=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=t.slice(i+1).trim();this.addHeaderEntry(r,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var pa=class{encodeKey(e){return gv(e)}encodeValue(e){return gv(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function __(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}var C_=/%(\d[a-f0-9])/gi,S_={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function gv(n){return encodeURIComponent(n).replace(C_,(e,t)=>S_[t]??e)}function fa(n){return`${n}`}var St=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new pa,e.fromString){if(e.fromObject)throw new N(2805,!1);this.map=__(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(fa):[fa(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(fa(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(fa(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var ma=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function M_(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function vv(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function yv(n){return typeof Blob<"u"&&n instanceof Blob}function Dv(n){return typeof FormData<"u"&&n instanceof FormData}function I_(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Ev="Content-Type",bv="Accept",wv="X-Request-URL",_v="text/plain",Cv="application/json",T_=`${Cv}, ${_v}, */*`,Ci=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,i,r){this.url=t,this.method=e.toUpperCase();let s;if(M_(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new N(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),this.transferCache=s.transferCache}if(this.headers??=new Yt,this.context??=new ma,!this.params)this.params=new St,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||vv(this.body)||yv(this.body)||Dv(this.body)||I_(this.body)?this.body:this.body instanceof St?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Dv(this.body)?null:yv(this.body)?this.body.type||null:vv(this.body)?null:typeof this.body=="string"?_v:this.body instanceof St?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Cv:null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.keepalive??this.keepalive,o=e.priority||this.priority,a=e.cache||this.cache,l=e.mode||this.mode,c=e.redirect||this.redirect,u=e.credentials||this.credentials,d=e.referrer||this.referrer,h=e.integrity||this.integrity,f=e.transferCache??this.transferCache,p=e.timeout??this.timeout,g=e.body!==void 0?e.body:this.body,v=e.withCredentials??this.withCredentials,y=e.reportProgress??this.reportProgress,S=e.headers||this.headers,R=e.params||this.params,x=e.context??this.context;return e.setHeaders!==void 0&&(S=Object.keys(e.setHeaders).reduce((G,Z)=>G.set(Z,e.setHeaders[Z]),S)),e.setParams&&(R=Object.keys(e.setParams).reduce((G,Z)=>G.set(Z,e.setParams[Z]),R)),new n(t,i,g,{params:R,headers:S,context:x,reportProgress:y,responseType:r,withCredentials:v,transferCache:f,keepalive:s,cache:a,priority:o,timeout:p,mode:l,redirect:c,credentials:u,referrer:d,integrity:h})}},Vn=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Vn||{}),Ii=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,i="OK"){this.headers=e.headers||new Yt,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},ga=class n extends Ii{constructor(e={}){super(e)}type=Vn.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},zr=class n extends Ii{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Vn.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},Si=class extends Ii{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},x_=200,N_=204;function wd(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var ya=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Ci)s=t;else{let l;r.headers instanceof Yt?l=r.headers:l=new Yt(r.headers);let c;r.params&&(r.params instanceof St?c=r.params:c=new St({fromObject:r.params})),s=new Ci(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache,keepalive:r.keepalive,priority:r.priority,cache:r.cache,mode:r.mode,redirect:r.redirect,credentials:r.credentials,referrer:r.referrer,integrity:r.integrity,timeout:r.timeout})}let o=Gs(s).pipe(Tl(l=>this.handler.handle(l)));if(t instanceof Ci||r.observe==="events")return o;let a=o.pipe(Il(l=>l instanceof zr));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ve(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new N(2806,!1);return l.body}));case"blob":return a.pipe(Ve(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new N(2807,!1);return l.body}));case"text":return a.pipe(Ve(l=>{if(l.body!==null&&typeof l.body!="string")throw new N(2808,!1);return l.body}));case"json":default:return a.pipe(Ve(l=>l.body))}case"response":return a;default:throw new N(2809,!1)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new St().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,wd(r,i))}post(t,i,r={}){return this.request("POST",t,wd(r,i))}put(t,i,r={}){return this.request("PUT",t,wd(r,i))}static \u0275fac=function(i){return new(i||n)(V(Mi))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();var A_=new k("");function R_(n,e){return e(n)}function P_(n,e,t){return(i,r)=>ii(t,()=>e(i,s=>n(s,r)))}var Sv=new k(""),Mv=new k(""),Iv=new k("",{providedIn:"root",factory:()=>!0});var va=(()=>{class n extends Mi{backend;injector;chain=null;pendingTasks=M(hr);contributeToStability=M(Iv);constructor(t,i){super(),this.backend=t,this.injector=i}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Sv),...this.injector.get(Mv,[])]));this.chain=i.reduceRight((r,s)=>P_(r,s,this.injector),R_)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Nl(i))}else return this.chain(t,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||n)(V($r),V(we))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();var k_=/^\)\]\}',?\n/,O_=RegExp(`^${wv}:`,"m");function F_(n){return"responseURL"in n&&n.responseURL?n.responseURL:O_.test(n.getAllResponseHeaders())?n.getResponseHeader(wv):null}var _d=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new N(-2800,!1);let i=this.xhrFactory;return Gs(null).pipe(Rl(()=>new Y(s=>{let o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((v,y)=>o.setRequestHeader(v,y.join(","))),t.headers.has(bv)||o.setRequestHeader(bv,T_),!t.headers.has(Ev)){let v=t.detectContentTypeHeader();v!==null&&o.setRequestHeader(Ev,v)}if(t.timeout&&(o.timeout=t.timeout),t.responseType){let v=t.responseType.toLowerCase();o.responseType=v!=="json"?v:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let v=o.statusText||"OK",y=new Yt(o.getAllResponseHeaders()),S=F_(o)||t.url;return l=new ga({headers:y,status:o.status,statusText:v,url:S}),l},u=()=>{let{headers:v,status:y,statusText:S,url:R}=c(),x=null;y!==N_&&(x=typeof o.response>"u"?o.responseText:o.response),y===0&&(y=x?x_:0);let G=y>=200&&y<300;if(t.responseType==="json"&&typeof x=="string"){let Z=x;x=x.replace(k_,"");try{x=x!==""?JSON.parse(x):null}catch(te){x=Z,G&&(G=!1,x={error:te,text:x})}}G?(s.next(new zr({body:x,headers:v,status:y,statusText:S,url:R||void 0})),s.complete()):s.error(new Si({error:x,headers:v,status:y,statusText:S,url:R||void 0}))},d=v=>{let{url:y}=c(),S=new Si({error:v,status:o.status||0,statusText:o.statusText||"Unknown Error",url:y||void 0});s.error(S)},h=d;t.timeout&&(h=v=>{let{url:y}=c(),S=new Si({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:y||void 0});s.error(S)});let f=!1,p=v=>{f||(s.next(c()),f=!0);let y={type:Vn.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(y.total=v.total),t.responseType==="text"&&o.responseText&&(y.partialText=o.responseText),s.next(y)},g=v=>{let y={type:Vn.UploadProgress,loaded:v.loaded};v.lengthComputable&&(y.total=v.total),s.next(y)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",h),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",p),a!==null&&o.upload&&o.upload.addEventListener("progress",g)),o.send(a),s.next({type:Vn.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",h),t.reportProgress&&(o.removeEventListener("progress",p),a!==null&&o.upload&&o.upload.removeEventListener("progress",g)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(i){return new(i||n)(V(Ln))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Tv=new k(""),L_="XSRF-TOKEN",V_=new k("",{providedIn:"root",factory:()=>L_}),B_="X-XSRF-TOKEN",j_=new k("",{providedIn:"root",factory:()=>B_}),Gr=class{},U_=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,i){this.doc=t,this.cookieName=i}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Lr(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(i){return new(i||n)(V(_e),V(V_))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function H_(n,e){let t=n.url.toLowerCase();if(!M(Tv)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=M(Gr).getToken(),r=M(j_);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}function Cd(...n){let e=[ya,_d,va,{provide:Mi,useExisting:va},{provide:$r,useFactory:()=>M(A_,{optional:!0})??M(_d)},{provide:Sv,useValue:H_,multi:!0},{provide:Tv,useValue:!0},{provide:Gr,useClass:U_}];for(let t of n)e.push(...t.\u0275providers);return fn(e)}var xv={providers:[Nc(),Ju(),Cd()]};var z_={currentSymbol:"SOLUSDT",currentTimeframe:"5m",autoCalculation:!0,ohlcvData:[],indicators:{ema8:[],ema21:[],ema50:[],rsi14:[],atr14:[],volume:[]},gates:{trendStack:!1,bosDirection:!1,fiftyPercentRetest:!1,volumeSpike:!1},signalEngine:"NO_TRADE",executionParams:{entry:0,stopLoss:0,tp1:0,tp2:0,trailingStop:0,riskReward:"1:2"},performance:{signalsGenerated:0,accuracyRate:0,avgRR:"0:0",tvDeviation:0},logs:[],backtestResults:{setups:[],expectancy:0,hitRate:0,avgR:0,maxDD:0,ruleAdherence:0,varianceR:0}},le=class n{state=Je(z_);currentState=this.state.asReadonly();constructor(){}updateState(e){this.state.update(e)}addLog(e,t){let i={type:e,message:t,timestamp:new Date().toLocaleTimeString()};this.state.update(r=>P(I({},r),{logs:[...r.logs.slice(-49),i]}))}setCurrentSymbol(e){this.updateState(t=>P(I({},t),{currentSymbol:e}))}setCurrentTimeframe(e){this.updateState(t=>P(I({},t),{currentTimeframe:e}))}setOhlcvData(e){this.updateState(t=>P(I({},t),{ohlcvData:e}))}getCurrentMarketPrice(){let{ohlcvData:e}=this.state();return e.length===0?null:e[e.length-1].close}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Da=class n{constructor(){}calculateAllIndicators(e){if(e.length<50)throw new Error("Insufficient data for indicator calculation");let t=e.map(i=>i.close);return{ema8:this.calculateEMA(t,8),ema21:this.calculateEMA(t,21),ema50:this.calculateEMA(t,50),rsi14:this.calculateRSI(t,14),atr14:this.calculateATR(e,14),volume:this.calculateVolumeAnalysis(e,20)}}calculateEMA(e,t){if(e.length<t)return[];let i=[],r=2/(t+1),s=0;for(let o=0;o<t;o++)s+=e[o];i.push(s/t);for(let o=t;o<e.length;o++){let a=e[o]*r+i[i.length-1]*(1-r);i.push(a)}return i}calculateRSI(e,t=14){if(e.length<t+1)return[];let i=[],r=[],s=[];for(let c=1;c<e.length;c++){let u=e[c]-e[c-1];r.push(u>0?u:0),s.push(u<0?Math.abs(u):0)}if(r.length<t)return[];let o=r.slice(0,t).reduce((c,u)=>c+u,0)/t,a=s.slice(0,t).reduce((c,u)=>c+u,0)/t,l=a===0?1/0:o/a;i.push(100-100/(1+l));for(let c=t;c<r.length;c++)o=(o*(t-1)+r[c])/t,a=(a*(t-1)+s[c])/t,l=a===0?1/0:o/a,i.push(100-100/(1+l));return i}calculateATR(e,t=14){if(e.length<t+1)return[];let i=[];for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1],a=s.high-s.low,l=Math.abs(s.high-o.close),c=Math.abs(s.low-o.close);i.push(Math.max(a,l,c))}return this.calculateEMA(i,t)}calculateVolumeAnalysis(e,t=20){if(e.length<t)return[];let i=[];for(let r=t-1;r<e.length;r++){let s=e.slice(r-t+1,r+1).map(p=>p.volume),o=e[r].volume,a=s.reduce((p,g)=>p+g,0)/t,l=a===0?1/0:o/a,c=e[r],u=Math.abs(c.close-c.open),d=c.high-Math.max(c.open,c.close),h=Math.min(c.open,c.close)-c.low,f=Math.max(d,h)>u*.5;i.push({ratio:l,spike:l>=1.5,absorption:f,avgVolume:a})}return i}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ea=class n{constructor(e,t){this.http=e;this.state=t}BYBIT_KLINE_URL="https://api.bybit.com/v5/market/kline";BYBIT_CONFIG={intervals:{"1m":"1","3m":"3","5m":"5","15m":"15","1h":"60"},maxRetries:2};fetchBybitData(e,t,i=200){let r=this.BYBIT_CONFIG.intervals[t]||"5",o=`${this.BYBIT_KLINE_URL}?category=linear&symbol=${e}&interval=${r}&limit=${i}`;return this.state.addLog("info",`\u{1F4E1} Fetching ${e} ${t} from Bybit...`),this.http.get(o).pipe(Al(this.BYBIT_CONFIG.maxRetries),Ve(a=>{if(a.retCode!==0)throw new Error(`Bybit API Error: ${a.retMsg||"Unknown error"}`);if(!a.result||!a.result.list||!Array.isArray(a.result.list)||a.result.list.length===0)throw new Error("Invalid or empty data from Bybit API");let l=a.result.list.map(c=>{let[u,d,h,f,p,g]=c.map(v=>parseFloat(String(v)));return[u,d,h,f,p,g].some(isNaN)?null:{time:u,open:d,high:h,low:f,close:p,volume:g}}).filter(c=>c!==null).sort((c,u)=>c.time-u.time);if(l.length<50)throw new Error(`Insufficient data: only ${l.length} valid candles`);return this.state.addLog("success",`\u2705 Loaded ${l.length} candles for ${e}`),l}),Ys(a=>(this.state.addLog("error",`\u274C API Error: ${a.message}`),Ml(()=>new Error(a.message)))))}static \u0275fac=function(t){return new(t||n)(V(ya),V(le))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var qt=class n{state=M(le);indicatorCalc=M(Da);api=M(Ea);runSignalPipeline(){let e=this.state.currentState(),t;try{t=this.indicatorCalc.calculateAllIndicators(e.ohlcvData)}catch{t={ema8:[],ema21:[],ema50:[],rsi14:[],atr14:[],volume:[]},this.state.updateState(o=>P(I({},o),{indicators:t}));return}this.state.updateState(s=>P(I({},s),{indicators:t}));let i=this.state.currentState(),r=this.validateGates(i);this.state.updateState(s=>P(I({},s),{gates:r})),this.updateSignalEngine(r,this.state.currentState())}fetchDataAndRunPipeline(){let{currentSymbol:e,currentTimeframe:t,autoCalculation:i}=this.state.currentState();this.api.fetchBybitData(e,t).pipe(xl(1)).subscribe({next:r=>{this.state.setOhlcvData(r),this.runSignalPipeline()},error:r=>{console.error(r),i&&this.state.updateState(s=>P(I({},s),{autoCalculation:!1}))}})}validateGates(e){let{indicators:t,ohlcvData:i}=e,r=t.ema8.length-1;if(r<0)return{trendStack:!1,bosDirection:!1,fiftyPercentRetest:!1,volumeSpike:!1};let s=t.ema8[r],o=t.ema21[t.ema21.length-1],a=t.ema50[t.ema50.length-1],l=s<o&&o<a,c=s>o&&o>a,u=this.state.getCurrentMarketPrice(),d=!1;u?d=l?u<s:c?u>s:!1:d=!1;let h=d,f=this.detectBOS(i),p=f[f.length-1],g=p&&(p.bullish||p.bearish),v=this.detect50PercentRetest(i,t.atr14),y=v[v.length-1],S=y&&y.inZone,R=t.volume[t.volume.length-1],x=R&&R.spike&&R.absorption;return{trendStack:h,bosDirection:g,fiftyPercentRetest:S,volumeSpike:x}}updateSignalEngine(e,t){let i=this.calculateExecutionParameters(t),r=Object.values(e).every(a=>a),s=!r&&Object.values(e).some(a=>a),o=r?"ENTRY":s?"SETUP":"NO_TRADE";this.state.updateState(a=>P(I({},a),{signalEngine:o,executionParams:i}))}calculateExecutionParameters(e){let{ohlcvData:t,indicators:i}=e,r=t.length-1;if(r<0)return e.executionParams;let s=t[r].close,o=i.atr14[i.atr14.length-1]||s*.025,a=i.ema8[i.ema8.length-1],l=i.ema21[i.ema21.length-1],c=a>l?"LONG":"SHORT",u=0,d=0,h=0,f=0;if(c==="LONG"){u=s+.1*o,d=s-1*o;let R=u-d;h=u+1*R,f=u+2*R}else{u=s-.1*o,d=s+1*o;let R=d-u;h=u-1*R,f=u-2*R}let p=.5*o,g=Math.abs(u-d),v=Math.abs(f-u),S=`1:${(g>0?v/g:0).toFixed(1)}`;return{entry:u,stopLoss:d,tp1:h,tp2:f,trailingStop:p,riskReward:S,currentMarketPrice:s,direction:c}}detectBOS(e,t=10){if(e.length<t+5)return[];let i=[];for(let r=t;r<e.length;r++){let s=e.slice(r-t,r+1),o=e[r],a=Math.max(...s.slice(0,-1).map(c=>c.high)),l=Math.min(...s.slice(0,-1).map(c=>c.low));i.push({bullish:o.close>a,bearish:o.close<l})}return i}detect50PercentRetest(e,t){if(e.length<20||t.length===0)return[];let i=[];for(let r=10;r<e.length;r++){let s=e.slice(r-10,r+1),o=e[r],a=t[Math.min(r-1,t.length-1)],l=Math.max(...s.map(h=>h.high)),c=Math.min(...s.map(h=>h.low)),u=(l+c)/2,d=.25*a;i.push({inZone:o.close>=u-d&&o.close<=u+d})}return i}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var ba=class n{signalLogic=M(qt);state=M(le);autoCalcInterval;currentState=this.state.currentState;constructor(){Wt(()=>{this.currentState().autoCalculation?this.startAutoCalculation():this.stopAutoCalculation()}),Wt(()=>{let{currentSymbol:e,currentTimeframe:t,autoCalculation:i}=this.currentState();try{localStorage.setItem("csp.prefs",JSON.stringify({currentSymbol:e,currentTimeframe:t,autoCalculation:i}))}catch{}})}ngOnInit(){try{let e=localStorage.getItem("csp.prefs");if(e){let t=JSON.parse(e);this.state.updateState(i=>P(I({},i),{currentSymbol:t.currentSymbol||i.currentSymbol,currentTimeframe:t.currentTimeframe||i.currentTimeframe,autoCalculation:typeof t.autoCalculation=="boolean"?t.autoCalculation:i.autoCalculation}))}}catch{}this.signalLogic.fetchDataAndRunPipeline()}ngOnDestroy(){this.stopAutoCalculation()}onSymbolChange(e){let t=e.target.value;this.state.setCurrentSymbol(t),this.signalLogic.fetchDataAndRunPipeline()}onTimeframeChange(e){let t=e.target.value;this.state.setCurrentTimeframe(t),this.signalLogic.fetchDataAndRunPipeline()}toggleAutoCalc(){this.state.updateState(e=>P(I({},e),{autoCalculation:!e.autoCalculation}))}startAutoCalculation(){this.autoCalcInterval||(this.state.addLog("info","\u{1F916} Auto-calculation started."),this.autoCalcInterval=setInterval(()=>{this.signalLogic.fetchDataAndRunPipeline()},9e4))}stopAutoCalculation(){this.autoCalcInterval&&(clearInterval(this.autoCalcInterval),this.autoCalcInterval=null,this.state.addLog("info","\u23F8\uFE0F Auto-calculation stopped."))}fetchData(){this.signalLogic.fetchDataAndRunPipeline()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-header"]],decls:175,vars:4,consts:[[1,"card","pipeline-header"],[1,"pipeline-title"],[1,"pipeline-controls"],[1,"control-btn",3,"click"],[1,"control-btn",3,"change","value"],["value","BTCUSDT"],["value","ETHUSDT"],["value","SOLUSDT","selected",""],["value","ADAUSDT"],["value","XRPUSDT"],["value","DOTUSDT"],["value","AVAXUSDT"],["value","MATICUSDT"],["value","LINKUSDT"],["value","ATOMUSDT"],["value","BNBUSDT"],["value","NEARUSDT"],["value","FTMUSDT"],["value","ALGOUSDT"],["value","ICPUSDT"],["value","APTUSDT"],["value","SUIUSDT"],["value","ARBUSDT"],["value","OPUSDT"],["value","UNIUSDT"],["value","AAVEUSDT"],["value","SUSHIUSDT"],["value","COMPUSDT"],["value","MKRUSDT"],["value","CRVUSDT"],["value","1INCHUSDT"],["value","SNXUSDT"],["value","YFIUSDT"],["value","DOGEUSDT"],["value","SHIBUSDT"],["value","PEPEUSDT"],["value","FLOKIUSDT"],["value","BONKUSDT"],["value","WIFUSDT"],["value","AXSUSDT"],["value","SANDUSDT"],["value","MANAUSDT"],["value","ENJUSDT"],["value","GALAUSDT"],["value","CHZUSDT"],["value","FETUSDT"],["value","OCEANUSDT"],["value","AGIXUSDT"],["value","RENDERUSDT"],["value","FILUSDT"],["value","ARUSDT"],["value","STORJUSDT"],["value","HBARUSDT"],["value","VETUSDT"],["value","XLMUSDT"],["value","XMRUSDT"],["value","ZECUSDT"],["value","DASHUSDT"],["value","CAKEUSDT"],["value","GMXUSDT"],["value","DYDXUSDT"],["value","INJUSDT"],["value","THETAUSDT"],["value","ROSEUSDT"],["value","LDOUSDT"],["value","IMXUSDT"],["value","STXUSDT"],["value","TIAUSDT"],["value","ORDIUSDT"],["value","SEIUSDT"],["value","JUPUSDT"],["value","WBTCUSDT"],["value","STETHUSDT"],["value","LTCUSDT"],["value","BCHUSDT"],["value","ETCUSDT"],["value","TRXUSDT"],["value","EOSUSDT"],["value","WLDUSDT"],["value","ARKMUSDT"],["value","BLURUSDT"],["value","MAGICUSDT"],["value","PENDLEUSDT"],["value","RDNTUSDT"],["value","KASUSDT"],["value","CFXUSDT"],["value","COREUSDT"],["value","AGLDUSDT"]],template:function(t,i){t&1&&(D(0,"div",0)(1,"div",1),m(2,"\u{1F527} Crypto Scalper Pro"),E(),D(3,"div",2)(4,"button",3),Gt("click",function(){return i.toggleAutoCalc()}),m(5),E(),D(6,"button",3),Gt("click",function(){return i.fetchData()}),m(7,"\u{1F4CA} Load Data"),E(),D(8,"select",4),Gt("change",function(s){return i.onSymbolChange(s)}),D(9,"option",5),m(10,"BTC/USDT"),E(),D(11,"option",6),m(12,"ETH/USDT"),E(),D(13,"option",7),m(14,"SOL/USDT"),E(),D(15,"option",8),m(16,"ADA/USDT"),E(),D(17,"option",9),m(18,"XRP/USDT"),E(),D(19,"option",10),m(20,"DOT/USDT"),E(),D(21,"option",11),m(22,"AVAX/USDT"),E(),D(23,"option",12),m(24,"MATIC/USDT"),E(),D(25,"option",13),m(26,"LINK/USDT"),E(),D(27,"option",14),m(28,"ATOM/USDT"),E(),D(29,"option",15),m(30,"BNB/USDT"),E(),D(31,"option",16),m(32,"NEAR/USDT"),E(),D(33,"option",17),m(34,"FTM/USDT"),E(),D(35,"option",18),m(36,"ALGO/USDT"),E(),D(37,"option",19),m(38,"ICP/USDT"),E(),D(39,"option",20),m(40,"APT/USDT"),E(),D(41,"option",21),m(42,"SUI/USDT"),E(),D(43,"option",22),m(44,"ARB/USDT"),E(),D(45,"option",23),m(46,"OP/USDT"),E(),D(47,"option",24),m(48,"UNI/USDT"),E(),D(49,"option",25),m(50,"AAVE/USDT"),E(),D(51,"option",26),m(52,"SUSHI/USDT"),E(),D(53,"option",27),m(54,"COMP/USDT"),E(),D(55,"option",28),m(56,"MKR/USDT"),E(),D(57,"option",29),m(58,"CRV/USDT"),E(),D(59,"option",30),m(60,"1INCH/USDT"),E(),D(61,"option",31),m(62,"SNX/USDT"),E(),D(63,"option",32),m(64,"YFI/USDT"),E(),D(65,"option",33),m(66,"DOGE/USDT"),E(),D(67,"option",34),m(68,"SHIB/USDT"),E(),D(69,"option",35),m(70,"PEPE/USDT"),E(),D(71,"option",36),m(72,"FLOKI/USDT"),E(),D(73,"option",37),m(74,"BONK/USDT"),E(),D(75,"option",38),m(76,"WIF/USDT"),E(),D(77,"option",39),m(78,"AXS/USDT"),E(),D(79,"option",40),m(80,"SAND/USDT"),E(),D(81,"option",41),m(82,"MANA/USDT"),E(),D(83,"option",42),m(84,"ENJ/USDT"),E(),D(85,"option",43),m(86,"GALA/USDT"),E(),D(87,"option",44),m(88,"CHZ/USDT"),E(),D(89,"option",45),m(90,"FET/USDT"),E(),D(91,"option",46),m(92,"OCEAN/USDT"),E(),D(93,"option",47),m(94,"AGIX/USDT"),E(),D(95,"option",48),m(96,"RENDER/USDT"),E(),D(97,"option",49),m(98,"FIL/USDT"),E(),D(99,"option",50),m(100,"AR/USDT"),E(),D(101,"option",51),m(102,"STORJ/USDT"),E(),D(103,"option",52),m(104,"HBAR/USDT"),E(),D(105,"option",53),m(106,"VET/USDT"),E(),D(107,"option",54),m(108,"XLM/USDT"),E(),D(109,"option",55),m(110,"XMR/USDT"),E(),D(111,"option",56),m(112,"ZEC/USDT"),E(),D(113,"option",57),m(114,"DASH/USDT"),E(),D(115,"option",58),m(116,"CAKE/USDT"),E(),D(117,"option",59),m(118,"GMX/USDT"),E(),D(119,"option",60),m(120,"DYDX/USDT"),E(),D(121,"option",61),m(122,"INJ/USDT"),E(),D(123,"option",62),m(124,"THETA/USDT"),E(),D(125,"option",63),m(126,"ROSE/USDT"),E(),D(127,"option",64),m(128,"LDO/USDT"),E(),D(129,"option",65),m(130,"IMX/USDT"),E(),D(131,"option",66),m(132,"STX/USDT"),E(),D(133,"option",67),m(134,"TIA/USDT"),E(),D(135,"option",68),m(136,"ORDI/USDT"),E(),D(137,"option",69),m(138,"SEI/USDT"),E(),D(139,"option",70),m(140,"JUP/USDT"),E(),D(141,"option",71),m(142,"WBTC/USDT"),E(),D(143,"option",72),m(144,"STETH/USDT"),E(),D(145,"option",73),m(146,"LTC/USDT"),E(),D(147,"option",74),m(148,"BCH/USDT"),E(),D(149,"option",75),m(150,"ETC/USDT"),E(),D(151,"option",76),m(152,"TRX/USDT"),E(),D(153,"option",77),m(154,"EOS/USDT"),E(),D(155,"option",78),m(156,"WLD/USDT"),E(),D(157,"option",79),m(158,"ARKM/USDT"),E(),D(159,"option",80),m(160,"BLUR/USDT"),E(),D(161,"option",81),m(162,"MAGIC/USDT"),E(),D(163,"option",82),m(164,"PENDLE/USDT"),E(),D(165,"option",83),m(166,"RDNT/USDT"),E(),D(167,"option",84),m(168,"KAS/USDT"),E(),D(169,"option",85),m(170,"CFX/USDT"),E(),D(171,"option",86),m(172,"CORE/USDT"),E(),D(173,"option",87),m(174,"AGLD/USDT"),E()()()()),t&2&&(_(4),pe("active",i.currentState().autoCalculation),_(),T(" ",i.currentState().autoCalculation?"\u{1F504} Auto Calc":"\u23F8\uFE0F Manual"," "),_(3),ta("value",i.currentState().currentSymbol))},dependencies:[Me],encapsulation:2})};function z(n){var e=n.width,t=n.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(t<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:t}}function mt(n,e){return n.width===e.width&&n.height===e.height}var W_=(function(){function n(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return n.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(n.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(e){var t=this,i={next:e};return this._observers.push(i),{unsubscribe:function(){t._observers=t._observers.filter(function(r){return r!==i})}}},n.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},n.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},n.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},n.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},n})();function Nv(n){return new W_(n)}var Y_=(function(){function n(e,t,i){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=z({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=t??function(s){return s},this._allowResizeObserver=(r=i?.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return n.prototype.dispose=function(){var e,t;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(t=this._devicePixelRatioObservable)===null||t===void 0||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(n.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bitmapSize",{get:function(){return z({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),n.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=z(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},n.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(n.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),n.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},n.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},n.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},n.prototype._resizeBitmap=function(e){var t=this.bitmapSize;mt(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},n.prototype._emitBitmapSizeChanged=function(e,t){var i=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(i,e,t)})},n.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,i=z(this._transformBitmapSize(e,this._canvasElementClientSize)),r=mt(this.bitmapSize,i)?null:i;t===null&&r===null||t!==null&&r!==null&&mt(t,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(t,r))},n.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(i,e,t)})},n.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}q_().then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})},n.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var t=Av(this._canvasElement);if(t===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Nv(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},n.prototype._invalidateBitmapSize=function(){var e,t;if(this._canvasElement!==null){var i=Av(this._canvasElement);if(i!==null){var r=(t=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:i.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?Z_(s[0],r):z({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},n.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var i=t.find(function(o){return o.target===e._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var r=i.devicePixelContentBoxSize[0],s=z({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},n})();function Sd(n,e){if(e.type==="device-pixel-content-box")return new Y_(n,e.transform,e.options);throw new Error("Unsupported binding target")}function Av(n){return n.ownerDocument.defaultView}function q_(){return new Promise(function(n){var e=new ResizeObserver(function(t){n(t.every(function(i){return"devicePixelContentBoxSize"in i})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Z_(n,e){return z({width:Math.round(n.left*e+n.width*e)-Math.round(n.left*e),height:Math.round(n.top*e+n.height*e)-Math.round(n.top*e)})}var Rv=(function(){function n(e,t,i){if(t.width===0||t.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=e}return n.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},n.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(n.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),n})();function Mt(n,e){var t=n.canvasElementClientSize;if(t.width===0||t.height===0)return null;var i=n.bitmapSize;if(i.width===0||i.height===0)return null;var r=n.canvasElement.getContext("2d",e);return r===null?null:new Rv(r,t,i)}var yy={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},Pv,kv;function Ai(n,e){let t={0:[],1:[n.lineWidth,n.lineWidth],2:[2*n.lineWidth,2*n.lineWidth],3:[6*n.lineWidth,6*n.lineWidth],4:[n.lineWidth,4*n.lineWidth]}[e];n.setLineDash(t)}function Dy(n,e,t,i){n.beginPath();let r=n.lineWidth%2?.5:0;n.moveTo(t,e+r),n.lineTo(i,e+r),n.stroke()}function de(n,e){if(!n)throw new Error("Assertion failed"+(e?": "+e:""))}function Ie(n){if(n===void 0)throw new Error("Value is undefined");return n}function C(n){if(n===null)throw new Error("Value is null");return n}function Qt(n){return C(Ie(n))}(function(n){n[n.Simple=0]="Simple",n[n.WithSteps=1]="WithSteps",n[n.Curved=2]="Curved"})(Pv||(Pv={})),(function(n){n[n.Solid=0]="Solid",n[n.Dotted=1]="Dotted",n[n.Dashed=2]="Dashed",n[n.LargeDashed=3]="LargeDashed",n[n.SparseDotted=4]="SparseDotted"})(kv||(kv={}));var X=class{constructor(){this.t=[]}i(e,t,i){let r={h:e,l:t,o:i===!0};this.t.push(r)}_(e){let t=this.t.findIndex(i=>e===i.h);t>-1&&this.t.splice(t,1)}u(e){this.t=this.t.filter(t=>t.l!==e)}p(e,t,i){let r=[...this.t];this.t=this.t.filter(s=>!s.o),r.forEach(s=>s.h(e,t,i))}v(){return this.t.length>0}m(){this.t=[]}};function ke(n,...e){for(let t of e)for(let i in t)t[i]!==void 0&&Object.prototype.hasOwnProperty.call(t,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof t[i]!="object"||n[i]===void 0||Array.isArray(t[i])?n[i]=t[i]:ke(n[i],t[i]));return n}function Ri(n){return typeof n=="number"&&isFinite(n)}function Jr(n){return typeof n=="number"&&n%1==0}function is(n){return typeof n=="string"}function wa(n){return typeof n=="boolean"}function It(n){let e=n;if(!e||typeof e!="object")return e;let t,i,r;for(i in t=Array.isArray(e)?[]:{},e)e.hasOwnProperty(i)&&(r=e[i],t[i]=r&&typeof r=="object"?It(r):r);return t}function Q_(n){return n!==null}function es(n){return n===null?void 0:n}var Ey="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Na(n,e,t){return e===void 0&&(e=Ey),`${t=t!==void 0?`${t} `:""}${n}px ${e}`}var Hd=class{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=e}N(){let e=this.M,t=this.F(),i=this.W();return e.P===t&&e.T===i||(e.P=t,e.T=i,e.k=Na(t,i),e.A=2.5/12*t,e.V=e.A,e.I=t/12*e.C,e.B=t/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}};function Md(n){return n<0?0:n>255?255:Math.round(n)||0}function Ov(n){return .199*n[0]+.687*n[1]+.114*n[2]}var $d=class{constructor(e,t){this.q=new Map,this.Y=e,t&&(this.q=t)}j(e,t){if(e==="transparent")return e;let i=this.K(e),r=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${t*r})`}X(e){let t=this.K(e);return{Z:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,G:Ov(t)>160?"black":"white"}}J(e){return Ov(this.K(e))}tt(e,t,i){let[r,s,o,a]=this.K(e),[l,c,u,d]=this.K(t),h=[Md(r+i*(l-r)),Md(s+i*(c-s)),Md(o+i*(u-o)),(f=a+i*(d-a),f<=0||f>1?Math.min(Math.max(f,0),1):Math.round(1e4*f)/1e4)];var f;return`rgba(${h[0]}, ${h[1]}, ${h[2]}, ${h[3]})`}K(e){let t=this.q.get(e);if(t)return t;let i=(function(o){let a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;let l=window.getComputedStyle(a).color;return document.body.removeChild(a),l})(e),r=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(let o of this.Y){let a=o(e);if(a)return this.q.set(e,a),a}throw new Error(`Failed to parse color: ${e}`)}let s=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(e,s),s}},zd=class{constructor(){this.it=[]}st(e){this.it=e}nt(e,t,i){this.it.forEach(r=>{r.nt(e,t,i)})}},vt=class{nt(e,t,i){e.useBitmapCoordinateSpace(r=>this.et(r,t,i))}},Gd=class extends vt{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;let r=this.rt.lt,s=this.rt,o=Math.max(1,Math.floor(t))%2/2,a=l=>{e.beginPath();for(let c=r.to-1;c>=r.from;--c){let u=s.ot[c],d=Math.round(u._t*t)+o,h=u.ut*i,f=l*i+o;e.moveTo(d,h),e.arc(d,h,f,0,2*Math.PI)}e.fill()};s.ct>0&&(e.fillStyle=s.dt,a(s.ft+s.ct)),e.fillStyle=s.vt,a(s.ft)}};function X_(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}var K_={from:0,to:1},Wd=class{constructor(e,t,i){this.Mt=new zd,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=t,this.Pt=i,this.Mt.st(this.bt)}kt(e){this.yt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}yt(){let e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(X_),this.bt=this.St.map(t=>{let i=new Gd;return i.ht(t),i}),this.Mt.st(this.bt))}Rt(){let e=this.Ct.N().mode===2||!this.Ct.Vt(),t=this.Pt.It(),i=this.Ct.Bt(),r=this.O.Et();this.yt(),t.forEach((s,o)=>{let a=this.St[o],l=s.At(i),c=s.zt();!e&&l!==null&&s.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=s.Ft().Nt(l.gt,c.Wt),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/s.Ft().$t()),a.ot[0].wt=i,a.ot[0]._t=r.qt(i),a.lt=K_):a.lt=null})}},Yd=class extends vt{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null)return;let s=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!s&&!o)return;let a=Math.round(this.Yt._t*i),l=Math.round(this.Yt.ut*r);e.lineCap="butt",s&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*i),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Ai(e,this.Yt.jt.Xt),(function(c,u,d,h){c.beginPath();let f=c.lineWidth%2?.5:0;c.moveTo(u+f,d),c.lineTo(u+f,h),c.stroke()})(e,a,0,t.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*r),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,Ai(e,this.Yt.Kt.Xt),Dy(e,l,0,t.width))}},qd=class{constructor(e,t){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new Yd(this.Zt),this.Jt=e,this.Pt=t}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){let e=this.Jt.Vt(),t=this.Pt.Qt().N().crosshair,i=this.Zt;if(t.mode===2)return i.Kt.Vt=!1,void(i.jt.Vt=!1);i.Kt.Vt=e&&this.Jt.ti(this.Pt),i.jt.Vt=e&&this.Jt.ii(),i.Kt.ct=t.horzLine.width,i.Kt.Xt=t.horzLine.style,i.Kt.R=t.horzLine.color,i.jt.ct=t.vertLine.width,i.jt.Xt=t.vertLine.style,i.jt.R=t.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}};function J_(n,e,t,i,r,s){n.fillRect(e+s,t,i-2*s,s),n.fillRect(e+s,t+r-s,i-2*s,s),n.fillRect(e,t,s,r),n.fillRect(e+i-s,t,s,r)}function Xa(n,e,t,i,r,s){n.save(),n.globalCompositeOperation="copy",n.fillStyle=s,n.fillRect(e,t,i,r),n.restore()}function Fv(n,e,t,i,r,s){n.beginPath(),n.roundRect?n.roundRect(e,t,i,r,s):(n.lineTo(e+i-s[1],t),s[1]!==0&&n.arcTo(e+i,t,e+i,t+s[1],s[1]),n.lineTo(e+i,t+r-s[2]),s[2]!==0&&n.arcTo(e+i,t+r,e+i-s[2],t+r,s[2]),n.lineTo(e+s[3],t+r),s[3]!==0&&n.arcTo(e,t+r,e,t+r-s[3],s[3]),n.lineTo(e,t+s[0]),s[0]!==0&&n.arcTo(e,t,e+s[0],t,s[0]))}function Lv(n,e,t,i,r,s,o=0,a=[0,0,0,0],l=""){if(n.save(),!o||!l||l===s)return Fv(n,e,t,i,r,a),n.fillStyle=s,n.fill(),void n.restore();let c=o/2;var u;Fv(n,e+c,t+c,i-o,r-o,(u=-c,a.map(d=>d===0?d:d+u))),s!=="transparent"&&(n.fillStyle=s,n.fill()),l!=="transparent"&&(n.lineWidth=o,n.strokeStyle=l,n.closePath(),n.stroke()),n.restore()}function by(n,e,t,i,r,s,o){n.save(),n.globalCompositeOperation="copy";let a=n.createLinearGradient(0,0,0,r);a.addColorStop(0,s),a.addColorStop(1,o),n.fillStyle=a,n.fillRect(e,t,i,r),n.restore()}var Aa=class{constructor(e,t){this.ht(e,t)}ht(e,t){this.Yt=e,this.ei=t}$t(e,t){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,t,i,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;let s=this.Yt.R,o=this.ei.Z,a=e.useBitmapCoordinateSpace(l=>{let c=l.context;c.font=t.k;let u=this.hi(l,t,i,r),d=u.ai;return u.li?Lv(c,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):Lv(c,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(c.fillStyle=s,c.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(c.fillStyle=t.D,c.fillRect(u.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),u});e.useMediaCoordinateSpace(({context:l})=>{let c=a.xi;l.font=t.k,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=s,l.fillText(this.Yt.ri,c.Ci,(c._i+c.Si)/2+c.Pi)})}hi(e,t,i,r){let{context:s,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=e,u=this.Yt.pi||!this.Yt.ki?t.C:0,d=this.Yt.yi?t.S:0,h=t.A+this.ei.Ti,f=t.V+this.ei.Ri,p=t.I,g=t.B,v=this.Yt.ri,y=t.P,S=i.Di(s,v),R=Math.ceil(i.Vi(s,v)),x=y+h+f,G=t.S+p+g+R+u,Z=Math.max(1,Math.floor(c)),te=Math.round(x*c);te%2!=Z%2&&(te+=1);let ce=d>0?Math.max(1,Math.floor(d*l)):0,J=Math.round(G*l),Fe=Math.round(u*l),ji=this.ei.Ii??this.ei.Bi,rs=Math.round(ji*c)-Math.floor(.5*c),$n=Math.floor(rs+Z/2-te/2),ss=$n+te,zn=r==="right",Ui=zn?a.width-d:d,yt=zn?o.width-ce:ce,xt,Gn,os;return zn?(xt=yt-J,Gn=yt-Fe,os=Ui-u-p-d):(xt=yt+J,Gn=yt+Fe,os=Ui+u+p),{li:zn,ai:{_i:$n,mi:rs,Si:ss,ui:J,ci:te,ft:2*l,di:ce,oi:xt,fi:yt,wi:Gn,gi:Z,bi:o.width},xi:{_i:$n/c,Si:ss/c,Ci:os,Pi:S}}}},Pi=class{constructor(e){this.Ei={Bi:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,yi:!1},this.zi={ri:"",Vt:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,yi:!0},this.xt=!0,this.Li=new(e||Aa)(this.Ai,this.Ei),this.Oi=new(e||Aa)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Bi(){return this.Ni(),this.Ei.Bi}kt(){this.xt=!0}$t(e,t=!1){return Math.max(this.Li.$t(e,t),this.Oi.$t(e,t))}Fi(){return this.Ei.Ii||0}Wi(e){this.Ei.Ii=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}},Zd=class extends Pi{constructor(e,t,i){super(),this.Jt=e,this.Yi=t,this.ji=i}qi(e,t,i){if(e.Vt=!1,this.Jt.N().mode===2)return;let r=this.Jt.N().horzLine;if(!r.labelVisible)return;let s=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||s===null)return;let o=this.Yi.Xi().X(r.labelBackgroundColor);i.Z=o.Z,e.R=o.G;let a=2/12*this.Yi.P();i.Ti=a,i.Ri=a;let l=this.ji(this.Yi);i.Bi=l.Bi,e.ri=this.Yi.Zi(l.gt,s),e.Vt=!0}},eC=/[1-9]/g,Ra=class{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,t){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;let i=e.useMediaCoordinateSpace(({context:h})=>(h.font=t.k,Math.round(t.Gi.Vi(h,C(this.Yt).ri,eC))));if(i<=0)return;let r=t.Ji,s=i+2*r,o=s/2,a=this.Yt.Qi,l=this.Yt.Bi,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+s>a&&(l-=Math.abs(a-(c+s)),c=Math.floor(l-o)+.5);let u=c+s,d=Math.ceil(0+t.S+t.C+t.A+t.P+t.V);e.useBitmapCoordinateSpace(({context:h,horizontalPixelRatio:f,verticalPixelRatio:p})=>{let g=C(this.Yt);h.fillStyle=g.Z;let v=Math.round(c*f),y=Math.round(0*p),S=Math.round(u*f),R=Math.round(d*p),x=Math.round(2*f);if(h.beginPath(),h.moveTo(v,y),h.lineTo(v,R-x),h.arcTo(v,R,v+x,R,x),h.lineTo(S-x,R),h.arcTo(S,R,S,R-x,x),h.lineTo(S,y),h.fill(),g.pi){let G=Math.round(g.Bi*f),Z=y,te=Math.round((Z+t.C)*p);h.fillStyle=g.R;let ce=Math.max(1,Math.floor(f)),J=Math.floor(.5*f);h.fillRect(G-J,Z,ce,te-Z)}}),e.useMediaCoordinateSpace(({context:h})=>{let f=C(this.Yt),p=0+t.S+t.C+t.A+t.P/2;h.font=t.k,h.textAlign="left",h.textBaseline="middle",h.fillStyle=f.R;let g=t.Gi.Di(h,"Apr0");h.translate(c+r,p+g),h.fillText(f.ri,0,0)})}},Qd=class{constructor(e,t,i){this.xt=!0,this.Gt=new Ra,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=e,this.ts=t,this.ji=i}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){let e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;let t=this.Ct.N().vertLine;if(!t.labelVisible)return;let i=this.ts.Et();if(i.Ki())return;e.Qi=i.Qi();let r=this.ji();if(r===null)return;e.Bi=r.Bi;let s=i.ss(this.Ct.Bt());e.ri=i.ns(C(s)),e.Vt=!0;let o=this.ts.Xi().X(t.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=i.N().ticksVisible}},Pa=class{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}},Vv;(function(n){n[n.Normal=0]="Normal",n[n.Magnet=1]="Magnet",n[n.Hidden=2]="Hidden",n[n.MagnetOHLC=3]="MagnetOHLC"})(Vv||(Vv={}));var Xd=class extends Pa{constructor(e,t){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=t,this.ks=((r,s)=>o=>{let a=s(),l=r();if(o===C(this.Pt).ys())return{gt:l,Bi:a};{let c=C(o.zt());return{gt:o.Ts(a,c),Bi:a}}})(()=>this.ds,()=>this.Ss);let i=((r,s)=>()=>{let o=this.ts.Et().Rs(r()),a=s();return o&&Number.isFinite(a)?{wt:o,Bi:a}:null})(()=>this.fs,()=>this.si());this.Ds=new Qd(this,e,i)}N(){return this.Ps}Vs(e,t){this.xs=e,this.Cs=t}Is(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}Es(){return this.Cs}As(e,t,i){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,t,i)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Is(),this.Ns()}Fs(e){let t=this.gs.get(e);t||(t=new qd(this,e),this.gs.set(e,t));let i=this.Ms.get(e);return i||(i=new Wd(this.ts,this,e),this.Ms.set(e,i)),[t,i]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,t){this.ps&&this.Pt===e||this.vs.clear();let i=[];return this.Pt===e&&i.push(this.Hs(this.vs,t,this.ks)),i}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{this.gs.get(e)?.kt(),this.Ms.get(e)?.kt()}),this.vs.forEach(e=>e.kt()),this.Ds.kt()}qs(e){return e&&!e.ys().Ki()?e.ys():null}zs(e,t,i){this.Ys(e,t,i)&&this.Ns()}Ys(e,t,i){let r=this.bs,s=this.Ss,o=this.ds,a=this.fs,l=this.Pt,c=this.qs(i);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=i;let u=c!==null?c.zt():null;return c!==null&&u!==null?(this.ds=t,this.Ss=c.Nt(t,u)):(this.ds=NaN,this.Ss=NaN),r!==this.bs||s!==this.Ss||a!==this.fs||o!==this.ds||l!==this.Pt}Os(){let e=this.ts.js().map(i=>i.Xs().Ks()).filter(Q_),t=e.length===0?null:Math.max(...e);this.fs=t!==null?t:NaN}Hs(e,t,i){let r=e.get(t);return r===void 0&&(r=new Zd(this,t,i),e.set(t,r)),r}};function Ka(n){return n==="left"||n==="right"}var ge=class n{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,t){let i=(function(r,s){return r===void 0?s:{tn:Math.max(r.tn,s.tn),sn:r.sn||s.sn}})(this.Zs.get(e),t);this.Zs.set(e,i)}nn(){return this.Js}en(e){let t=this.Zs.get(e);return t===void 0?{tn:this.Js}:{tn:Math.max(this.Js,t.tn),sn:t.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(let t of e.Gs)this.mn(t);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((t,i)=>{this.Qs(i,t)})}static wn(){return new n(2)}static gn(){return new n(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){let e=this.Gs.findIndex(t=>t.an===5);e!==-1&&this.Gs.splice(e,1)}},ka=class{formatTickmarks(e){return e.map(t=>this.format(t))}},Bv=".";function Tt(n,e){if(!Ri(n))return"n/a";if(!Jr(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?n.toString():("0000000000000000"+n.toString()).slice(-e)}var ki=class extends ka{constructor(e,t){if(super(),t||(t=1),Ri(e)&&Jr(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=t,this.bn()}format(e){let t=e<0?"\u2212":"";return e=Math.abs(e),t+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){let t=this.Yi/this.Mn,i=Math.floor(e),r="",s=this.xn!==void 0?this.xn:NaN;if(t>1){let o=+(Math.round(e*t)-i*t).toFixed(this.xn);o>=t&&(o-=t,i+=1),r=Bv+Tt(+o.toFixed(this.xn)*this.Mn,s)}else i=Math.round(i*t)/t,s>0&&(r=Bv+Tt(0,s));return i.toFixed(0)+r}},Oa=class extends ki{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}},Kd=class extends ka{constructor(e){super(),this.Cn=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.Pn(e):e<999995?t+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.Pn(e/1e9)+"B")}Pn(e){let t,i=Math.pow(10,this.Cn);return t=(e=Math.round(e*i)/i)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,(r,s)=>s)}},tC=/[2-9]/g,Oi=class{constructor(e=50){this.kn=0,this.yn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}In(){this.kn=0,this.Dn.clear(),this.yn=1,this.Tn=1,this.Rn={}}Vi(e,t,i){return this.Bn(e,t,i).width}Di(e,t,i){let r=this.Bn(e,t,i);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}Bn(e,t,i){let r=i||tC,s=String(t).replace(r,"0");if(this.Dn.has(s))return Ie(this.Dn.get(s)).En;if(this.kn===this.Vn){let a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.kn--}e.save(),e.textBaseline="middle";let o=e.measureText(s);return e.restore(),o.width===0&&t.length||(this.Dn.set(s,{En:o,An:this.yn}),this.Rn[this.yn]=s,this.kn++,this.yn++),o}},Jd=class{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,t,i){this.zn=e,this.M=t,this.Ln=i}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}},Fa=class{constructor(e,t,i){this.Fn=e,this.On=new Oi(50),this.Wn=t,this.O=i,this.F=-1,this.Gt=new Jd(this.On)}Tt(){let e=this.O.Hn(this.Wn);if(e===null)return null;let t=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(t===null)return null;let i=e.qn(t);if(i==="overlay")return null;let r=this.O.Yn();return r.P!==this.F&&(this.F=r.P,this.On.In()),this.Gt.Nn(this.Fn.$i(),r,i),this.Gt}},eh=class extends vt{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,t){if(!this.Yt?.Vt)return null;let{ut:i,ct:r,Kn:s}=this.Yt;return t>=i-r-7&&t<=i+r+7?{Xn:this.Yt,Kn:s}:null}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;let s=Math.round(this.Yt.ut*r);s<0||s>t.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*i),Ai(e,this.Yt.Xt),Dy(e,s,0,t.width))}},ts=class{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new eh,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}kt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}},th=class extends ts{constructor(e){super(e)}te(){this.Zn.Vt=!1;let e=this.Jn.Ft(),t=e.ie().ie;if(t!==2&&t!==3)return;let i=this.Jn.N();if(!i.baseLineVisible||!this.Jn.Vt())return;let r=this.Jn.zt();r!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(r.Wt,r.Wt),this.Zn.R=i.baseLineColor,this.Zn.ct=i.baseLineWidth,this.Zn.Xt=i.baseLineStyle)}},nh=class extends vt{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){let r=this.Yt;if(r===null)return;let s=Math.max(1,Math.floor(t)),o=s%2/2,a=Math.round(r.ne.x*t)+o,l=r.ne.y*i;e.fillStyle=r.ee,e.beginPath();let c=Math.max(2,1.5*r.re)*t;e.arc(a,l,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.he,e.beginPath(),e.arc(a,l,r.ft*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=s,e.strokeStyle=r.ae,e.beginPath(),e.arc(a,l,r.ft*t+s/2,0,2*Math.PI,!1),e.stroke()}},nC=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}],ih=class{constructor(e){this.Gt=new nh,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.kt()}be(){if(this.kt(),this.ge.N().lastPriceAnimation===2){let e=performance.now(),t=this.we-e;if(t>0)return void(t<650&&(this.we+=2600));this.me=e,this.we=e+2600}}kt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);let e=this.ge.Qt().Et(),t=e.Pe(),i=this.ge.zt();if(t===null||i===null)return;let r=this.ge.ke(!0);if(r.ye||!t.Te(r.Re))return;let s={x:e.qt(r.Re),y:this.ge.Ft().Nt(r.gt,i.Wt)},o=r.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:s})}Ce(){let e=this.Gt.se();if(e!==null){let t=this.De(this.Ve(),e.ee);e.he=t.he,e.ae=t.ae,e.ft=t.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Ie(e,t,i,r){let s=i+(r-i)*t;return this.ge.Qt().Xi().j(e,s)}De(e,t){let i=e%2600/2600,r;for(let c of nC)if(i>=c.le&&i<=c.oe){r=c;break}de(r!==void 0,"Last price animation internal logic error");let s=(i-r.le)/(r.oe-r.le);return{he:this.Ie(t,s,r.ce,r.de),ae:this.Ie(t,s,r.fe,r.pe),ft:(o=s,a=r._e,l=r.ue,a+(l-a)*o)};var o,a,l}},rh=class extends ts{constructor(e){super(e)}te(){let e=this.Zn;e.Vt=!1;let t=this.Jn.N();if(!t.priceLineVisible||!this.Jn.Vt())return;let i=this.Jn.ke(t.priceLineSource===0);i.ye||(e.Vt=!0,e.ut=i.Bi,e.R=this.Jn.Be(i.R),e.ct=t.priceLineWidth,e.Xt=t.priceLineStyle)}},sh=class extends Pi{constructor(e){super(),this.Jt=e}qi(e,t,i){e.Vt=!1,t.Vt=!1;let r=this.Jt;if(!r.Vt())return;let s=r.N(),o=s.lastValueVisible,a=r.Ee()!=="",l=s.seriesLastValueMode===0,c=r.ke(!1);if(c.ye)return;o&&(e.ri=this.Ae(c,o,l),e.Vt=e.ri.length!==0),(a||l)&&(t.ri=this.ze(c,o,a,l),t.Vt=t.ri.length>0);let u=r.Be(c.R),d=this.Jt.Qt().Xi().X(u);i.Z=d.Z,i.Bi=c.Bi,t.Ht=r.Qt().Ut(c.Bi/r.Ft().$t()),e.Ht=u,e.R=d.G,t.R=d.G}ze(e,t,i,r){let s="",o=this.Jt.Ee();return i&&o.length!==0&&(s+=`${o} `),t&&r&&(s+=this.Jt.Ft().Le()?e.Oe:e.Ne),s.trim()}Ae(e,t,i){return t?i?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}};function jv(n,e,t,i){let r=Number.isFinite(e),s=Number.isFinite(t);return r&&s?n(e,t):r||s?r?e:t:i}var Oe=class n{constructor(e,t){this.Fe=e,this.We=t}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new n(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new n(jv(Math.min,this.$e(),e.$e(),-1/0),jv(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!Ri(e)||this.We-this.Fe===0)return;let t=.5*(this.We+this.Fe),i=this.We-t,r=this.Fe-t;i*=e,r*=e,this.We=t+i,this.Fe=t+r}Ke(e){Ri(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new n(e.minValue,e.maxValue)}},La=class n{constructor(e,t){this.Ge=e,this.Je=t||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new n(Oe.Ze(e.priceRange),e.margins)}},oh=class extends ts{constructor(e,t){super(e),this.ir=t}te(){let e=this.Zn;e.Vt=!1;let t=this.ir.N();if(!this.Jn.Vt()||!t.lineVisible)return;let i=this.ir.sr();i!==null&&(e.Vt=!0,e.ut=i,e.R=t.color,e.ct=t.lineWidth,e.Xt=t.lineStyle,e.Kn=this.ir.N().id)}},ah=class extends Pi{constructor(e,t){super(),this.ge=e,this.ir=t}qi(e,t,i){e.Vt=!1,t.Vt=!1;let r=this.ir.N(),s=r.axisLabelVisible,o=r.title!=="",a=this.ge;if(!s||!a.Vt())return;let l=this.ir.sr();if(l===null)return;o&&(t.ri=r.title,t.Vt=!0),t.Ht=a.Qt().Ut(l/a.Ft().$t()),e.ri=this.nr(r.price),e.Vt=!0;let c=this.ge.Qt().Xi().X(r.axisLabelColor||r.color);i.Z=c.Z;let u=r.axisLabelTextColor||c.G;e.R=u,t.R=u,i.Bi=l}nr(e){let t=this.ge.zt();return t===null?"":this.ge.Ft().Zi(e,t.Wt)}},lh=class{constructor(e,t){this.ge=e,this.Ps=t,this.er=new oh(e,this),this.Fn=new ah(e,this),this.rr=new Fa(this.Fn,e,e.Qt())}hr(e){ke(this.Ps,e),this.kt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}kt(){this.er.kt(),this.Fn.kt()}sr(){let e=this.ge,t=e.Ft();if(e.Qt().Et().Ki()||t.Ki())return null;let i=e.zt();return i===null?null:t.Nt(this.Ps.price,i.Wt)}},ch=class extends Pa{constructor(e){super(),this.ts=e}Qt(){return this.ts}},iC={Bar:(n,e,t,i)=>{let r=e.upColor,s=e.downColor,o=C(n(t,i)),a=Qt(o.Wt[0])<=Qt(o.Wt[3]);return{cr:o.R??(a?r:s)}},Candlestick:(n,e,t,i)=>{let r=e.upColor,s=e.downColor,o=e.borderUpColor,a=e.borderDownColor,l=e.wickUpColor,c=e.wickDownColor,u=C(n(t,i)),d=Qt(u.Wt[0])<=Qt(u.Wt[3]);return{cr:u.R??(d?r:s),dr:u.Ht??(d?o:a),pr:u.vr??(d?l:c)}},Custom:(n,e,t,i)=>({cr:C(n(t,i)).R??e.color}),Area:(n,e,t,i)=>{let r=C(n(t,i));return{cr:r.vt??e.lineColor,vt:r.vt??e.lineColor,mr:r.mr??e.topColor,wr:r.wr??e.bottomColor}},Baseline:(n,e,t,i)=>{let r=C(n(t,i));return{cr:r.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:r.gr??e.topLineColor,Mr:r.Mr??e.bottomLineColor,br:r.br??e.topFillColor1,Sr:r.Sr??e.topFillColor2,Cr:r.Cr??e.bottomFillColor1,Pr:r.Pr??e.bottomFillColor2}},Line:(n,e,t,i)=>{let r=C(n(t,i));return{cr:r.R??e.color,vt:r.R??e.color}},Histogram:(n,e,t,i)=>({cr:C(n(t,i)).R??e.color})},uh=class{constructor(e){this.kr=(t,i)=>i!==void 0?i.Wt:this.ge.Xs().yr(t),this.ge=e,this.Tr=iC[e.Rr()]}Dr(e,t){return this.Tr(this.kr,this.ge.N(),e,t)}};function wy(n,e,t,i,r=0,s=e.length){let o=s-r;for(;0<o;){let a=o>>1,l=r+a;i(e[l],t)===n?(r=l+1,o-=a+1):o=a}return r}var Fi=wy.bind(null,!0),_y=wy.bind(null,!1),Uv;(function(n){n[n.NearestLeft=-1]="NearestLeft",n[n.None=0]="None",n[n.NearestRight=1]="NearestRight"})(Uv||(Uv={}));var Zt=30,dh=class{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}yr(e){return this.Fr(e)}Fr(e,t=0){let i=this.Nr(e,t);return i===null?null:P(I({},this.Wr(i)),{Re:this.Or(i)})}Hr(){return this.Vr}Ur(e,t,i){if(this.Ki())return null;let r=null;for(let s of i)r=_a(r,this.$r(e,t,s));return r}ht(e){this.Br.clear(),this.Ir.clear(),this.Vr=e,this.Er=e.map(t=>t.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,t){let i=this.Yr(e);if(i===null&&t!==0)switch(t){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return i}jr(e){let t=this.Xr(e);return t>0&&(t-=1),t!==this.Vr.length&&this.Or(t)<e?t:null}Kr(e){let t=this.Zr(e);return t!==this.Vr.length&&e<this.Or(t)?t:null}Yr(e){let t=this.Xr(e);return t===this.Vr.length||e<this.Vr[t].Re?null:t}Xr(e){return Fi(this.Vr,e,(t,i)=>t.Re<i)}Zr(e){return _y(this.Vr,e,(t,i)=>t.Re>i)}Gr(e,t,i){let r=null;for(let s=e;s<t;s++){let o=this.Vr[s].Wt[i];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(e,t,i){if(this.Ki())return null;let r=null,s=C(this.Lr()),o=C(this.Ks()),a=Math.max(e,s),l=Math.min(t,o),c=Math.ceil(a/Zt)*Zt,u=Math.max(c,Math.floor(l/Zt)*Zt);{let h=this.Xr(a),f=this.Zr(Math.min(l,c,t));r=_a(r,this.Gr(h,f,i))}let d=this.Ir.get(i);d===void 0&&(d=new Map,this.Ir.set(i,d));for(let h=Math.max(c+1,a);h<u;h+=Zt){let f=Math.floor(h/Zt),p=d.get(f);if(p===void 0){let g=this.Xr(f*Zt),v=this.Zr((f+1)*Zt-1);p=this.Gr(g,v,i),d.set(f,p)}r=_a(r,p)}{let h=this.Xr(u),f=this.Zr(l);r=_a(r,this.Gr(h,f,i))}return r}};function _a(n,e){return n===null?e:e===null?n:{Jr:Math.min(n.Jr,e.Jr),Qr:Math.max(n.Qr,e.Qr)}}var hh=class{constructor(e){this.th=e}nt(e,t,i){this.th.draw(e)}ih(e,t,i){this.th.drawBackground?.(e)}},fh=class{constructor(e){this.Dn=null,this.sh=e}Tt(){let e=this.sh.renderer();if(e===null)return null;if(this.Dn?.nh===e)return this.Dn.eh;let t=new hh(e);return this.Dn={nh:e,eh:t},t}rh(){return this.sh.zOrder?.()??"normal"}},Va=class{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){this.ah.updateAllViews?.()}Fs(){let e=this.ah.paneViews?.()??[];if(this.hh?.nh===e)return this.hh.eh;let t=e.map(i=>new fh(i));return this.hh={nh:e,eh:t},t}jn(e,t){return this.ah.hitTest?.(e,t)??null}},rC=class extends Va{us(){return[]}},ph=class{constructor(e){this.th=e}nt(e,t,i){this.th.draw(e)}ih(e,t,i){this.th.drawBackground?.(e)}},Ba=class{constructor(e){this.Dn=null,this.sh=e}Tt(){let e=this.sh.renderer();if(e===null)return null;if(this.Dn?.nh===e)return this.Dn.eh;let t=new ph(e);return this.Dn={nh:e,eh:t},t}rh(){return this.sh.zOrder?.()??"normal"}};function Cy(n){return{ri:n.text(),Bi:n.coordinate(),Ii:n.fixedCoordinate?.(),R:n.textColor(),Z:n.backColor(),Vt:n.visible?.()??!0,pi:n.tickVisible?.()??!0}}var mh=class{constructor(e,t){this.Gt=new Ra,this._h=e,this.uh=t}Tt(){return this.Gt.ht(I({Qi:this.uh.Qi()},Cy(this._h))),this.Gt}},gh=class extends Pi{constructor(e,t){super(),this._h=e,this.Yi=t}qi(e,t,i){let r=Cy(this._h);i.Z=r.Z,e.R=r.R;let s=2/12*this.Yi.P();i.Ti=s,i.Ri=s,i.Bi=r.Bi,i.Ii=r.Ii,e.ri=r.ri,e.Vt=r.Vt,e.pi=r.pi}},vh=class extends Va{constructor(e,t){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=t}cs(){let e=this.ah.timeAxisViews?.()??[];if(this.dh?.nh===e)return this.dh.eh;let t=this.ge.Qt().Et(),i=e.map(r=>new mh(r,t));return this.dh={nh:e,eh:i},i}Ws(){let e=this.ah.priceAxisViews?.()??[];if(this.fh?.nh===e)return this.fh.eh;let t=this.ge.Ft(),i=e.map(r=>new gh(r,t));return this.fh={nh:e,eh:i},i}wh(){let e=this.ah.priceAxisPaneViews?.()??[];if(this.ph?.nh===e)return this.ph.eh;let t=e.map(i=>new Ba(i));return this.ph={nh:e,eh:t},t}gh(){let e=this.ah.timeAxisPaneViews?.()??[];if(this.mh?.nh===e)return this.mh.eh;let t=e.map(i=>new Ba(i));return this.mh={nh:e,eh:t},t}Mh(e,t){return this.ah.autoscaleInfo?.(e,t)??null}};function Id(n,e,t,i){n.forEach(r=>{e(r).forEach(s=>{s.rh()===t&&i.push(s)})})}function Td(n){return n.Fs()}function sC(n){return n.wh()}function oC(n){return n.gh()}var aC=["Area","Line","Baseline"],Li=class extends ch{constructor(e,t,i,r,s){super(e),this.Yt=new dh,this.er=new rh(this),this.bh=[],this.Sh=new th(this),this.xh=null,this.Ch=null,this.Ph=null,this.kh=[],this.Ps=i,this.yh=t;let o=new sh(this);this.vs=[o],this.rr=new Fa(o,this,e),aC.includes(this.yh)&&(this.xh=new ih(this)),this.Th(),this.sh=r(this,this.Qt(),s)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Be(e){return this.Ps.priceLineColor||e}ke(e){let t={ye:!0},i=this.Ft();if(this.Qt().Et().Ki()||i.Ki()||this.Yt.Ki())return t;let r=this.Qt().Et().Pe(),s=this.zt();if(r===null||s===null)return t;let o,a;if(e){let d=this.Yt.Ar();if(d===null)return t;o=d,a=d.Re}else{let d=this.Yt.Fr(r.bi(),-1);if(d===null||(o=this.Yt.yr(d.Re),o===null))return t;a=d.Re}let l=o.Wt[3],c=this.Rh().Dr(a,{Wt:o}),u=i.Nt(l,s.Wt);return{ye:!1,gt:l,ri:i.Zi(l,s.Wt),Oe:i.Dh(l),Ne:i.Vh(l,s.Wt),R:c.cr,Bi:u,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new uh(this)),this.Ch}N(){return this.Ps}hr(e){let t=e.priceScaleId;t!==void 0&&t!==this.Ps.priceScaleId&&this.Qt().Ih(this,t),ke(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.kt("options")}ht(e,t){this.Yt.ht(e),this.sh.kt("data"),this.xh!==null&&(t&&t.zh?this.xh.be():e.length===0&&this.xh.Me());let i=this.Qt().Hn(this);this.Qt().Lh(i),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){let t=new lh(this,e);return this.bh.push(t),this.Qt().Eh(this),t}Nh(e){let t=this.bh.indexOf(e);t!==-1&&this.bh.splice(t,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.yh}zt(){let e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){let e=this.Qt().Et().Pe();if(e===null)return null;let t=e.Uh();return this.Yt.Fr(t,1)}Xs(){return this.Yt}$h(e){let t=this.Yt.yr(e);return t===null?null:this.yh==="Bar"||this.yh==="Candlestick"||this.yh==="Custom"?{qh:t.Wt[0],Yh:t.Wt[1],jh:t.Wt[2],Kh:t.Wt[3]}:t.Wt[3]}Xh(e){let t=[];Id(this.kh,Td,"top",t);let i=this.xh;return i!==null&&i.Vt()&&(this.Ph===null&&i.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),i.Se(),t.unshift(i)),t}Fs(){let e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);let t=this.bh.map(i=>i.lr());return e.push(...t),Id(this.kh,Td,"normal",e),e}Jh(){return this.Qh(Td,"bottom")}ta(e){return this.Qh(sC,e)}ia(e){return this.Qh(oC,e)}sa(e,t){return this.kh.map(i=>i.jn(e,t)).filter(i=>i!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,t){if(t!==this.es&&!this.Gh())return[];let i=[...this.vs];for(let r of this.bh)i.push(r.ur());return this.kh.forEach(r=>{i.push(...r.Ws())}),i}cs(){let e=[];return this.kh.forEach(t=>{e.push(...t.cs())}),e}Mh(e,t){if(this.Ps.autoscaleInfoProvider!==void 0){let i=this.Ps.autoscaleInfoProvider(()=>{let r=this.na(e,t);return r===null?null:r.Xe()});return La.Ze(i)}return this.na(e,t)}ea(){return this.Ps.priceFormat.minMove}ra(){return this.ha}Ns(){this.sh.kt();for(let e of this.vs)e.kt();for(let e of this.bh)e.kt();this.er.kt(),this.Sh.kt(),this.xh?.kt(),this.kh.forEach(e=>e.Ns())}Ft(){return C(super.Ft())}At(e){if(!((this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;let t=this.Yt.yr(e);return t===null?null:{gt:t.Wt[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}ua(e){this.kh.push(new vh(e,this))}ca(e){this.kh=this.kh.filter(t=>t.oh()!==e)}da(){if(this.yh==="Custom")return e=>this.sh.fa(e)}pa(){if(this.yh==="Custom")return e=>this.sh.va(e)}ma(){return this.Yt.qr()}Gh(){return!Ka(this.Ft().wa())}na(e,t){if(!Jr(e)||!Jr(t)||this.Yt.Ki())return null;let i=this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline"||this.yh==="Histogram"?[3]:[2,1],r=this.Yt.Ur(e,t,i),s=r!==null?new Oe(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){let a=this.Ps.base,l=new Oe(a,a);s=s!==null?s.vn(l):l}return this.kh.forEach(a=>{let l=a.Mh(e,t);if(l?.priceRange){let c=new Oe(l.priceRange.minValue,l.priceRange.maxValue);s=s!==null?s.vn(c):c}l?.margins&&(o=l.margins)}),new La(s,o)}aa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}la(){switch(this.yh){case"Line":case"Area":case"Baseline":{let e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}oa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}_a(e){switch(this.yh){case"Line":case"Area":case"Baseline":{let t=this.Ps.crosshairMarkerBackgroundColor;if(t.length!==0)return t}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{let e=this.Ps.priceFormat.formatter;this.ha={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(t=>t.map(e))};break}case"volume":this.ha=new Kd(this.Ps.priceFormat.precision);break;case"percent":this.ha=new Oa(this.Ps.priceFormat.precision);break;default:{let e=Math.pow(10,this.Ps.priceFormat.precision);this.ha=new ki(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.ga()}Qh(e,t){let i=[];return Id(this.kh,e,t,i),i}},lC=[3],cC=[0,1,2,3],yh=class{constructor(e){this.Ps=e}Ma(e,t,i){let r=e;if(this.Ps.mode===0)return r;let s=i.ys(),o=s.zt();if(o===null)return r;let a=s.Nt(e,o),l=i.ba().filter(u=>u instanceof Li).reduce((u,d)=>{if(i.Un(d)||!d.Vt())return u;let h=d.Ft(),f=d.Xs();if(h.Ki()||!f.Te(t))return u;let p=f.yr(t);if(p===null)return u;let g=Qt(d.zt()),v=this.Ps.mode===3?cC:lC;return u.concat(v.map(y=>h.Nt(p.Wt[y],g.Wt)))},[]);if(l.length===0)return r;l.sort((u,d)=>Math.abs(u-a)-Math.abs(d-a));let c=l[0];return r=s.Ts(c,o),r}};function Zr(n,e,t){return Math.min(Math.max(n,e),t)}function Ca(n,e,t){return e-n<=t}var Dh=class extends vt{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(this.Yt===null)return;let s=Math.max(1,Math.floor(i));e.lineWidth=s,(function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()})(e,()=>{let o=C(this.Yt);if(o.Sa){e.strokeStyle=o.xa,Ai(e,o.Ca),e.beginPath();for(let a of o.Pa){let l=Math.round(a.ka*i);e.moveTo(l,-s),e.lineTo(l,t.height+s)}e.stroke()}if(o.ya){e.strokeStyle=o.Ta,Ai(e,o.Ra),e.beginPath();for(let a of o.Da){let l=Math.round(a.ka*r);e.moveTo(-s,l),e.lineTo(t.width+s,l)}e.stroke()}})}},Eh=class{constructor(e){this.Gt=new Dh,this.xt=!0,this.Pt=e}kt(){this.xt=!0}Tt(){if(this.xt){let e=this.Pt.Qt().N().grid,t={ya:e.horzLines.visible,Sa:e.vertLines.visible,Ta:e.horzLines.color,xa:e.vertLines.color,Ra:e.horzLines.style,Ca:e.vertLines.style,Da:this.Pt.ys().Va(),Pa:(this.Pt.Qt().Et().Va()||[]).map(i=>({ka:i.coord}))};this.Gt.ht(t),this.xt=!1}return this.Gt}},bh=class{constructor(e){this.sh=new Eh(e)}lr(){return this.sh}},xd={Ia:4,Ba:1e-4};function xi(n,e){let t=100*(n-e)/e;return e<0?-t:t}function uC(n,e){let t=xi(n.$e(),e),i=xi(n.qe(),e);return new Oe(t,i)}function Qr(n,e){let t=100*(n-e)/e+100;return e<0?-t:t}function dC(n,e){let t=Qr(n.$e(),e),i=Qr(n.qe(),e);return new Oe(t,i)}function ja(n,e){let t=Math.abs(n);if(t<1e-15)return 0;let i=Math.log10(t+e.Ba)+e.Ia;return n<0?-i:i}function Xr(n,e){let t=Math.abs(n);if(t<1e-15)return 0;let i=Math.pow(10,t-e.Ia)-e.Ba;return n<0?-i:i}function Wr(n,e){if(n===null)return null;let t=ja(n.$e(),e),i=ja(n.qe(),e);return new Oe(t,i)}function qr(n,e){if(n===null)return null;let t=Xr(n.$e(),e),i=Xr(n.qe(),e);return new Oe(t,i)}function Nd(n){if(n===null)return xd;let e=Math.abs(n.qe()-n.$e());if(e>=1||e<1e-15)return xd;let t=Math.ceil(Math.abs(Math.log10(e))),i=xd.Ia+t;return{Ia:i,Ba:1/Math.pow(10,i)}}var Kr=class{constructor(e,t){if(this.Ea=e,this.Aa=t,(function(i){if(i<0)return!1;for(let r=i;r>1;r/=10)if(r%10!=0)return!1;return!0})(this.Ea))this.za=[2,2.5,2];else{this.za=[];for(let i=this.Ea;i!==1;){if(i%2==0)this.za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),i/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(e,t,i){let r=this.Ea===0?0:1/this.Ea,s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),o=0,a=this.Aa[0];for(;;){let d=Ca(s,r,1e-14)&&s>r+1e-14,h=Ca(s,i*a,1e-14),f=Ca(s,1,1e-14);if(!(d&&h&&f))break;s/=a,a=this.Aa[++o%this.Aa.length]}if(s<=r+1e-14&&(s=r),s=Math.max(1,s),this.za.length>0&&(l=s,c=1,u=1e-14,Math.abs(l-c)<u))for(o=0,a=this.za[0];Ca(s,i*a,1e-14)&&s>r+1e-14;)s/=a,a=this.za[++o%this.za.length];var l,c,u;return s}},Ua=class{constructor(e,t,i,r){this.Oa=[],this.Yi=e,this.Ea=t,this.Na=i,this.Fa=r}La(e,t){if(e<t)throw new Error("high < low");let i=this.Yi.$t(),r=(e-t)*this.Wa()/i,s=new Kr(this.Ea,[2,2.5,2]),o=new Kr(this.Ea,[2,2,2.5]),a=new Kr(this.Ea,[2.5,2,2]),l=[];return l.push(s.La(e,t,r),o.La(e,t,r),a.La(e,t,r)),(function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let d=1;d<c.length;++d)c[d]<u&&(u=c[d]);return u})(l)}Ha(){let e=this.Yi,t=e.zt();if(t===null)return void(this.Oa=[]);let i=e.$t(),r=this.Na(i-1,t),s=this.Na(0,t),o=this.Yi.N().entireTextOnly?this.Ua()/2:0,a=o,l=i-1-o,c=Math.max(r,s),u=Math.min(r,s);if(c===u)return void(this.Oa=[]);let d=this.La(c,u);if(this.$a(t,d,c,u,a,l),e.qa()&&this.Ya(d,u,c)){let p=this.Yi.ja();this.Ka(t,d,a,l,p,2*p)}let h=this.Oa.map(p=>p.Xa),f=this.Yi.Za(h);for(let p=0;p<this.Oa.length;p++)this.Oa[p].Ga=f[p]}Va(){return this.Oa}Ua(){return this.Yi.P()}Wa(){return Math.ceil(2.5*this.Ua())}$a(e,t,i,r,s,o){let a=this.Oa,l=this.Yi,c=i%t;c+=c<0?t:0;let u=i>=r?1:-1,d=null,h=0;for(let f=i-c;f>r;f-=t){let p=this.Fa(f,e,!0);d!==null&&Math.abs(p-d)<this.Wa()||p<s||p>o||(h<a.length?(a[h].ka=p,a[h].Ga=l.Ja(f),a[h].Xa=f):a.push({ka:p,Ga:l.Ja(f),Xa:f}),h++,d=p,l.Qa()&&(t=this.La(f*u,r)))}a.length=h}Ka(e,t,i,r,s,o){let a=this.Oa,l=this.tl(e,i,s,o),c=this.tl(e,r,-o,-s),u=this.Fa(0,e,!0)-this.Fa(t,e,!0);a.length>0&&a[0].ka-l.ka<u/2&&a.shift(),a.length>0&&c.ka-a[a.length-1].ka<u/2&&a.pop(),a.unshift(l),a.push(c)}tl(e,t,i,r){let s=(i+r)/2,o=this.Na(t+i,e),a=this.Na(t+r,e),l=Math.min(o,a),c=Math.max(o,a),u=Math.max(.1,this.La(c,l)),d=this.Na(t+s,e),h=d-d%u,f=this.Fa(h,e,!0);return{Ga:this.Yi.Ja(h),ka:f,Xa:h}}Ya(e,t,i){let r=Qt(this.Yi.Qe());return this.Yi.Qa()&&(r=qr(r,this.Yi.il())),r.$e()-t<e&&i-r.qe()<e}};function Sy(n){return n.slice().sort((e,t)=>C(e.hs())-C(t.hs()))}var Hv;(function(n){n[n.Normal=0]="Normal",n[n.Logarithmic=1]="Logarithmic",n[n.Percentage=2]="Percentage",n[n.IndexedTo100=3]="IndexedTo100"})(Hv||(Hv={}));var $v=new Oa,zv=new ki(100,1),wh=class{constructor(e,t,i,r,s){this.sl=0,this.nl=null,this.Ge=null,this.el=null,this.rl={hl:!1,al:null},this.ll=!1,this.ol=0,this._l=0,this.ul=new X,this.cl=new X,this.dl=[],this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.wl=null,this.ha=zv,this.gl=Nd(null),this.Ml=e,this.Ps=t,this.bl=i,this.Sl=r,this.xl=s,this.Cl=new Ua(this,100,this.Pl.bind(this),this.kl.bind(this))}wa(){return this.Ml}N(){return this.Ps}hr(e){if(ke(this.Ps,e),this.ga(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){let t=Ie(e.scaleMargins.top),i=Ie(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(t+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+i}`);this.Tl(),this.vl=null}}Rl(){return this.Ps.autoScale}Dl(){return this.ll}Qa(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Vl(){return this.Ps.mode===3}il(){return this.gl}ie(){return{sn:this.Ps.autoScale,Il:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){let t=this.ie(),i=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.rl.hl=!1),t.ie===1&&e.ie!==t.ie&&((function(s,o){if(s===null)return!1;let a=Xr(s.$e(),o),l=Xr(s.qe(),o);return isFinite(a)&&isFinite(l)})(this.Ge,this.gl)?(i=qr(this.Ge,this.gl),i!==null&&this.Bl(i)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==t.ie&&(i=Wr(this.Ge,this.gl),i!==null&&this.Bl(i));let r=t.ie!==this.Ps.mode;r&&(t.ie===2||this.Le())&&this.ga(),r&&(t.ie===3||this.Vl())&&this.ga(),e.Il!==void 0&&t.Il!==e.Il&&(this.Ps.invertScale=e.Il,this.El()),this.cl.p(t,this.ie())}Al(){return this.cl}P(){return this.bl.fontSize}$t(){return this.sl}zl(e){this.sl!==e&&(this.sl=e,this.Tl(),this.vl=null)}Ll(){if(this.nl)return this.nl;let e=this.$t()-this.Ol()-this.Nl();return this.nl=e,e}Qe(){return this.Fl(),this.Ge}Bl(e,t){let i=this.Ge;(t||i===null&&e!==null||i!==null&&!i.He(e))&&(this.vl=null,this.Ge=e)}Wl(e){this.Bl(e),this.Hl(e!==null)}Ki(){return this.Fl(),this.sl===0||!this.Ge||this.Ge.Ki()}Ul(e){return this.Il()?e:this.$t()-1-e}Nt(e,t){return this.Le()?e=xi(e,t):this.Vl()&&(e=Qr(e,t)),this.kl(e,t)}$l(e,t,i){this.Fl();let r=this.Nl(),s=C(this.Qe()),o=s.$e(),a=s.qe(),l=this.Ll()-1,c=this.Il(),u=l/(a-o),d=i===void 0?0:i.from,h=i===void 0?e.length:i.to,f=this.ql();for(let p=d;p<h;p++){let g=e[p],v=g.gt;if(isNaN(v))continue;let y=v;f!==null&&(y=f(g.gt,t));let S=r+u*(y-o),R=c?S:this.sl-1-S;g.ut=R}}Yl(e,t,i){this.Fl();let r=this.Nl(),s=C(this.Qe()),o=s.$e(),a=s.qe(),l=this.Ll()-1,c=this.Il(),u=l/(a-o),d=i===void 0?0:i.from,h=i===void 0?e.length:i.to,f=this.ql();for(let p=d;p<h;p++){let g=e[p],v=g.qh,y=g.Yh,S=g.jh,R=g.Kh;f!==null&&(v=f(g.qh,t),y=f(g.Yh,t),S=f(g.jh,t),R=f(g.Kh,t));let x=r+u*(v-o),G=c?x:this.sl-1-x;g.jl=G,x=r+u*(y-o),G=c?x:this.sl-1-x,g.Kl=G,x=r+u*(S-o),G=c?x:this.sl-1-x,g.Xl=G,x=r+u*(R-o),G=c?x:this.sl-1-x,g.Zl=G}}Ts(e,t){let i=this.Pl(e,t);return this.Gl(i,t)}Gl(e,t){let i=e;return this.Le()?i=(function(r,s){return s<0&&(r=-r),r/100*s+s})(i,t):this.Vl()&&(i=(function(r,s){return r-=100,s<0&&(r=-r),r/100*s+s})(i,t)),i}ba(){return this.dl}Dt(){return this.pl||(this.pl=Sy(this.dl)),this.pl}Jl(e){this.dl.indexOf(e)===-1&&(this.dl.push(e),this.ga(),this.Ql())}io(e){let t=this.dl.indexOf(e);if(t===-1)throw new Error("source is not attached to scale");this.dl.splice(t,1),this.dl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.ga(),this.Ql()}zt(){let e=null;for(let t of this.dl){let i=t.zt();i!==null&&(e===null||i.Hh<e.Hh)&&(e=i)}return e===null?null:e.Wt}Il(){return this.Ps.invertScale}Va(){let e=this.zt()===null;if(this.vl!==null&&(e||this.vl.so===e))return this.vl.Va;this.Cl.Ha();let t=this.Cl.Va();return this.vl={Va:t,so:e},this.ul.p(),t}no(){return this.ul}eo(e){this.Le()||this.Vl()||this.ml===null&&this.el===null&&(this.Ki()||(this.ml=this.sl-e,this.el=C(this.Qe()).Ue()))}ro(e){if(this.Le()||this.Vl()||this.ml===null)return;this.yl({sn:!1}),(e=this.sl-e)<0&&(e=0);let t=(this.ml+.2*(this.sl-1))/(e+.2*(this.sl-1)),i=C(this.el).Ue();t=Math.max(t,.1),i.je(t),this.Bl(i)}ho(){this.Le()||this.Vl()||(this.ml=null,this.el=null)}ao(e){this.Rl()||this.wl===null&&this.el===null&&(this.Ki()||(this.wl=e,this.el=C(this.Qe()).Ue()))}lo(e){if(this.Rl()||this.wl===null)return;let t=C(this.Qe()).Ye()/(this.Ll()-1),i=e-this.wl;this.Il()&&(i*=-1);let r=i*t,s=C(this.el).Ue();s.Ke(r),this.Bl(s,!0),this.vl=null}oo(){this.Rl()||this.wl!==null&&(this.wl=null,this.el=null)}ra(){return this.ha||this.ga(),this.ha}Zi(e,t){switch(this.Ps.mode){case 2:return this._o(xi(e,t));case 3:return this.ra().format(Qr(e,t));default:return this.nr(e)}}Ja(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ra().format(e);default:return this.nr(e)}}Za(e){switch(this.Ps.mode){case 2:return this.uo(e);case 3:return this.ra().formatTickmarks(e);default:return this.co(e)}}Dh(e){return this.nr(e,C(this.fl).ra())}Vh(e,t){return e=xi(e,t),this._o(e,$v)}do(){return this.dl}fo(e){this.rl={al:e,hl:!1}}Ns(){this.dl.forEach(e=>e.Ns())}qa(){return this.Ps.ensureEdgeTickMarksVisible&&this.Rl()}ja(){return this.P()/2}ga(){this.vl=null;let e=1/0;this.fl=null;for(let i of this.dl)i.hs()<e&&(e=i.hs(),this.fl=i);let t=100;this.fl!==null&&(t=Math.round(1/this.fl.ea())),this.ha=zv,this.Le()?(this.ha=$v,t=100):this.Vl()?(this.ha=new ki(100,1),t=100):this.fl!==null&&(this.ha=this.fl.ra()),this.Cl=new Ua(this,t,this.Pl.bind(this),this.kl.bind(this)),this.Cl.Ha()}Ql(){this.pl=null}Xi(){return this.xl}Hl(e){this.ll=e}Ol(){return this.Il()?this.Ps.scaleMargins.bottom*this.$t()+this._l:this.Ps.scaleMargins.top*this.$t()+this.ol}Nl(){return this.Il()?this.Ps.scaleMargins.top*this.$t()+this.ol:this.Ps.scaleMargins.bottom*this.$t()+this._l}Fl(){this.rl.hl||(this.rl.hl=!0,this.po())}Tl(){this.nl=null}kl(e,t){if(this.Fl(),this.Ki())return 0;e=this.Qa()&&e?ja(e,this.gl):e;let i=C(this.Qe()),r=this.Nl()+(this.Ll()-1)*(e-i.$e())/i.Ye();return this.Ul(r)}Pl(e,t){if(this.Fl(),this.Ki())return 0;let i=this.Ul(e),r=C(this.Qe()),s=r.$e()+r.Ye()*((i-this.Nl())/(this.Ll()-1));return this.Qa()?Xr(s,this.gl):s}El(){this.vl=null,this.Cl.Ha()}po(){if(this.Dl()&&!this.Rl())return;let e=this.rl.al;if(e===null)return;let t=null,i=this.do(),r=0,s=0;for(let l of i){if(!l.Vt())continue;let c=l.zt();if(c===null)continue;let u=l.Mh(e.Uh(),e.bi()),d=u&&u.Qe();if(d!==null){switch(this.Ps.mode){case 1:d=Wr(d,this.gl);break;case 2:d=uC(d,c.Wt);break;case 3:d=dC(d,c.Wt)}if(t=t===null?d:t.vn(C(d)),u!==null){let h=u.tr();h!==null&&(r=Math.max(r,h.above),s=Math.max(s,h.below))}}}if(this.qa()&&(r=Math.max(r,this.ja()),s=Math.max(s,this.ja())),r===this.ol&&s===this._l||(this.ol=r,this._l=s,this.vl=null,this.Tl()),t!==null){if(t.$e()===t.qe()){let l=this.fl,c=5*(l===null||this.Le()||this.Vl()?1:l.ea());this.Qa()&&(t=qr(t,this.gl)),t=new Oe(t.$e()-c,t.qe()+c),this.Qa()&&(t=Wr(t,this.gl))}if(this.Qa()){let l=qr(t,this.gl),c=Nd(l);if(o=c,a=this.gl,o.Ia!==a.Ia||o.Ba!==a.Ba){let u=this.el!==null?qr(this.el,this.gl):null;this.gl=c,t=Wr(l,c),u!==null&&(this.el=Wr(u,c))}}this.Bl(t)}else this.Ge===null&&(this.Bl(new Oe(-.5,.5)),this.gl=Nd(null));var o,a}ql(){return this.Le()?xi:this.Vl()?Qr:this.Qa()?e=>ja(e,this.gl):null}vo(e,t,i){return t===void 0?(i===void 0&&(i=this.ra()),i.format(e)):t(e)}mo(e,t,i){return t===void 0?(i===void 0&&(i=this.ra()),i.formatTickmarks(e)):t(e)}nr(e,t){return this.vo(e,this.Sl.priceFormatter,t)}co(e,t){let i=this.Sl.priceFormatter;return this.mo(e,this.Sl.tickmarksPriceFormatter??(i?r=>r.map(i):void 0),t)}_o(e,t){return this.vo(e,this.Sl.percentageFormatter,t)}uo(e,t){let i=this.Sl.percentageFormatter;return this.mo(e,this.Sl.tickmarksPercentageFormatter??(i?r=>r.map(i):void 0),t)}};function Gv(n){return n instanceof Li}var Ha=class{constructor(e,t){this.dl=[],this.wo=new Map,this.sl=0,this.Mo=0,this.bo=1,this.pl=null,this.So=!1,this.xo=new X,this.kh=[],this.uh=e,this.ts=t,this.Co=new bh(this);let i=t.N();this.Po=this.ko("left",i.leftPriceScale),this.yo=this.ko("right",i.rightPriceScale),this.Po.Al().i(this.To.bind(this,this.Po),this),this.yo.Al().i(this.To.bind(this,this.yo),this),this.Ro(i)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.yo.hr(e.rightPriceScale),e.localization&&(this.Po.ga(),this.yo.ga()),e.overlayPriceScales){let t=Array.from(this.wo.values());for(let i of t){let r=C(i[0].Ft());r.hr(e.overlayPriceScales),e.localization&&r.ga()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.yo}return this.wo.has(e)?Ie(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.Al().u(this),this.yo.Al().u(this),this.dl.forEach(e=>{e.m&&e.m()}),this.kh=this.kh.filter(e=>{let t=e.oh();return t.detached&&t.detached(),!1}),this.xo.p()}Io(){return this.bo}Bo(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.sl}Eo(e){this.Mo=e,this.Ao()}zl(e){this.sl=e,this.Po.zl(e),this.yo.zl(e),this.dl.forEach(t=>{if(this.Un(t)){let i=t.Ft();i!==null&&i.zl(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.dl.filter(Gv)}ba(){return this.dl}Un(e){let t=e.Ft();return t===null||this.Po!==t&&this.yo!==t}Jl(e,t,i){this.No(e,t,i?e.hs():this.dl.length)}io(e,t){let i=this.dl.indexOf(e);de(i!==-1,"removeDataSource: invalid data source"),this.dl.splice(i,1),t||this.dl.forEach((o,a)=>o.ls(a));let r=C(e.Ft()).wa();if(this.wo.has(r)){let o=Ie(this.wo.get(r)),a=o.indexOf(e);a!==-1&&(o.splice(a,1),o.length===0&&this.wo.delete(r))}let s=e.Ft();s&&s.ba().indexOf(e)>=0&&(s.io(e),this.Fo(s)),this.pl=null}qn(e){return e===this.Po?"left":e===this.yo?"right":"overlay"}Wo(){return this.Po}Ho(){return this.yo}Uo(e,t){e.eo(t)}$o(e,t){e.ro(t),this.Ao()}qo(e){e.ho()}Yo(e,t){e.ao(t)}jo(e,t){e.lo(t),this.Ao()}Ko(e){e.oo()}Ao(){this.dl.forEach(e=>{e.Ns()})}ys(){let e=null;return this.ts.N().rightPriceScale.visible&&this.yo.ba().length!==0?e=this.yo:this.ts.N().leftPriceScale.visible&&this.Po.ba().length!==0?e=this.Po:this.dl.length!==0&&(e=this.dl[0].Ft()),e===null&&(e=this.yo),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.yo:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Rl()&&this.Xo(e)}Zo(e){let t=this.uh.Pe();e.yl({sn:!0}),t!==null&&e.fo(t),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.yo)}Jo(){this.Fo(this.Po),this.Fo(this.yo),this.dl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.pl===null&&(this.pl=Sy(this.dl)),this.pl}Qo(e,t){t=Zr(t,0,this.dl.length-1);let i=this.dl.indexOf(e);de(i!==-1,"setSeriesOrder: invalid data source"),this.dl.splice(i,1),this.dl.splice(t,0,e),this.dl.forEach((r,s)=>r.ls(s)),this.pl=null;for(let r of[this.Po,this.yo])r.Ql(),r.ga();this.ts.ar()}It(){return this.Dt().filter(Gv)}t_(){return this.xo}i_(){return this.Co}ua(e){this.kh.push(new rC(e))}ca(e){this.kh=this.kh.filter(t=>t.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.kh}sa(e,t){return this.kh.map(i=>i.jn(e,t)).filter(i=>i!==null)}Xo(e){let t=e.do();if(t&&t.length>0&&!this.uh.Ki()){let i=this.uh.Pe();i!==null&&e.fo(i)}e.Ns()}No(e,t,i){let r=this.Do(t);if(r===null&&(r=this.ko(t,this.ts.N().overlayPriceScales)),this.dl.splice(i,0,e),!Ka(t)){let s=this.wo.get(t)||[];s.push(e),this.wo.set(t,s)}e.ls(i),r.Jl(e),e._s(r),this.Fo(r),this.pl=null}To(e,t,i){t.ie!==i.ie&&this.Xo(e)}ko(e,t){let i=I({visible:!0,autoScale:!0},It(t)),r=new wh(e,i,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return r.zl(this.$t()),r}};function Sa(n){return{n_:n.n_,e_:{Kn:n.r_.externalId},h_:n.r_.cursorStyle}}function hC(n,e,t,i){for(let r of n){let s=r.Tt(i);if(s!==null&&s.jn){let o=s.jn(e,t);if(o!==null)return{a_:r,e_:o}}}return null}function fC(n){return n.Fs!==void 0}function My(n,e,t){let i=[n,...n.Dt()],r=(function(s,o,a){let l,c;for(let h of s){let f=h.sa?.(o,a)??[];for(let p of f)u=p.zOrder,d=l?.zOrder,(!d||u==="top"&&d!=="top"||u==="normal"&&d==="bottom")&&(l=p,c=h)}var u,d;return l&&c?{r_:l,n_:c}:null})(i,e,t);if(r?.r_.zOrder==="top")return Sa(r);for(let s of i){if(r&&r.n_===s&&r.r_.zOrder!=="bottom"&&!r.r_.isBackground)return Sa(r);if(fC(s)){let o=hC(s.Fs(n),e,t,n);if(o!==null)return{n_:s,a_:o.a_,e_:o.e_}}if(r&&r.n_===s&&r.r_.zOrder!=="bottom"&&r.r_.isBackground)return Sa(r)}return r?.r_?Sa(r):null}var _h=class{constructor(e,t,i=50){this.kn=0,this.yn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=t,this.Vn=i}__(e){let t=e.time,i=this.o_.cacheKey(t),r=this.Dn.get(i);if(r!==void 0)return r.u_;if(this.kn===this.Vn){let o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Ie(o)),this.Tn++,this.kn--}let s=this.l_(e);return this.Dn.set(i,{u_:s,An:this.yn}),this.Rn.set(this.yn,i),this.kn++,this.yn++,s}},jn=class{constructor(e,t){de(e<=t,"right should be >= left"),this.c_=e,this.d_=t}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}};function Wv(n,e){return n===null||e===null?n===e:n.He(e)}var Ch=class{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,t){this.g_(t),this.Dn=null;for(let i=t;i<e.length;++i){let r=e[i],s=this.p_.get(r.timeWeight);s===void 0&&(s=[],this.p_.set(r.timeWeight,s)),s.push({index:i,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}M_(e,t,i,r,s){let o=Math.ceil(t/e);return this.Dn!==null&&this.Dn.b_===o&&s===this.Dn.S_&&i===this.Dn.x_||(this.Dn={S_:s,x_:i,Va:this.C_(o,i,r),b_:o}),this.Dn.Va}g_(e){if(e===0)return void this.p_.clear();let t=[];this.p_.forEach((i,r)=>{e<=i[0].index?t.push(r):i.splice(Fi(i,e,s=>s.index<e),1/0)});for(let i of t)this.p_.delete(i)}C_(e,t,i){let r=[],s=o=>!t||i.has(o.index);for(let o of Array.from(this.p_.keys()).sort((a,l)=>l-a)){if(!this.p_.get(o))continue;let a=r;r=[];let l=a.length,c=0,u=Ie(this.p_.get(o)),d=u.length,h=1/0,f=-1/0;for(let p=0;p<d;p++){let g=u[p],v=g.index;for(;c<l;){let y=a[c],S=y.index;if(!(S<v&&s(y))){h=S;break}c++,r.push(y),f=S,h=1/0}if(h-v>=e&&v-f>=e&&s(g))r.push(g),f=v;else if(this.v_)return a}for(;c<l;c++)s(a[c])&&r.push(a[c])}return r}},Ni=class n{constructor(e){this.P_=e}k_(){return this.P_===null?null:new jn(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}y_(){return this.P_}static T_(){return new n(null)}};function pC(n,e){return n.weight>e.weight?n:e}var Sh=class{constructor(e,t,i,r){this.Mo=0,this.R_=null,this.D_=[],this.wl=null,this.ml=null,this.V_=new Ch,this.I_=new Map,this.B_=Ni.T_(),this.E_=!0,this.A_=new X,this.z_=new X,this.L_=new X,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=t,this.Sl=i,this.U_=t.rightOffset,this.q_=t.barSpacing,this.ts=e,this.o_=r,this.Y_(),this.V_.m_(t.uniformDistribution),this.j_()}N(){return this.Ps}K_(e){ke(this.Sl,e),this.X_(),this.Y_()}hr(e,t){ke(this.Ps,e),this.Ps.fixLeftEdge&&this.Z_(),this.Ps.fixRightEdge&&this.G_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.j_(),this.X_(),this.Y_(),this.L_.p()}Rs(e){return this.D_[e]?.time??null}ss(e){return this.D_[e]??null}J_(e,t){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return t?this.D_.length-1:null;let i=Fi(this.D_,this.o_.key(e),(r,s)=>this.o_.key(r.time)<s);return this.o_.key(e)<this.o_.key(this.D_[i].time)?t?i:null:i}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}Q_(){return this.D_.length>0}Pe(){return this.tu(),this.B_.k_()}iu(){return this.tu(),this.B_.y_()}su(){let e=this.Pe();if(e===null)return null;let t={from:e.Uh(),to:e.bi()};return this.nu(t)}nu(e){let t=Math.round(e.from),i=Math.round(e.to),r=C(this.eu()),s=C(this.ru());return{from:C(this.ss(Math.max(r,t))),to:C(this.ss(Math.min(s,i)))}}hu(e){return{from:C(this.J_(e.from,!0)),to:C(this.J_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;let t=this.iu(),i=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&i!==0){let r=this.q_*e/i;this.q_=r}if(this.Ps.fixLeftEdge&&t!==null&&t.Uh()<=0){let r=i-e;this.U_-=Math.round(r/this.q_)+1,this.E_=!0}this.au(),this.lu()}qt(e){if(this.Ki()||!Jr(e))return 0;let t=this.ou()+this.U_-e;return this.Mo-(t+.5)*this.q_-1}_u(e,t){let i=this.ou(),r=t===void 0?0:t.from,s=t===void 0?e.length:t.to;for(let o=r;o<s;o++){let a=e[o].wt,l=i+this.U_-a,c=this.Mo-(l+.5)*this.q_-1;e[o]._t=c}}uu(e,t){let i=Math.ceil(this.cu(e));return t&&this.Ps.ignoreWhitespaceIndices&&!this.du(i)?this.fu(i):i}fn(e){this.E_=!0,this.U_=e,this.lu(),this.ts.pu(),this.ts.ar()}vu(){return this.q_}dn(e){this.mu(e),this.lu(),this.ts.pu(),this.ts.ar()}wu(){return this.U_}Va(){if(this.Ki())return null;if(this.N_!==null)return this.N_;let e=this.q_,t=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),i=Math.round(t/e),r=C(this.Pe()),s=Math.max(r.Uh(),r.Uh()-i),o=Math.max(r.bi(),r.bi()-i),a=this.V_.M_(e,t,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),l=this.eu()+i,c=this.ru()-i,u=this.gu(),d=this.Ps.fixLeftEdge||u,h=this.Ps.fixRightEdge||u,f=0;for(let p of a){if(!(s<=p.index&&p.index<=o))continue;let g;f<this.H_.length?(g=this.H_[f],g.coord=this.qt(p.index),g.label=this.Mu(p),g.weight=p.weight):(g={needAlignCoordinate:!1,coord:this.qt(p.index),label:this.Mu(p),weight:p.weight},this.H_.push(g)),this.q_>t/2&&!u?g.needAlignCoordinate=!1:g.needAlignCoordinate=d&&p.index<=l||h&&p.index>=c,f++}return this.H_.length=f,this.N_=this.H_,this.H_}bu(){this.E_=!0,this.dn(this.Ps.barSpacing),this.fn(this.Ps.rightOffset)}Su(e){this.E_=!0,this.R_=e,this.lu(),this.Z_()}xu(e,t){let i=this.cu(e),r=this.vu(),s=r+t*(r/10);this.dn(s),this.Ps.rightBarStaysOnScroll||this.fn(this.wu()+(i-this.cu(e)))}eo(e){this.wl&&this.oo(),this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Cu()))}ro(e){if(this.O_===null)return;let t=Zr(this.Mo-e,0,this.Mo),i=Zr(this.Mo-C(this.ml),0,this.Mo);t!==0&&i!==0&&this.dn(this.O_.vu*t/i)}ho(){this.ml!==null&&(this.ml=null,this.Pu())}ao(e){this.wl===null&&this.O_===null&&(this.Ki()||(this.wl=e,this.Cu()))}lo(e){if(this.wl===null)return;let t=(this.wl-e)/this.vu();this.U_=C(this.O_).wu+t,this.E_=!0,this.lu()}oo(){this.wl!==null&&(this.wl=null,this.Pu())}ku(){this.yu(this.Ps.rightOffset)}yu(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");let i=this.U_,r=performance.now();this.ts._n({Tu:s=>(s-r)/t>=1,Ru:s=>{let o=(s-r)/t;return o>=1?e:i+(e-i)*o}})}kt(e,t){this.E_=!0,this.D_=e,this.V_.w_(e,t),this.lu()}Du(){return this.A_}Vu(){return this.z_}Iu(){return this.L_}ou(){return this.R_||0}Bu(e){let t=e.f_();this.mu(this.Mo/t),this.U_=e.bi()-this.ou(),this.lu(),this.E_=!0,this.ts.pu(),this.ts.ar()}Eu(){let e=this.eu(),t=this.ru();e!==null&&t!==null&&this.Bu(new jn(e,t+this.Ps.rightOffset))}Au(e){let t=new jn(e.from,e.to);this.Bu(t)}ns(e){return this.Sl.timeFormatter!==void 0?this.Sl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}j_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();let e=this.ts.js();for(let t of e)for(let i of t.ma())this.F_.set(i,!0);this.W_++}gu(){let e=this.ts.N().handleScroll,t=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}eu(){return this.D_.length===0?null:0}ru(){return this.D_.length===0?null:this.D_.length-1}zu(e){return(this.Mo-1-e)/this.q_}cu(e){let t=this.zu(e),i=this.ou()+this.U_-t;return Math.round(1e6*i)/1e6}mu(e){let t=this.q_;this.q_=e,this.au(),t!==this.q_&&(this.E_=!0,this.Lu())}tu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Ou(Ni.T_());let e=this.ou(),t=this.Mo/this.q_,i=this.U_+e,r=new jn(i-t+1,i);this.Ou(new Ni(r))}au(){let e=Zr(this.q_,this.Nu(),this.Fu());this.q_!==e&&(this.q_=e,this.E_=!0)}Fu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Nu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}lu(){let e=this.Wu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);let t=this.Hu();this.U_>t&&(this.U_=t,this.E_=!0)}Wu(){let e=this.eu(),t=this.R_;return e===null||t===null?null:e-t-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Hu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Cu(){this.O_={vu:this.vu(),wu:this.wu()}}Pu(){this.O_=null}Mu(e){let t=this.I_.get(e.weight);return t===void 0&&(t=new _h(i=>this.Uu(i),this.o_),this.I_.set(e.weight,t)),t.__(e)}Uu(e){return this.o_.formatTickmark(e,this.Sl)}Ou(e){let t=this.B_;this.B_=e,Wv(t.k_(),this.B_.k_())||this.A_.p(),Wv(t.y_(),this.B_.y_())||this.z_.p(),this.Lu()}Lu(){this.N_=null}X_(){this.Lu(),this.I_.clear()}Y_(){this.o_.updateFormatter(this.Sl)}Z_(){if(!this.Ps.fixLeftEdge)return;let e=this.eu();if(e===null)return;let t=this.Pe();if(t===null)return;let i=t.Uh()-e;if(i<0){let r=this.U_-i-1;this.fn(r)}this.au()}G_(){this.lu(),this.au()}du(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}fu(e){let t=(function*(r){let s=Math.round(r),o=s<r,a=1;for(;;)o?(yield s+a,yield s-a):(yield s-a,yield s+a),a++})(e),i=this.ru();for(;i;){let r=t.next().value;if(this.F_.get(r))return r;if(r<0||r>i)break}return e}},Yv,qv,Zv,$a,Qv;(function(n){n[n.OnTouchEnd=0]="OnTouchEnd",n[n.OnNextTap=1]="OnNextTap"})(Yv||(Yv={}));var Mh=class{constructor(e,t,i){this.$u=[],this.qu=[],this.Mo=0,this.Yu=null,this.ju=new X,this.Ku=new X,this.Xu=null,this.Zu=e,this.Ps=t,this.o_=i,this.xl=new $d(this.Ps.layout.colorParsers),this.Gu=new Hd(this),this.uh=new Sh(this,t.timeScale,this.Ps.localization,i),this.Ct=new Xd(this,t.crosshair),this.Ju=new yh(t.crosshair),t.addDefaultPane&&(this.Qu(0),this.$u[0].Bo(2)),this.tc=this.sc(0),this.nc=this.sc(1)}Bh(){this.ec(ge.gn())}ar(){this.ec(ge.wn())}Zh(){this.ec(new ge(1))}Eh(e){let t=this.rc(e);this.ec(t)}hc(){return this.Yu}ac(e){if(this.Yu?.n_===e?.n_&&this.Yu?.e_?.Kn===e?.e_?.Kn)return;let t=this.Yu;this.Yu=e,t!==null&&this.Eh(t.n_),e!==null&&e.n_!==t?.n_&&this.Eh(e.n_)}N(){return this.Ps}hr(e){ke(this.Ps,e),this.$u.forEach(t=>t.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.K_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.ju.p(),this.tc=this.sc(0),this.nc=this.sc(1),this.Bh()}lc(e,t,i=0){let r=this.$u[i];if(r===void 0)return;if(e==="left")return ke(this.Ps,{leftPriceScale:t}),r.Ro({leftPriceScale:t}),this.ju.p(),void this.Bh();if(e==="right")return ke(this.Ps,{rightPriceScale:t}),r.Ro({rightPriceScale:t}),this.ju.p(),void this.Bh();let s=this.oc(e,i);s!==null&&(s.Ft.hr(t),this.ju.p())}oc(e,t){let i=this.$u[t];if(i===void 0)return null;let r=i.Do(e);return r!==null?{Us:i,Ft:r}:null}Et(){return this.uh}$s(){return this.$u}_c(){return this.Ct}uc(){return this.Ku}cc(e,t){e.zl(t),this.pu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.$u.forEach(t=>t.Eo(e)),this.pu()}dc(e){this.$u.length!==1&&(de(e>=0&&e<this.$u.length,"Invalid pane index"),this.$u.splice(e,1),this.Bh())}fc(e,t){if(this.$u.length<2)return;de(e>=0&&e<this.$u.length,"Invalid pane index");let i=this.$u[e],r=this.$u.reduce((d,h)=>d+h.Io(),0),s=this.$u.reduce((d,h)=>d+h.$t(),0),o=s-30*(this.$u.length-1);t=Math.min(o,Math.max(30,t));let a=r/s,l=i.$t();i.Bo(t*a);let c=t-l,u=this.$u.length-1;for(let d of this.$u)if(d!==i){let h=Math.min(o,Math.max(30,d.$t()-c/u));c-=d.$t()-h,u-=1;let f=h*a;d.Bo(f)}this.Bh()}vc(e,t){de(e>=0&&e<this.$u.length&&t>=0&&t<this.$u.length,"Invalid pane index");let i=this.$u[e],r=this.$u[t];this.$u[e]=r,this.$u[t]=i,this.Bh()}mc(e,t){if(de(e>=0&&e<this.$u.length&&t>=0&&t<this.$u.length,"Invalid pane index"),e===t)return;let[i]=this.$u.splice(e,1);this.$u.splice(t,0,i),this.Bh()}Uo(e,t,i){e.Uo(t,i)}$o(e,t,i){e.$o(t,i),this.Ah(),this.ec(this.wc(e,2))}qo(e,t){e.qo(t),this.ec(this.wc(e,2))}Yo(e,t,i){t.Rl()||e.Yo(t,i)}jo(e,t,i){t.Rl()||(e.jo(t,i),this.Ah(),this.ec(this.wc(e,2)))}Ko(e,t){t.Rl()||(e.Ko(t),this.ec(this.wc(e,2)))}Zo(e,t){e.Zo(t),this.ec(this.wc(e,2))}gc(e){this.uh.eo(e)}Mc(e,t){let i=this.Et();if(i.Ki()||t===0)return;let r=i.Qi();e=Math.max(1,Math.min(e,r)),i.xu(e,t),this.pu()}bc(e){this.Sc(0),this.xc(e),this.Cc()}Pc(e){this.uh.ro(e),this.pu()}kc(){this.uh.ho(),this.ar()}Sc(e){this.uh.ao(e)}xc(e){this.uh.lo(e),this.pu()}Cc(){this.uh.oo(),this.ar()}js(){return this.qu}yc(e,t,i,r,s){this.Ct.Vs(e,t);let o=NaN,a=this.uh.uu(e,!0),l=this.uh.Pe();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));let c=r.ys(),u=c.zt();if(u!==null&&(o=c.Ts(t,u)),o=this.Ju.Ma(o,a,r),this.Ct.As(a,o,r),this.Zh(),!s){let d=My(r,e,t);this.ac(d&&{n_:d.n_,e_:d.e_,h_:d.h_||null}),this.Ku.p(this.Ct.Bt(),{x:e,y:t},i)}}Tc(e,t,i){let r=i.ys(),s=r.zt(),o=r.Nt(e,C(s)),a=this.uh.J_(t,!0),l=this.uh.qt(C(a));this.yc(l,o,null,i,!0)}Rc(e){this._c().Ls(),this.Zh(),e||this.Ku.p(null,null,null)}Ah(){let e=this.Ct.Us();if(e!==null){let t=this.Ct.Bs(),i=this.Ct.Es();this.yc(t,i,null,e)}this.Ct.Ns()}Dc(e,t,i){let r=this.uh.Rs(0);t!==void 0&&i!==void 0&&this.uh.kt(t,i);let s=this.uh.Rs(0),o=this.uh.ou(),a=this.uh.Pe();if(a!==null&&r!==null&&s!==null){let l=a.Te(o),c=this.o_.key(r)>this.o_.key(s),u=e!==null&&e>o&&!c,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,h=l&&(i!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(u&&!h){let f=e-o;this.uh.fn(this.uh.wu()-f)}}this.uh.Su(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if((function(i){return i instanceof Ha})(e))return e;let t=this.$u.find(i=>i.Dt().includes(e));return t===void 0?null:t}pu(){this.$u.forEach(e=>e.Jo()),this.Ah()}m(){this.$u.forEach(e=>e.m()),this.$u.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Vc(){return this.Gu}Yn(){return this.Gu.N()}Vo(){return this.ju}Ic(e,t){let i=this.Qu(t);this.Bc(e,i),this.qu.push(e),this.qu.length===1?this.Bh():this.ar()}Ec(e){let t=this.Hn(e),i=this.qu.indexOf(e);de(i!==-1,"Series not found");let r=C(t);this.qu.splice(i,1),r.io(e),e.m&&e.m(),this.uh.j_(),this.Ac(r)}Ih(e,t){let i=C(this.Hn(e));i.io(e,!0),i.Jl(e,t,!0)}Eu(){let e=ge.wn();e.rn(),this.ec(e)}zc(e){let t=ge.wn();t.ln(e),this.ec(t)}cn(){let e=ge.wn();e.cn(),this.ec(e)}dn(e){let t=ge.wn();t.dn(e),this.ec(t)}fn(e){let t=ge.wn();t.fn(e),this.ec(t)}_n(e){let t=ge.wn();t._n(e),this.ec(t)}hn(){let e=ge.wn();e.hn(),this.ec(e)}Lc(){return this.Ps.rightPriceScale.visible?"right":"left"}Oc(e,t){if(de(t>=0,"Index should be greater or equal to 0"),t===this.Nc(e))return;let i=C(this.Hn(e));i.io(e);let r=this.Qu(t);this.Bc(e,r),i.ba().length===0&&this.Ac(i),this.Bh()}Fc(){return this.nc}$(){return this.tc}Ut(e){let t=this.nc,i=this.tc;if(t===i)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Xu===null||this.Xu.mr!==i||this.Xu.wr!==t)this.Xu={mr:i,wr:t,Wc:new Map};else{let s=this.Xu.Wc.get(e);if(s!==void 0)return s}let r=this.xl.tt(i,t,e/100);return this.Xu.Wc.set(e,r),r}Hc(e){return this.$u.indexOf(e)}Xi(){return this.xl}Uc(){return this.$c()}$c(e){let t=new Ha(this.uh,this);this.$u.push(t);let i=e??this.$u.length-1,r=ge.gn();return r.Qs(i,{tn:0,sn:!0}),this.ec(r),t}Qu(e){return de(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.$u.length,e))<this.$u.length?this.$u[e]:this.$c(e)}Nc(e){return this.$u.findIndex(t=>t.Oo().includes(e))}wc(e,t){let i=new ge(t);if(e!==null){let r=this.$u.indexOf(e);i.Qs(r,{tn:t})}return i}rc(e,t){return t===void 0&&(t=2),this.wc(this.Hn(e),t)}ec(e){this.Zu&&this.Zu(e),this.$u.forEach(t=>t.i_().lr().kt())}Bc(e,t){let i=e.N().priceScaleId,r=i!==void 0?i:this.Lc();t.Jl(e,r),Ka(r)||e.hr(e.N())}sc(e){let t=this.Ps.layout;return t.background.type==="gradient"?e===0?t.background.topColor:t.background.bottomColor:t.background.color}Ac(e){!e.Lo()&&e.ba().length===0&&this.$u.length>1&&this.$u.splice(this.Hc(e),1)}};function Ih(n){return!Ri(n)&&!is(n)}function Iy(n){return Ri(n)}(function(n){n[n.Disabled=0]="Disabled",n[n.Continuous=1]="Continuous",n[n.OnDataUpdate=2]="OnDataUpdate"})(qv||(qv={})),(function(n){n[n.LastBar=0]="LastBar",n[n.LastVisible=1]="LastVisible"})(Zv||(Zv={})),(function(n){n.Solid="solid",n.VerticalGradient="gradient"})($a||($a={})),(function(n){n[n.Year=0]="Year",n[n.Month=1]="Month",n[n.DayOfMonth=2]="DayOfMonth",n[n.Time=3]="Time",n[n.TimeWithSeconds=4]="TimeWithSeconds"})(Qv||(Qv={}));var Xv=n=>n.getUTCFullYear();function mC(n,e,t){return e.replace(/yyyy/g,(i=>Tt(Xv(i),4))(n)).replace(/yy/g,(i=>Tt(Xv(i)%100,2))(n)).replace(/MMMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(n,t)).replace(/MMM/g,((i,r)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(n,t)).replace(/MM/g,(i=>Tt((r=>r.getUTCMonth()+1)(i),2))(n)).replace(/dd/g,(i=>Tt((r=>r.getUTCDate())(i),2))(n))}var za=class{constructor(e="yyyy-MM-dd",t="default"){this.qc=e,this.Yc=t}__(e){return mC(e,this.qc,this.Yc)}},Th=class{constructor(e){this.jc=e||"%h:%m:%s"}__(e){return this.jc.replace("%h",Tt(e.getUTCHours(),2)).replace("%m",Tt(e.getUTCMinutes(),2)).replace("%s",Tt(e.getUTCSeconds(),2))}},gC={Kc:"yyyy-MM-dd",Xc:"%h:%m:%s",Zc:" ",Gc:"default"},xh=class{constructor(e={}){let t=I(I({},gC),e);this.Jc=new za(t.Kc,t.Gc),this.Qc=new Th(t.Xc),this.td=t.Zc}__(e){return`${this.Jc.__(e)}${this.td}${this.Qc.__(e)}`}};function Ma(n){return 60*n*60*1e3}function Ad(n){return 60*n*1e3}var Ia=[{sd:(Kv=1,1e3*Kv),nd:10},{sd:Ad(1),nd:20},{sd:Ad(5),nd:21},{sd:Ad(30),nd:22},{sd:Ma(1),nd:30},{sd:Ma(3),nd:31},{sd:Ma(6),nd:32},{sd:Ma(12),nd:33}],Kv;function Jv(n,e){if(n.getUTCFullYear()!==e.getUTCFullYear())return 70;if(n.getUTCMonth()!==e.getUTCMonth())return 60;if(n.getUTCDate()!==e.getUTCDate())return 50;for(let t=Ia.length-1;t>=0;--t)if(Math.floor(e.getTime()/Ia[t].sd)!==Math.floor(n.getTime()/Ia[t].sd))return Ia[t].nd;return 0}function Rd(n){let e=n;if(is(n)&&(e=tf(n)),!Ih(e))throw new Error("time must be of type BusinessDay");let t=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{ed:Math.round(t.getTime()/1e3),rd:e}}function ey(n){if(!Iy(n))throw new Error("time must be of type isUTCTimestamp");return{ed:n}}function tf(n){let e=new Date(n);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${n}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function ty(n){is(n.time)&&(n.time=tf(n.time))}var Ga=class{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?(function(t){t.forEach(ty)})(e):ty(e)}createConverterToInternalObj(e){return C((function(t){return t.length===0?null:Ih(t[0].time)||is(t[0].time)?Rd:ey})(e))}key(e){return typeof e=="object"&&"ed"in e?e.ed:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){let t=e;return t.rd===void 0?new Date(1e3*t.ed).getTime():new Date(Date.UTC(t.rd.year,t.rd.month-1,t.rd.day)).getTime()}convertHorzItemToInternal(e){return Iy(t=e)?ey(t):Ih(t)?Rd(t):Rd(tf(t));var t}updateFormatter(e){if(!this.Ps)return;let t=e.dateFormat;this.Ps.timeScale.timeVisible?this.hd=new xh({Kc:t,Xc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Zc:"   ",Gc:e.locale}):this.hd=new za(t,e.locale)}formatHorzItem(e){let t=e;return this.hd.__(new Date(1e3*t.ed))}formatTickmark(e,t){let i=(function(s,o,a){switch(s){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}})(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),r=this.Ps.timeScale;if(r.tickMarkFormatter!==void 0){let s=r.tickMarkFormatter(e.originalTime,i,t.locale);if(s!==null)return s}return(function(s,o,a){let l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}let c=s.rd===void 0?new Date(1e3*s.ed):new Date(Date.UTC(s.rd.year,s.rd.month-1,s.rd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)})(e.time,i,t.locale)}maxTickMarkWeight(e){let t=e.reduce(pC,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){(function(i,r=0){if(i.length===0)return;let s=r===0?null:i[r-1].time.ed,o=s!==null?new Date(1e3*s):null,a=0;for(let l=r;l<i.length;++l){let c=i[l],u=new Date(1e3*c.time.ed);o!==null&&(c.timeWeight=Jv(u,o)),a+=c.time.ed-(s||c.time.ed),s=c.time.ed,o=u}if(r===0&&i.length>1){let l=Math.ceil(a/(i.length-1)),c=new Date(1e3*(i[0].time.ed-l));i[0].timeWeight=Jv(new Date(1e3*i[0].time.ed),c)}})(e,t)}static ad(e){return ke({localization:{dateFormat:"dd MMM 'yy"}},e??{})}},Vi=typeof window<"u";function ny(){return!!Vi&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Pd(){return!!Vi&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Nh(n){return n+n%2}function vC(n){Vi&&window.chrome!==void 0&&n.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}var Bi=class{constructor(e,t,i){this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.pd=null,this.vd=!1,this.md=null,this.wd=null,this.gd=!1,this.Md=!1,this.bd=!1,this.Sd=null,this.xd=null,this.Cd=null,this.Pd=null,this.kd=null,this.yd=null,this.Td=null,this.Rd=0,this.Dd=!1,this.Vd=!1,this.Id=!1,this.Bd=0,this.Ed=null,this.Ad=!Pd(),this.zd=r=>{this.Ld(r)},this.Od=r=>{if(this.Nd(r)){let s=this.Fd(r);if(++this.ud,this.dd&&this.ud>1){let{Wd:o}=this.Hd(gt(r),this.fd);o<30&&!this.bd&&this.Ud(s,this.qd.$d),this.Yd()}}else{let s=this.Fd(r);if(++this.ld,this.od&&this.ld>1){let{Wd:o}=this.Hd(gt(r),this._d);o<5&&!this.Md&&this.jd(s,this.qd.Kd),this.Xd()}}},this.Zd=e,this.qd=t,this.Ps=i,this.Gd()}m(){this.Sd!==null&&(this.Sd(),this.Sd=null),this.xd!==null&&(this.xd(),this.xd=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.kd!==null&&(this.kd(),this.kd=null),this.yd!==null&&(this.yd(),this.yd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.Jd(),this.Xd()}Qd(e){this.Pd&&this.Pd();let t=this.tf.bind(this);if(this.Pd=()=>{this.Zd.removeEventListener("mousemove",t)},this.Zd.addEventListener("mousemove",t),this.Nd(e))return;let i=this.Fd(e);this.jd(i,this.qd.if),this.Ad=!0}Xd(){this.od!==null&&clearTimeout(this.od),this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Yd(){this.dd!==null&&clearTimeout(this.dd),this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}tf(e){if(this.Id||this.wd!==null||this.Nd(e))return;let t=this.Fd(e);this.jd(t,this.qd.sf),this.Ad=!0}nf(e){let t=kd(e.changedTouches,C(this.Ed));if(t===null||(this.Bd=Ta(e),this.Td!==null)||this.Vd)return;this.Dd=!0;let i=this.Hd(gt(t),C(this.wd)),{ef:r,rf:s,Wd:o}=i;if(this.gd||!(o<5)){if(!this.gd){let a=.5*r,l=s>=a&&!this.Ps.hf(),c=a>s&&!this.Ps.af();l||c||(this.Vd=!0),this.gd=!0,this.bd=!0,this.Jd(),this.Yd()}if(!this.Vd){let a=this.Fd(e,t);this.Ud(a,this.qd.lf),Ti(e)}}}_f(e){if(e.button!==0)return;let t=this.Hd(gt(e),C(this.md)),{Wd:i}=t;if(i>=5&&(this.Md=!0,this.Xd()),this.Md){let r=this.Fd(e);this.jd(r,this.qd.uf)}}Hd(e,t){let i=Math.abs(t._t-e._t),r=Math.abs(t.ut-e.ut);return{ef:i,rf:r,Wd:i+r}}cf(e){let t=kd(e.changedTouches,C(this.Ed));if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t===null)return;this.Ed=null,this.Bd=Ta(e),this.Jd(),this.wd=null,this.yd&&(this.yd(),this.yd=null);let i=this.Fd(e,t);if(this.Ud(i,this.qd.df),++this.ud,this.dd&&this.ud>1){let{Wd:r}=this.Hd(gt(t),this.fd);r<30&&!this.bd&&this.Ud(i,this.qd.$d),this.Yd()}else this.bd||(this.Ud(i,this.qd.ff),this.qd.ff&&Ti(e));this.ud===0&&Ti(e),e.touches.length===0&&this.vd&&(this.vd=!1,Ti(e))}Ld(e){if(e.button!==0)return;let t=this.Fd(e);if(this.md=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),ny()&&this.Zd.ownerDocument.documentElement.removeEventListener("mouseleave",this.zd),!this.Nd(e))if(this.jd(t,this.qd.pf),++this.ld,this.od&&this.ld>1){let{Wd:i}=this.Hd(gt(e),this._d);i<5&&!this.Md&&this.jd(t,this.qd.Kd),this.Xd()}else this.Md||this.jd(t,this.qd.vf)}Jd(){this.pd!==null&&(clearTimeout(this.pd),this.pd=null)}mf(e){if(this.Ed!==null)return;let t=e.changedTouches[0];this.Ed=t.identifier,this.Bd=Ta(e);let i=this.Zd.ownerDocument.documentElement;this.bd=!1,this.gd=!1,this.Vd=!1,this.wd=gt(t),this.yd&&(this.yd(),this.yd=null);{let s=this.nf.bind(this),o=this.cf.bind(this);this.yd=()=>{i.removeEventListener("touchmove",s),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",s,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.Jd(),this.pd=setTimeout(this.wf.bind(this,e),240)}let r=this.Fd(e,t);this.Ud(r,this.qd.gf),this.dd||(this.ud=0,this.dd=setTimeout(this.Yd.bind(this),500),this.fd=gt(t))}Mf(e){if(e.button!==0)return;let t=this.Zd.ownerDocument.documentElement;ny()&&t.addEventListener("mouseleave",this.zd),this.Md=!1,this.md=gt(e),this.kd&&(this.kd(),this.kd=null);{let r=this._f.bind(this),s=this.Ld.bind(this);this.kd=()=>{t.removeEventListener("mousemove",r),t.removeEventListener("mouseup",s)},t.addEventListener("mousemove",r),t.addEventListener("mouseup",s)}if(this.Id=!0,this.Nd(e))return;let i=this.Fd(e);this.jd(i,this.qd.bf),this.od||(this.ld=0,this.od=setTimeout(this.Xd.bind(this),500),this._d=gt(e))}Gd(){this.Zd.addEventListener("mouseenter",this.Qd.bind(this)),this.Zd.addEventListener("touchcancel",this.Jd.bind(this));{let e=this.Zd.ownerDocument,t=i=>{this.qd.Sf&&(i.composed&&this.Zd.contains(i.composedPath()[0])||i.target&&this.Zd.contains(i.target)||this.qd.Sf())};this.xd=()=>{e.removeEventListener("touchstart",t)},this.Sd=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}Pd()&&(this.Cd=()=>{this.Zd.removeEventListener("dblclick",this.Od)},this.Zd.addEventListener("dblclick",this.Od)),this.Zd.addEventListener("mouseleave",this.xf.bind(this)),this.Zd.addEventListener("touchstart",this.mf.bind(this),{passive:!0}),vC(this.Zd),this.Zd.addEventListener("mousedown",this.Mf.bind(this)),this.Cf(),this.Zd.addEventListener("touchmove",()=>{},{passive:!1})}Cf(){this.qd.Pf===void 0&&this.qd.kf===void 0&&this.qd.yf===void 0||(this.Zd.addEventListener("touchstart",e=>this.Tf(e.touches),{passive:!0}),this.Zd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Td!==null&&this.qd.kf!==void 0){let t=iy(e.touches[0],e.touches[1])/this.Rd;this.qd.kf(this.Td,t),Ti(e)}},{passive:!1}),this.Zd.addEventListener("touchend",e=>{this.Tf(e.touches)}))}Tf(e){e.length===1&&(this.Dd=!1),e.length!==2||this.Dd||this.vd?this.Rf():this.Df(e)}Df(e){let t=this.Zd.getBoundingClientRect()||{left:0,top:0};this.Td={_t:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,ut:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.Rd=iy(e[0],e[1]),this.qd.Pf!==void 0&&this.qd.Pf(),this.Jd()}Rf(){this.Td!==null&&(this.Td=null,this.qd.yf!==void 0&&this.qd.yf())}xf(e){if(this.Pd&&this.Pd(),this.Nd(e)||!this.Ad)return;let t=this.Fd(e);this.jd(t,this.qd.Vf),this.Ad=!Pd()}wf(e){let t=kd(e.touches,C(this.Ed));if(t===null)return;let i=this.Fd(e,t);this.Ud(i,this.qd.If),this.bd=!0,this.vd=!0}Nd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Ta(e)<this.Bd+500}Ud(e,t){t&&t.call(this.qd,e)}jd(e,t){t&&t.call(this.qd,e)}Fd(e,t){let i=t||e,r=this.Zd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-r.left,localY:i.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Bf:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Ef:e.type,Af:i.target,a_:e.view,zf:()=>{e.type!=="touchstart"&&Ti(e)}}}};function iy(n,e){let t=n.clientX-e.clientX,i=n.clientY-e.clientY;return Math.sqrt(t*t+i*i)}function Ti(n){n.cancelable&&n.preventDefault()}function gt(n){return{_t:n.pageX,ut:n.pageY}}function Ta(n){return n.timeStamp||performance.now()}function kd(n,e){for(let t=0;t<n.length;++t)if(n[t].identifier===e)return n[t];return null}var Ah=class{constructor(e,t,i){this.Lf=null,this.Of=null,this.Nf=!0,this.Ff=null,this.Wf=e,this.Hf=e.Uf()[t],this.$f=e.Uf()[i],this.qf=document.createElement("tr"),this.qf.style.height="1px",this.Yf=document.createElement("td"),this.Yf.style.position="relative",this.Yf.style.padding="0",this.Yf.style.margin="0",this.Yf.setAttribute("colspan","3"),this.jf(),this.qf.appendChild(this.Yf),this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf=null,this.Of=null)}m(){this.Of!==null&&this.Of.m()}Xf(){return this.qf}Zf(){return z({width:this.Hf.Zf().width,height:1})}Gf(){return z({width:this.Hf.Gf().width,height:1*window.devicePixelRatio})}Jf(e,t,i){let r=this.Gf();e.fillStyle=this.Wf.N().layout.panes.separatorColor,e.fillRect(t,i,r.width,r.height)}kt(){this.jf(),this.Wf.N().layout.panes.enableResize!==this.Nf&&(this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf!==null&&(this.Yf.removeChild(this.Lf.Qf),this.Yf.removeChild(this.Lf.tp),this.Lf=null),this.Of!==null&&(this.Of.m(),this.Of=null)))}Kf(){let e=document.createElement("div"),t=e.style;t.position="fixed",t.display="none",t.zIndex="49",t.top="0",t.left="0",t.width="100%",t.height="100%",t.cursor="row-resize",this.Yf.appendChild(e);let i=document.createElement("div"),r=i.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.Yf.appendChild(i);let s={if:this.ip.bind(this),Vf:this.sp.bind(this),bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this)};this.Of=new Bi(i,s,{hf:()=>!1,af:()=>!0}),this.Lf={tp:i,Qf:e}}jf(){this.Yf.style.background=this.Wf.N().layout.panes.separatorColor}ip(e){this.Lf!==null&&(this.Lf.tp.style.backgroundColor=this.Wf.N().layout.panes.separatorHoverColor)}sp(e){this.Lf!==null&&this.Ff===null&&(this.Lf.tp.style.backgroundColor="")}np(e){if(this.Lf===null)return;let t=this.Hf.hp().Io()+this.$f.hp().Io(),i=t/(this.Hf.Zf().height+this.$f.Zf().height),r=30*i;t<=2*r||(this.Ff={ap:e.pageY,lp:this.Hf.hp().Io(),op:t-r,_p:t,up:i,cp:r},this.Lf.Qf.style.display="block")}ep(e){let t=this.Ff;if(t===null)return;let i=(e.pageY-t.ap)*t.up,r=Zr(t.lp+i,t.cp,t.op);this.Hf.hp().Bo(r),this.$f.hp().Bo(t._p-r),this.Wf.Qt().Bh()}rp(e){this.Ff!==null&&this.Lf!==null&&(this.Ff=null,this.Lf.Qf.style.display="none")}};function Od(n,e){return n.dp-e.dp}function Fd(n,e,t){let i=(n.dp-e.dp)/(n.wt-e.wt);return Math.sign(i)*Math.min(Math.abs(i),t)}var Rh=class{constructor(e,t,i,r){this.fp=null,this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=0,this.Mp=0,this.bp=e,this.Sp=t,this.xp=i,this.Mn=r}Cp(e,t){if(this.fp!==null){if(this.fp.wt===t)return void(this.fp.dp=e);if(Math.abs(this.fp.dp-e)<this.Mn)return}this.mp=this.vp,this.vp=this.pp,this.pp=this.fp,this.fp={wt:t,dp:e}}le(e,t){if(this.fp===null||this.pp===null||t-this.fp.wt>50)return;let i=0,r=Fd(this.fp,this.pp,this.Sp),s=Od(this.fp,this.pp),o=[r],a=[s];if(i+=s,this.vp!==null){let c=Fd(this.pp,this.vp,this.Sp);if(Math.sign(c)===Math.sign(r)){let u=Od(this.pp,this.vp);if(o.push(c),a.push(u),i+=u,this.mp!==null){let d=Fd(this.vp,this.mp,this.Sp);if(Math.sign(d)===Math.sign(r)){let h=Od(this.vp,this.mp);o.push(d),a.push(h),i+=h}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/i*o[c];Math.abs(l)<this.bp||(this.wp={dp:e,wt:t},this.Mp=l,this.gp=(function(c,u){let d=Math.log(u);return Math.log(1*d/-c)/d})(Math.abs(l),this.xp))}Ru(e){let t=C(this.wp),i=e-t.wt;return t.dp+this.Mp*(Math.pow(this.xp,i)-1)/Math.log(this.xp)}Tu(e){return this.wp===null||this.Pp(e)===this.gp}Pp(e){let t=e-C(this.wp).wt;return Math.min(t,this.gp)}},Ph=class{constructor(e,t){this.kp=void 0,this.yp=void 0,this.Tp=void 0,this.ps=!1,this.Rp=e,this.Dp=t,this.Vp()}kt(){this.Vp()}Ip(){this.kp&&this.Rp.removeChild(this.kp),this.yp&&this.Rp.removeChild(this.yp),this.kp=void 0,this.yp=void 0}Bp(){return this.ps!==this.Ep()||this.Tp!==this.Ap()}Ap(){return this.Dp.Qt().Xi().J(this.Dp.N().layout.textColor)>160?"dark":"light"}Ep(){return this.Dp.N().layout.attributionLogo}zp(){let e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Vp(){this.Bp()&&(this.Ip(),this.ps=this.Ep(),this.ps&&(this.Tp=this.Ap(),this.yp=document.createElement("style"),this.yp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.zp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Tp==="dark"),this.Rp.appendChild(this.yp),this.Rp.appendChild(this.kp)))}};function Un(n,e){let t=C(n.ownerDocument).createElement("canvas");n.appendChild(t);let i=Sd(t,{type:"device-pixel-content-box",options:{allowResizeObserver:!0},transform:(r,s)=>({width:Math.max(r.width,s.width),height:Math.max(r.height,s.height)})});return i.resizeCanvasElement(e),i}function Hn(n){n.width=1,n.height=1,n.getContext("2d")?.clearRect(0,0,1,1)}function kh(n,e,t,i){n.ih&&n.ih(e,t,i)}function xa(n,e,t,i){n.nt(e,t,i)}function Oh(n,e,t,i){let r=n(t,i);for(let s of r){let o=s.Tt(i);o!==null&&e(o)}}function Ld(n,e){return t=>(function(i){return i.Ft!==void 0})(t)?(t.Ft()?.wa()??"")!==e?[]:t.ta?.(n)??[]:[]}function ry(n,e,t,i){if(!n.length)return;let r=0,s=n[0].$t(i,!0),o=e===1?t/2-(n[0].Fi()-s/2):n[0].Fi()-s/2-t/2;o=Math.max(0,o);for(let a=1;a<n.length;a++){let l=n[a],c=n[a-1],u=c.$t(i,!1),d=l.Fi(),h=c.Fi();if(e===1?d>h-u:d<h+u){let f=h-u*e;l.Wi(f);let p=f-e*u/2;if((e===1?p<0:p>t)&&o>0){let g=e===1?-1-p:p-t,v=Math.min(g,o);for(let y=r;y<n.length;y++)n[y].Wi(n[y].Fi()+e*v);o-=v}}else r=a,o=e===1?h-u-d:d-(h+u)}}var Wa=class{constructor(e,t,i,r){this.Yi=null,this.Lp=null,this.Op=!1,this.Np=new Oi(200),this.Fp=null,this.Wp=0,this.Hp=!1,this.Up=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.qp=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.Pt=e,this.Ps=t,this.bl=t.layout,this.Gu=i,this.Yp=r==="left",this.jp=Ld("normal",r),this.Kp=Ld("top",r),this.Xp=Ld("bottom",r),this.Yf=document.createElement("div"),this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Yf.style.width="25px",this.Yf.style.left="0",this.Yf.style.position="relative",this.Zp=Un(this.Yf,z({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);let s=this.Zp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Gp=Un(this.Yf,z({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);let o=this.Gp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";let a={bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),Sf:this.Jp.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this),Kd:this.Qp.bind(this),$d:this.Qp.bind(this),if:this.tv.bind(this),Vf:this.sp.bind(this)};this.Of=new Bi(this.Gp.canvasElement,a,{hf:()=>!this.Ps.handleScroll.vertTouchDrag,af:()=>!0})}m(){this.Of.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Hn(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Hn(this.Zp.canvasElement),this.Zp.dispose(),this.Yi!==null&&this.Yi.no().u(this),this.Yi=null}Xf(){return this.Yf}P(){return this.bl.fontSize}iv(){let e=this.Gu.N();return this.Fp!==e.k&&(this.Np.In(),this.Fp=e.k),e}sv(){if(this.Yi===null)return 0;let e=0,t=this.iv(),i=C(this.Zp.canvasElement.getContext("2d",{colorSpace:this.Pt.$p().N().layout.colorSpace}));i.save();let r=this.Yi.Va();i.font=this.nv(),r.length>0&&(e=Math.max(this.Np.Vi(i,r[0].Ga),this.Np.Vi(i,r[r.length-1].Ga)));let s=this.ev();for(let c=s.length;c--;){let u=this.Np.Vi(i,s[c].ri());u>e&&(e=u)}let o=this.Yi.zt();if(o!==null&&this.Lp!==null&&(a=this.Ps.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){let c=this.Yi.Ts(1,o),u=this.Yi.Ts(this.Lp.height-2,o);e=Math.max(e,this.Np.Vi(i,this.Yi.Zi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.Np.Vi(i,this.Yi.Zi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var a;i.restore();let l=e||34;return Nh(Math.ceil(t.S+t.C+t.I+t.B+5+l))}rv(e){this.Lp!==null&&mt(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`)}hv(){return C(this.Lp).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.no().u(this),this.Yi=e,e.no().i(this.ul.bind(this),this))}Ft(){return this.Yi}In(){let e=this.Pt.hp();this.Pt.$p().Qt().Zo(e,C(this.Ft()))}av(e){if(this.Lp===null)return;let t={colorSpace:this.Pt.$p().N().layout.colorSpace};if(e!==1){this.lv(),this.Zp.applySuggestedBitmapSize();let r=Mt(this.Zp,t);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.ov(s),this._v(s)}),this.Pt.uv(r,this.Xp),this.cv(r),this.Pt.uv(r,this.jp),this.dv(r))}this.Gp.applySuggestedBitmapSize();let i=Mt(this.Gp,t);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.fv(i),this.Pt.uv(i,this.Kp))}Gf(){return this.Zp.bitmapSize}Jf(e,t,i){let r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,t,i)}kt(){this.Yi?.Va()}np(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;let t=this.Pt.$p().Qt(),i=this.Pt.hp();this.Op=!0,t.Uo(i,this.Yi,e.localY)}ep(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;let t=this.Pt.$p().Qt(),i=this.Pt.hp(),r=this.Yi;t.$o(i,r,e.localY)}Jp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;let e=this.Pt.$p().Qt(),t=this.Pt.hp(),i=this.Yi;this.Op&&(this.Op=!1,e.qo(t,i))}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;let t=this.Pt.$p().Qt(),i=this.Pt.hp();this.Op=!1,t.qo(i,this.Yi)}Qp(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.In()}tv(e){this.Yi!==null&&(!this.Pt.$p().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Vl()||this.pv(1))}sp(e){this.pv(0)}ev(){let e=[],t=this.Yi===null?void 0:this.Yi;return(i=>{for(let r=0;r<i.length;++r){let s=i[r].Ws(this.Pt.hp(),t);for(let o=0;o<s.length;o++)e.push(s[o])}})(this.Pt.hp().Dt()),e}ov({context:e,bitmapSize:t}){let{width:i,height:r}=t,s=this.Pt.hp().Qt(),o=s.$(),a=s.Fc();o===a?Xa(e,0,0,i,r,o):by(e,0,0,i,r,o,a)}_v({context:e,bitmapSize:t,horizontalPixelRatio:i}){if(this.Lp===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;let r=Math.max(1,Math.floor(this.iv().S*i)),s;s=this.Yp?t.width-r:0,e.fillRect(s,0,r,t.height)}cv(e){if(this.Lp===null||this.Yi===null)return;let t=this.Yi.Va(),i=this.Yi.N(),r=this.iv(),s=this.Yp?this.Lp.width-r.C:0;i.borderVisible&&i.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=i.borderColor;let c=Math.max(1,Math.floor(l)),u=Math.floor(.5*l),d=Math.round(r.C*a);o.beginPath();for(let h of t)o.rect(Math.floor(s*a),Math.round(h.ka*l)-u,d,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.nv(),o.fillStyle=i.textColor??this.bl.textColor,o.textAlign=this.Yp?"right":"left",o.textBaseline="middle";let a=this.Yp?Math.round(s-r.I):Math.round(s+r.C+r.I),l=t.map(c=>this.Np.Di(o,c.Ga));for(let c=t.length;c--;){let u=t[c];o.fillText(u.Ga,a,u.ka+l[c])}})}lv(){if(this.Lp===null||this.Yi===null)return;let e=this.Lp.height/2,t=[],i=this.Yi.Dt().slice(),r=this.Pt.hp(),s=this.iv();this.Yi===r.$n()&&this.Pt.hp().Dt().forEach(l=>{r.Un(l)&&i.push(l)});let o=this.Yi.ba()[0],a=this.Yi;i.forEach(l=>{let c=l.Ws(r,a);c.forEach(u=>{u.Wi(null),u.Hi()&&t.push(u)}),o===l&&c.length>0&&(e=c[0].Bi())}),t.forEach(l=>l.Wi(l.Bi())),this.Yi.N().alignLabels&&this.vv(t,s,e)}vv(e,t,i){if(this.Lp===null)return;let r=e.filter(o=>o.Bi()<=i),s=e.filter(o=>o.Bi()>i);r.sort((o,a)=>a.Bi()-o.Bi()),r.length&&s.length&&s.push(r[0]),s.sort((o,a)=>o.Bi()-a.Bi());for(let o of e){let a=Math.floor(o.$t(t)/2),l=o.Bi();l>-a&&l<a&&o.Wi(a),l>this.Lp.height-a&&l<this.Lp.height+a&&o.Wi(this.Lp.height-a)}ry(r,1,this.Lp.height,t),ry(s,-1,this.Lp.height,t)}dv(e){if(this.Lp===null)return;let t=this.ev(),i=this.iv(),r=this.Yp?"right":"left";t.forEach(s=>{s.Ui()&&s.Tt(C(this.Yi)).nt(e,i,this.Np,r)})}fv(e){if(this.Lp===null||this.Yi===null)return;let t=this.Pt.$p().Qt(),i=[],r=this.Pt.hp(),s=t._c().Ws(r,this.Yi);s.length&&i.push(s);let o=this.iv(),a=this.Yp?"right":"left";i.forEach(l=>{l.forEach(c=>{c.Tt(C(this.Yi)).nt(e,o,this.Np,a)})})}pv(e){this.Yf.style.cursor=e===1?"ns-resize":"default"}ul(){let e=this.sv();this.Wp<e&&this.Pt.$p().Qt().Bh(),this.Wp=e}nv(){return Na(this.bl.fontSize,this.bl.fontFamily)}};function yC(n,e){return n.Jh?.(e)??[]}function sy(n,e){return n.Fs?.(e)??[]}function oy(n,e){return n.us?.(e)??[]}function DC(n,e){return n.Xh?.(e)??[]}var Fh=class n{constructor(e,t){this.Lp=z({width:0,height:0}),this.mv=null,this.wv=null,this.gv=null,this.Mv=null,this.bv=!1,this.Sv=new X,this.xv=new X,this.Cv=0,this.Pv=!1,this.kv=null,this.yv=!1,this.Tv=null,this.Rv=null,this.Hp=!1,this.Up=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.qp=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.Dp=e,this.Dv=t,this.Dv.t_().i(this.Vv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";let i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Bv=document.createElement("td"),this.Bv.style.padding="0",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Iv.appendChild(i),this.Zp=Un(i,z({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);let r=this.Zp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Gp=Un(i,z({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);let s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.qf=document.createElement("tr"),this.qf.appendChild(this.Bv),this.qf.appendChild(this.Iv),this.qf.appendChild(this.Ev),this.Av(),this.Of=new Bi(this.Gp.canvasElement,this,{hf:()=>this.kv===null&&!this.Dp.N().handleScroll.vertTouchDrag,af:()=>this.kv===null&&!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.mv!==null&&this.mv.m(),this.wv!==null&&this.wv.m(),this.gv=null,this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Hn(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Hn(this.Zp.canvasElement),this.Zp.dispose(),this.Dv!==null&&(this.Dv.t_().u(this),this.Dv.m()),this.Of.m()}hp(){return C(this.Dv)}zv(e){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=e,this.Dv!==null&&this.Dv.t_().i(n.prototype.Vv.bind(this),this,!0),this.Av(),this.Dp.Uf().indexOf(this)===this.Dp.Uf().length-1?(this.gv=this.gv??new Ph(this.Iv,this.Dp),this.gv.kt()):(this.gv?.Ip(),this.gv=null)}$p(){return this.Dp}Xf(){return this.qf}Av(){if(this.Dv!==null&&(this.Lv(),this.ts().js().length!==0)){if(this.mv!==null){let e=this.Dv.Wo();this.mv._s(C(e))}if(this.wv!==null){let e=this.Dv.Ho();this.wv._s(C(e))}}}Ov(){this.mv!==null&&this.mv.kt(),this.wv!==null&&this.wv.kt()}Io(){return this.Dv!==null?this.Dv.Io():0}Bo(e){this.Dv&&this.Dv.Bo(e)}if(e){if(!this.Dv)return;this.Nv();let t=e.localX,i=e.localY;this.Fv(t,i,e)}bf(e){this.Nv(),this.Wv(),this.Fv(e.localX,e.localY,e)}sf(e){if(!this.Dv)return;this.Nv();let t=e.localX,i=e.localY;this.Fv(t,i,e)}vf(e){this.Dv!==null&&(this.Nv(),this.Hv(e))}Kd(e){this.Dv!==null&&this.Uv(this.xv,e)}$d(e){this.Kd(e)}uf(e){this.Nv(),this.$v(e),this.Fv(e.localX,e.localY,e)}pf(e){this.Dv!==null&&(this.Nv(),this.Pv=!1,this.qv(e))}ff(e){this.Dv!==null&&this.Hv(e)}If(e){if(this.Pv=!0,this.kv===null){let t={x:e.localX,y:e.localY};this.Yv(t,t,e)}}Vf(e){this.Dv!==null&&(this.Nv(),this.Dv.Qt().ac(null),this.jv())}Kv(){return this.Sv}Xv(){return this.xv}Pf(){this.Cv=1,this.ts().hn()}kf(e,t){if(!this.Dp.N().handleScale.pinch)return;let i=5*(t-this.Cv);this.Cv=t,this.ts().Mc(e._t,i)}gf(e){this.Pv=!1,this.yv=this.kv!==null,this.Wv();let t=this.ts()._c();this.kv!==null&&t.Vt()&&(this.Tv={x:t.si(),y:t.ni()},this.kv={x:e.localX,y:e.localY})}lf(e){if(this.Dv===null)return;let t=e.localX,i=e.localY;if(this.kv===null)this.$v(e);else{this.yv=!1;let r=C(this.Tv),s=r.x+(t-this.kv.x),o=r.y+(i-this.kv.y);this.Fv(s,o,e)}}df(e){this.$p().N().trackingMode.exitMode===0&&(this.yv=!0),this.Zv(),this.qv(e)}jn(e,t){let i=this.Dv;return i===null?null:My(i,e,t)}Gv(e,t){C(t==="left"?this.mv:this.wv).rv(z({width:e,height:this.Lp.height}))}Zf(){return this.Lp}rv(e){mt(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Jv(){let e=C(this.Dv);e.Fo(e.Wo()),e.Fo(e.Ho());for(let t of e.ba())if(e.Un(t)){let i=t.Ft();i!==null&&e.Fo(i),t.Ns()}for(let t of e.s_())t.Ns()}Gf(){return this.Zp.bitmapSize}Jf(e,t,i){let r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,t,i)}av(e){if(e===0||this.Dv===null)return;e>1&&this.Jv(),this.mv!==null&&this.mv.av(e),this.wv!==null&&this.wv.av(e);let t={colorSpace:this.Dp.N().layout.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();let r=Mt(this.Zp,t);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.ov(s)}),this.Dv&&(this.Qv(r,yC),this.tm(r),this.Qv(r,sy),this.Qv(r,oy)))}this.Gp.applySuggestedBitmapSize();let i=Mt(this.Gp,t);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.im(i),this.Qv(i,DC),this.Qv(i,oy))}sm(){return this.mv}nm(){return this.wv}uv(e,t){this.Qv(e,t)}Vv(){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=null}Hv(e){this.Uv(this.Sv,e)}Uv(e,t){let i=t.localX,r=t.localY;e.v()&&e.p(this.ts().Et().uu(i),{x:i,y:r},t)}ov({context:e,bitmapSize:t}){let{width:i,height:r}=t,s=this.ts(),o=s.$(),a=s.Fc();o===a?Xa(e,0,0,i,r,a):by(e,0,0,i,r,o,a)}tm(e){let t=C(this.Dv),i=t.i_().lr().Tt(t);i!==null&&i.nt(e,!1)}im(e){this.rm(e,sy,xa,this.ts()._c())}Qv(e,t){let i=C(this.Dv),r=i.Dt(),s=i.s_();for(let o of s)this.rm(e,t,kh,o);for(let o of r)this.rm(e,t,kh,o);for(let o of s)this.rm(e,t,xa,o);for(let o of r)this.rm(e,t,xa,o)}rm(e,t,i,r){let s=C(this.Dv),o=s.Qt().hc(),a=o!==null&&o.n_===r,l=o!==null&&a&&o.e_!==void 0?o.e_.Xn:void 0;Oh(t,c=>i(c,e,a,l),r,s)}Lv(){if(this.Dv===null)return;let e=this.Dp,t=this.Dv.Wo().N().visible,i=this.Dv.Ho().N().visible;t||this.mv===null||(this.Bv.removeChild(this.mv.Xf()),this.mv.m(),this.mv=null),i||this.wv===null||(this.Ev.removeChild(this.wv.Xf()),this.wv.m(),this.wv=null);let r=e.Qt().Vc();t&&this.mv===null&&(this.mv=new Wa(this,e.N(),r,"left"),this.Bv.appendChild(this.mv.Xf())),i&&this.wv===null&&(this.wv=new Wa(this,e.N(),r,"right"),this.Ev.appendChild(this.wv.Xf()))}hm(e){return e.Bf&&this.Pv||this.kv!==null}am(e){return Math.max(0,Math.min(e,this.Lp.width-1))}lm(e){return Math.max(0,Math.min(e,this.Lp.height-1))}Fv(e,t,i){this.ts().yc(this.am(e),this.lm(t),i,C(this.Dv))}jv(){this.ts().Rc()}Zv(){this.yv&&(this.kv=null,this.jv())}Yv(e,t,i){this.kv=e,this.yv=!1,this.Fv(t.x,t.y,i);let r=this.ts()._c();this.Tv={x:r.si(),y:r.ni()}}ts(){return this.Dp.Qt()}qv(e){if(!this.bv)return;let t=this.ts(),i=this.hp();if(t.Ko(i,i.ys()),this.Mv=null,this.bv=!1,t.Cc(),this.Rv!==null){let r=performance.now(),s=t.Et();this.Rv.le(s.wu(),r),this.Rv.Tu(r)||t._n(this.Rv)}}Nv(){this.kv=null}Wv(){if(this.Dv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)C(document.activeElement).blur();else{let e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Dv.ys().Ki()&&this.ts().Et().Ki()}}$v(e){if(this.Dv===null)return;let t=this.ts(),i=t.Et();if(i.Ki())return;let r=this.Dp.N(),s=r.handleScroll,o=r.kineticScroll;if((!s.pressedMouseMove||e.Bf)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!e.Bf))return;let a=this.Dv.ys(),l=performance.now();if(this.Mv!==null||this.hm(e)||(this.Mv={x:e.clientX,y:e.clientY,ed:l,om:e.localX,_m:e.localY}),this.Mv!==null&&!this.bv&&(this.Mv.x!==e.clientX||this.Mv.y!==e.clientY)){if(e.Bf&&o.touch||!e.Bf&&o.mouse){let c=i.vu();this.Rv=new Rh(.2/c,7/c,.997,15/c),this.Rv.Cp(i.wu(),this.Mv.ed)}else this.Rv=null;a.Ki()||t.Yo(this.Dv,a,e.localY),t.Sc(e.localX),this.bv=!0}this.bv&&(a.Ki()||t.jo(this.Dv,a,e.localY),t.xc(e.localX),this.Rv!==null&&this.Rv.Cp(i.wu(),l))}},Ya=class{constructor(e,t,i,r,s){this.xt=!0,this.Lp=z({width:0,height:0}),this.Up=()=>this.av(3),this.Yp=e==="left",this.Gu=i.Vc,this.Ps=t,this.um=r,this.dm=s,this.Yf=document.createElement("div"),this.Yf.style.width="25px",this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Zp=Un(this.Yf,z({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up)}m(){this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Hn(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.Yf}Zf(){return this.Lp}rv(e){mt(this.Lp,e)||(this.Lp=e,this.Zp.resizeCanvasElement(e),this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.xt=!0)}av(e){if(e<3&&!this.xt||this.Lp.width===0||this.Lp.height===0)return;this.xt=!1,this.Zp.applySuggestedBitmapSize();let t=Mt(this.Zp,{colorSpace:this.Ps.layout.colorSpace});t!==null&&t.useBitmapCoordinateSpace(i=>{this.ov(i),this._v(i)})}Gf(){return this.Zp.bitmapSize}Jf(e,t,i){let r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,t,i)}_v({context:e,bitmapSize:t,horizontalPixelRatio:i,verticalPixelRatio:r}){if(!this.um())return;e.fillStyle=this.Ps.timeScale.borderColor;let s=Math.floor(this.Gu.N().S*i),o=Math.floor(this.Gu.N().S*r),a=this.Yp?t.width-s:0;e.fillRect(a,0,s,o)}ov({context:e,bitmapSize:t}){Xa(e,0,0,t.width,t.height,this.dm())}};function nf(n){return e=>e.ia?.(n)??[]}var EC=nf("normal"),bC=nf("top"),wC=nf("bottom"),Lh=class{constructor(e,t){this.fm=null,this.pm=null,this.M=null,this.vm=!1,this.Lp=z({width:0,height:0}),this.wm=new X,this.Np=new Oi(5),this.Hp=!1,this.Up=()=>{this.Hp||this.Dp.Qt().ar()},this.qp=()=>{this.Hp||this.Dp.Qt().ar()},this.Dp=e,this.o_=t,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.gm=document.createElement("td"),this.gm.style.padding="0",this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.Yf=document.createElement("td"),this.Yf.style.height="25px",this.Yf.style.padding="0",this.bm=document.createElement("div"),this.bm.style.width="100%",this.bm.style.height="100%",this.bm.style.position="relative",this.bm.style.overflow="hidden",this.Yf.appendChild(this.bm),this.Zp=Un(this.bm,z({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);let i=this.Zp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Gp=Un(this.bm,z({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);let r=this.Gp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp.appendChild(this.gm),this.kp.appendChild(this.Yf),this.kp.appendChild(this.Mm),this.Sm(),this.Dp.Qt().Vo().i(this.Sm.bind(this),this),this.Of=new Bi(this.Gp.canvasElement,this,{hf:()=>!0,af:()=>!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.Of.m(),this.fm!==null&&this.fm.m(),this.pm!==null&&this.pm.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Hn(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Hn(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.kp}xm(){return this.fm}Cm(){return this.pm}bf(e){if(this.vm)return;this.vm=!0;let t=this.Dp.Qt();!t.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&t.gc(e.localX)}gf(e){this.bf(e)}Sf(){let e=this.Dp.Qt();!e.Et().Ki()&&this.vm&&(this.vm=!1,this.Dp.N().handleScale.axisPressedMouseMove.time&&e.kc())}uf(e){let t=this.Dp.Qt();!t.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&t.Pc(e.localX)}lf(e){this.uf(e)}pf(){this.vm=!1;let e=this.Dp.Qt();e.Et().Ki()&&!this.Dp.N().handleScale.axisPressedMouseMove.time||e.kc()}df(){this.pf()}Kd(){this.Dp.N().handleScale.axisDoubleClickReset.time&&this.Dp.Qt().cn()}$d(){this.Kd()}if(){this.Dp.Qt().N().handleScale.axisPressedMouseMove.time&&this.pv(1)}Vf(){this.pv(0)}Zf(){return this.Lp}Pm(){return this.wm}km(e,t,i){mt(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.wm.p(e)),this.fm!==null&&this.fm.rv(z({width:t,height:e.height})),this.pm!==null&&this.pm.rv(z({width:i,height:e.height}))}ym(){let e=this.Tm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Rm)}kt(){this.Dp.Qt().Et().Va()}Gf(){return this.Zp.bitmapSize}Jf(e,t,i){let r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,t,i)}av(e){if(e===0)return;let t={colorSpace:this.Ps.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();let r=Mt(this.Zp,t);r!==null&&(r.useBitmapCoordinateSpace(s=>{this.ov(s),this._v(s),this.Dm(r,wC)}),this.cv(r),this.Dm(r,EC)),this.fm!==null&&this.fm.av(e),this.pm!==null&&this.pm.av(e)}this.Gp.applySuggestedBitmapSize();let i=Mt(this.Gp,t);i!==null&&(i.useBitmapCoordinateSpace(({context:r,bitmapSize:s})=>{r.clearRect(0,0,s.width,s.height)}),this.Vm([...this.Dp.Qt().js(),this.Dp.Qt()._c()],i),this.Dm(i,bC))}Dm(e,t){let i=this.Dp.Qt().js();for(let r of i)Oh(t,s=>kh(s,e,!1,void 0),r,void 0);for(let r of i)Oh(t,s=>xa(s,e,!1,void 0),r,void 0)}ov({context:e,bitmapSize:t}){Xa(e,0,0,t.width,t.height,this.Dp.Qt().Fc())}_v({context:e,bitmapSize:t,verticalPixelRatio:i}){if(this.Dp.N().timeScale.borderVisible){e.fillStyle=this.Im();let r=Math.max(1,Math.floor(this.Tm().S*i));e.fillRect(0,0,t.width,r)}}cv(e){let t=this.Dp.Qt().Et(),i=t.Va();if(!i||i.length===0)return;let r=this.o_.maxTickMarkWeight(i),s=this.Tm(),o=t.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.Im(),a.fillStyle=this.Im();let u=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();let h=Math.round(s.C*c);for(let f=i.length;f--;){let p=Math.round(i[f].coord*l);a.rect(p-d,0,u,h)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{let l=s.S+s.C+s.A+s.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.nv();for(let c of i)if(c.weight<r){let u=c.needAlignCoordinate?this.Bm(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}this.Dp.N().timeScale.allowBoldLabels&&(a.font=this.Em());for(let c of i)if(c.weight>=r){let u=c.needAlignCoordinate?this.Bm(a,c.coord,c.label):c.coord;a.fillText(c.label,u,l)}})}Bm(e,t,i){let r=this.Np.Vi(e,i),s=r/2,o=Math.floor(t-s)+.5;return o<0?t+=Math.abs(0-o):o+r>this.Lp.width&&(t-=Math.abs(this.Lp.width-(o+r))),t}Vm(e,t){let i=this.Tm();for(let r of e)for(let s of r.cs())s.Tt().nt(t,i)}Im(){return this.Dp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}nv(){return Na(this.F(),this.Ps.fontFamily)}Em(){return Na(this.F(),this.Ps.fontFamily,"bold")}Tm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Oi,Rm:0});let e=this.M,t=this.nv();if(e.k!==t){let i=this.F();e.P=i,e.k=t,e.A=3*i/12,e.V=3*i/12,e.Ji=9*i/12,e.L=0,e.Rm=4*i/12,e.Gi.In()}return this.M}pv(e){this.Yf.style.cursor=e===1?"ew-resize":"default"}Sm(){let e=this.Dp.Qt(),t=e.N();t.leftPriceScale.visible||this.fm===null||(this.gm.removeChild(this.fm.Xf()),this.fm.m(),this.fm=null),t.rightPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Xf()),this.pm.m(),this.pm=null);let i={Vc:this.Dp.Qt().Vc()},r=()=>t.leftPriceScale.borderVisible&&e.Et().N().borderVisible,s=()=>e.Fc();t.leftPriceScale.visible&&this.fm===null&&(this.fm=new Ya("left",t,i,r,s),this.gm.appendChild(this.fm.Xf())),t.rightPriceScale.visible&&this.pm===null&&(this.pm=new Ya("right",t,i,r,s),this.Mm.appendChild(this.pm.Xf()))}},_C=!!Vi&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(n=>n.brand.includes("Chromium"))&&!!Vi&&(navigator?.userAgentData?.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0),Vh=class{constructor(e,t,i){var r;this.Am=[],this.zm=[],this.Lm=0,this.sl=0,this.Mo=0,this.Om=0,this.Nm=0,this.Fm=null,this.Wm=!1,this.Sv=new X,this.xv=new X,this.Ku=new X,this.Hm=null,this.Um=null,this.Rp=e,this.Ps=t,this.o_=i,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(r=this.kp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.$m=document.createElement("table"),this.$m.setAttribute("cellspacing","0"),this.kp.appendChild(this.$m),this.qm=this.Ym.bind(this),Vd(this.Ps)&&this.jm(!0),this.ts=new Mh(this.Zu.bind(this),this.Ps,i),this.Qt().uc().i(this.Km.bind(this),this),this.Xm=new Lh(this,this.o_),this.$m.appendChild(this.Xm.Xf());let s=t.autoSize&&this.Zm(),o=this.Ps.width,a=this.Ps.height;if(s||o===0||a===0){let l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Gm(o,a),this.Jm(),e.appendChild(this.kp),this.Qm(),this.ts.Et().Iu().i(this.ts.Bh.bind(this.ts),this),this.ts.Vo().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}Uf(){return this.Am}tw(){return this.Xm}m(){this.jm(!1),this.Lm!==0&&window.cancelAnimationFrame(this.Lm),this.ts.uc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(let e of this.Am)this.$m.removeChild(e.Xf()),e.Kv().u(this),e.Xv().u(this),e.m();this.Am=[];for(let e of this.zm)this.iw(e);this.zm=[],C(this.Xm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Ku.m(),this.Sv.m(),this.xv.m(),this.sw()}Gm(e,t,i=!1){if(this.sl===t&&this.Mo===e)return;let r=(function(a){let l=Math.floor(a.width),c=Math.floor(a.height);return z({width:l-l%2,height:c-c%2})})(z({width:e,height:t}));this.sl=r.height,this.Mo=r.width;let s=this.sl+"px",o=this.Mo+"px";C(this.kp).style.height=s,C(this.kp).style.width=o,this.$m.style.height=s,this.$m.style.width=o,i?this.nw(ge.gn(),performance.now()):this.ts.Bh()}av(e){e===void 0&&(e=ge.gn());for(let t=0;t<this.Am.length;t++)this.Am[t].av(e.en(t).tn);this.Ps.timeScale.visible&&this.Xm.av(e.nn())}hr(e){let t=Vd(this.Ps);this.ts.hr(e);let i=Vd(this.Ps);i!==t&&this.jm(i),e.layout?.panes&&this.ew(),this.Qm(),this.rw(e)}Kv(){return this.Sv}Xv(){return this.xv}uc(){return this.Ku}hw(){this.Fm!==null&&(this.nw(this.Fm,performance.now()),this.Fm=null);let e=this.aw(null),t=document.createElement("canvas");t.width=e.width,t.height=e.height;let i=C(t.getContext("2d"));return this.aw(i),t}lw(e){return e==="left"&&!this.ow()||e==="right"&&!this._w()||this.Am.length===0?0:C(e==="left"?this.Am[0].sm():this.Am[0].nm()).hv()}uw(){return this.Ps.autoSize&&this.Hm!==null}tp(){return this.kp}cw(e){this.Um=e,this.Um?this.tp().style.setProperty("cursor",e):this.tp().style.removeProperty("cursor")}dw(){return this.Um}fw(e){return Ie(this.Am[e]).Zf()}ew(){this.zm.forEach(e=>{e.kt()})}rw(e){(e.autoSize!==void 0||!this.Hm||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Hm&&this.Zm(),e.autoSize===!1&&this.Hm!==null&&this.sw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Gm(e.width||this.Mo,e.height||this.sl))}aw(e){let t=0,i=0,r=this.Am[0],s=(a,l)=>{let c=0;for(let u=0;u<this.Am.length;u++){let d=this.Am[u],h=C(a==="left"?d.sm():d.nm()),f=h.Gf();if(e!==null&&h.Jf(e,l,c),c+=f.height,u<this.Am.length-1){let p=this.zm[u],g=p.Gf();e!==null&&p.Jf(e,l,c),c+=g.height}}};this.ow()&&(s("left",0),t+=C(r.sm()).Gf().width);for(let a=0;a<this.Am.length;a++){let l=this.Am[a],c=l.Gf();if(e!==null&&l.Jf(e,t,i),i+=c.height,a<this.Am.length-1){let u=this.zm[a],d=u.Gf();e!==null&&u.Jf(e,t,i),i+=d.height}}t+=r.Gf().width,this._w()&&(s("right",t),t+=C(r.nm()).Gf().width);let o=(a,l,c)=>{C(a==="left"?this.Xm.xm():this.Xm.Cm()).Jf(C(e),l,c)};if(this.Ps.timeScale.visible){let a=this.Xm.Gf();if(e!==null){let l=0;this.ow()&&(o("left",l,i),l=C(r.sm()).Gf().width),this.Xm.Jf(e,l,i),l+=a.width,this._w()&&o("right",l,i)}i+=a.height}return z({width:t,height:i})}pw(){let e=0,t=0,i=0;for(let v of this.Am)this.ow()&&(t=Math.max(t,C(v.sm()).sv(),this.Ps.leftPriceScale.minimumWidth)),this._w()&&(i=Math.max(i,C(v.nm()).sv(),this.Ps.rightPriceScale.minimumWidth)),e+=v.Io();t=Nh(t),i=Nh(i);let r=this.Mo,s=this.sl,o=Math.max(r-t-i,0),a=1*this.zm.length,l=this.Ps.timeScale.visible,c=l?Math.max(this.Xm.ym(),this.Ps.timeScale.minimumHeight):0;var u;c=(u=c)+u%2;let d=a+c,h=s<d?0:s-d,f=h/e,p=0,g=window.devicePixelRatio||1;for(let v=0;v<this.Am.length;++v){let y=this.Am[v];y.zv(this.ts.$s()[v]);let S=0,R=0;R=v===this.Am.length-1?Math.ceil((h-p)*g)/g:Math.round(y.Io()*f*g)/g,S=Math.max(R,2),p+=S,y.rv(z({width:o,height:S})),this.ow()&&y.Gv(t,"left"),this._w()&&y.Gv(i,"right"),y.hp()&&this.ts.cc(y.hp(),S)}this.Xm.km(z({width:l?o:0,height:c}),l?t:0,l?i:0),this.ts.Eo(o),this.Om!==t&&(this.Om=t),this.Nm!==i&&(this.Nm=i)}jm(e){e?this.kp.addEventListener("wheel",this.qm,{passive:!1}):this.kp.removeEventListener("wheel",this.qm)}mw(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return _C?1/window.devicePixelRatio:1}Ym(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;let t=this.mw(e),i=t*e.deltaX/100,r=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.Ps.handleScale.mouseWheel){let s=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().Mc(o,s)}i!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().bc(-80*i)}nw(e,t){let i=e.nn();i===3&&this.ww(),i!==3&&i!==2||(this.gw(e),this.Mw(e,t),this.Xm.kt(),this.Am.forEach(r=>{r.Ov()}),this.Fm?.nn()===3&&(this.Fm.vn(e),this.ww(),this.gw(this.Fm),this.Mw(this.Fm,t),e=this.Fm,this.Fm=null)),this.av(e)}Mw(e,t){for(let i of e.pn())this.mn(i,t)}gw(e){let t=this.ts.$s();for(let i=0;i<t.length;i++)e.en(i).sn&&t[i].Go()}mn(e,t){let i=this.ts.Et();switch(e.an){case 0:i.Eu();break;case 1:i.Au(e.Wt);break;case 2:i.dn(e.Wt);break;case 3:i.fn(e.Wt);break;case 4:i.bu();break;case 5:e.Wt.Tu(t)||i.fn(e.Wt.Ru(t))}}Zu(e){this.Fm!==null?this.Fm.vn(e):this.Fm=e,this.Wm||(this.Wm=!0,this.Lm=window.requestAnimationFrame(t=>{if(this.Wm=!1,this.Lm=0,this.Fm!==null){let i=this.Fm;this.Fm=null,this.nw(i,t);for(let r of i.pn())if(r.an===5&&!r.Wt.Tu(t)){this.Qt()._n(r.Wt);break}}}))}ww(){this.Jm()}iw(e){this.$m.removeChild(e.Xf()),e.m()}Jm(){let e=this.ts.$s(),t=e.length,i=this.Am.length;for(let r=t;r<i;r++){let s=Ie(this.Am.pop());this.$m.removeChild(s.Xf()),s.Kv().u(this),s.Xv().u(this),s.m();let o=this.zm.pop();o!==void 0&&this.iw(o)}for(let r=i;r<t;r++){let s=new Fh(this,e[r]);if(s.Kv().i(this.bw.bind(this,s),this),s.Xv().i(this.Sw.bind(this,s),this),this.Am.push(s),r>0){let o=new Ah(this,r-1,r);this.zm.push(o),this.$m.insertBefore(o.Xf(),this.Xm.Xf())}this.$m.insertBefore(s.Xf(),this.Xm.Xf())}for(let r=0;r<t;r++){let s=e[r],o=this.Am[r];o.hp()!==s?o.zv(s):o.Av()}this.Qm(),this.pw()}xw(e,t,i,r){let s=new Map;e!==null&&this.ts.js().forEach(d=>{let h=d.Xs().Fr(e);h!==null&&s.set(d,h)});let o;if(e!==null){let d=this.ts.Et().ss(e)?.originalTime;d!==void 0&&(o=d)}let a=this.Qt().hc(),l=a!==null&&a.n_ instanceof Li?a.n_:void 0,c=a!==null&&a.e_!==void 0?a.e_.Kn:void 0,u=this.Cw(r);return{Pw:o,Re:e??void 0,kw:t??void 0,yw:u!==-1?u:void 0,Tw:l,Rw:s,Dw:c,Vw:i??void 0}}Cw(e){let t=-1;if(e)t=this.Am.indexOf(e);else{let i=this.Qt()._c().Us();i!==null&&(t=this.Qt().$s().indexOf(i))}return t}bw(e,t,i,r){this.Sv.p(()=>this.xw(t,i,r,e))}Sw(e,t,i,r){this.xv.p(()=>this.xw(t,i,r,e))}Km(e,t,i){this.cw(this.Qt().hc()?.h_??null),this.Ku.p(()=>this.xw(e,t,i))}Qm(){let e=this.Ps.timeScale.visible?"":"none";this.Xm.Xf().style.display=e}ow(){return this.Am[0].hp().Wo().N().visible}_w(){return this.Am[0].hp().Ho().N().visible}Zm(){return"ResizeObserver"in window&&(this.Hm=new ResizeObserver(e=>{let t=e[e.length-1];t&&this.Gm(t.contentRect.width,t.contentRect.height)}),this.Hm.observe(this.Rp,{box:"border-box"}),!0)}sw(){this.Hm!==null&&this.Hm.disconnect(),this.Hm=null}};function Vd(n){return!!(n.handleScroll.mouseWheel||n.handleScale.mouseWheel)}function CC(n){return n.open===void 0&&n.value===void 0}function SC(n){return(function(e){return e.open!==void 0})(n)||(function(e){return e.value!==void 0})(n)}function ay(n,e,t,i){let r=t.value,s={Re:e,wt:n,Wt:[r,r,r,r],Pw:i};return t.color!==void 0&&(s.R=t.color),s}function MC(n,e,t,i){let r=t.value,s={Re:e,wt:n,Wt:[r,r,r,r],Pw:i};return t.lineColor!==void 0&&(s.vt=t.lineColor),t.topColor!==void 0&&(s.mr=t.topColor),t.bottomColor!==void 0&&(s.wr=t.bottomColor),s}function IC(n,e,t,i){let r=t.value,s={Re:e,wt:n,Wt:[r,r,r,r],Pw:i};return t.topLineColor!==void 0&&(s.gr=t.topLineColor),t.bottomLineColor!==void 0&&(s.Mr=t.bottomLineColor),t.topFillColor1!==void 0&&(s.br=t.topFillColor1),t.topFillColor2!==void 0&&(s.Sr=t.topFillColor2),t.bottomFillColor1!==void 0&&(s.Cr=t.bottomFillColor1),t.bottomFillColor2!==void 0&&(s.Pr=t.bottomFillColor2),s}function TC(n,e,t,i){let r={Re:e,wt:n,Wt:[t.open,t.high,t.low,t.close],Pw:i};return t.color!==void 0&&(r.R=t.color),r}function xC(n,e,t,i){let r={Re:e,wt:n,Wt:[t.open,t.high,t.low,t.close],Pw:i};return t.color!==void 0&&(r.R=t.color),t.borderColor!==void 0&&(r.Ht=t.borderColor),t.wickColor!==void 0&&(r.vr=t.wickColor),r}function NC(n,e,t,i,r){let s=Ie(r)(t),o=Math.max(...s),a=Math.min(...s),l=s[s.length-1],c=[l,o,a,l],f=t,{time:u,color:d}=f,h=cl(f,["time","color"]);return{Re:e,wt:n,Wt:c,Pw:i,se:h,R:d}}function Yr(n){return n.Wt!==void 0}function ly(n,e){return e.customValues!==void 0&&(n.Iw=e.customValues),n}function Bn(n){return(e,t,i,r,s,o)=>(function(a,l){return l?l(a):CC(a)})(i,o)?ly({wt:e,Re:t,Pw:r},i):ly(n(e,t,i,r,s),i)}function cy(n){return{Candlestick:Bn(xC),Bar:Bn(TC),Area:Bn(MC),Baseline:Bn(IC),Histogram:Bn(ay),Line:Bn(ay),Custom:Bn(NC)}[n]}function uy(n){return{Re:0,Bw:new Map,Hh:n}}function dy(n,e){if(n!==void 0&&n.length!==0)return{Ew:e.key(n[0].wt),Aw:e.key(n[n.length-1].wt)}}function hy(n){let e;return n.forEach(t=>{e===void 0&&(e=t.Pw)}),Ie(e)}var Bh=class{constructor(e){this.zw=new Map,this.Lw=new Map,this.Ow=new Map,this.Nw=[],this.o_=e}m(){this.zw.clear(),this.Lw.clear(),this.Ow.clear(),this.Nw=[]}Fw(e,t){let i=this.zw.size!==0,r=!1,s=this.Lw.get(e);if(s!==void 0)if(this.Lw.size===1)i=!1,r=!0,this.zw.clear();else for(let l of this.Nw)l.pointData.Bw.delete(e)&&(r=!0);let o=[];if(t.length!==0){let l=t.map(f=>f.time),c=this.o_.createConverterToInternalObj(t),u=cy(e.Rr()),d=e.da(),h=e.pa();o=t.map((f,p)=>{let g=c(f.time),v=this.o_.key(g),y=this.zw.get(v);y===void 0&&(y=uy(g),this.zw.set(v,y),r=!0);let S=u(g,y.Re,f,l[p],d,h);return y.Bw.set(e,S),S})}i&&this.Ww(),this.Hw(e,o);let a=-1;if(r){let l=[];this.zw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:hy(c.Bw)})}),l.sort((c,u)=>this.o_.key(c.time)-this.o_.key(u.time)),a=this.Uw(l)}return this.$w(e,a,(function(l,c,u){let d=dy(l,u),h=dy(c,u);if(d!==void 0&&h!==void 0)return{qw:!1,zh:d.Aw>=h.Aw&&d.Ew>=h.Ew}})(this.Lw.get(e),s,this.o_))}Ec(e){return this.Fw(e,[])}Yw(e,t,i){let r=t;(function(v){v.Pw===void 0&&(v.Pw=v.time)})(r),this.o_.preprocessData(t);let s=this.o_.createConverterToInternalObj([t])(t.time),o=this.Ow.get(e);if(!i&&o!==void 0&&this.o_.key(s)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${s}`);let a=this.zw.get(this.o_.key(s));if(i&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");let l=a===void 0;a===void 0&&(a=uy(s),this.zw.set(this.o_.key(s),a));let c=cy(e.Rr()),u=e.da(),d=e.pa(),h=c(s,a.Re,t,r.Pw,u,d);a.Bw.set(e,h),i?this.jw(e,h,a.Re):this.Kw(e,h);let f={zh:Yr(h),qw:i};if(!l)return this.$w(e,-1,f);let p={timeWeight:0,time:a.Hh,pointData:a,originalTime:hy(a.Bw)},g=Fi(this.Nw,this.o_.key(p.time),(v,y)=>this.o_.key(v.time)<y);this.Nw.splice(g,0,p);for(let v=g;v<this.Nw.length;++v)Bd(this.Nw[v].pointData,v);return this.o_.fillWeightsForPoints(this.Nw,g),this.$w(e,g,f)}Kw(e,t){let i=this.Lw.get(e);i===void 0&&(i=[],this.Lw.set(e,i));let r=i.length!==0?i[i.length-1]:null;r===null||this.o_.key(t.wt)>this.o_.key(r.wt)?Yr(t)&&i.push(t):Yr(t)?i[i.length-1]=t:i.splice(-1,1),this.Ow.set(e,t.wt)}jw(e,t,i){let r=this.Lw.get(e);if(r===void 0)return;let s=Fi(r,i,(o,a)=>o.Re<a);Yr(t)?r[s]=t:r.splice(s,1)}Hw(e,t){t.length!==0?(this.Lw.set(e,t.filter(Yr)),this.Ow.set(e,t[t.length-1].wt)):(this.Lw.delete(e),this.Ow.delete(e))}Ww(){for(let e of this.Nw)e.pointData.Bw.size===0&&this.zw.delete(this.o_.key(e.time))}Uw(e){let t=-1;for(let i=0;i<this.Nw.length&&i<e.length;++i){let r=this.Nw[i],s=e[i];if(this.o_.key(r.time)!==this.o_.key(s.time)){t=i;break}s.timeWeight=r.timeWeight,Bd(s.pointData,i)}if(t===-1&&this.Nw.length!==e.length&&(t=Math.min(this.Nw.length,e.length)),t===-1)return-1;for(let i=t;i<e.length;++i)Bd(e[i].pointData,i);return this.o_.fillWeightsForPoints(e,t),this.Nw=e,t}Xw(){if(this.Lw.size===0)return null;let e=0;return this.Lw.forEach(t=>{t.length!==0&&(e=Math.max(e,t[t.length-1].Re))}),e}$w(e,t,i){let r={Oo:new Map,Et:{ou:this.Xw()}};if(t!==-1)this.Lw.forEach((s,o)=>{r.Oo.set(o,{se:s,Zw:o===e?i:void 0})}),this.Lw.has(e)||r.Oo.set(e,{se:[],Zw:i}),r.Et.Gw=this.Nw,r.Et.Jw=t;else{let s=this.Lw.get(e);r.Oo.set(e,{se:s||[],Zw:i})}return r}};function Bd(n,e){n.Re=e,n.Bw.forEach(t=>{t.Re=e})}function AC(n,e){return n.wt<e}function RC(n,e){return e<n.wt}function PC(n,e,t){let i=e.Uh(),r=e.bi(),s=Fi(n,i,AC),o=_y(n,r,RC);if(!t)return{from:s,to:o};let a=s,l=o;return s>0&&s<n.length&&n[s].wt>=i&&(a=s-1),o>0&&o<n.length&&n[o-1].wt<=r&&(l=o+1),{from:a,to:l}}var ns=class{constructor(e,t,i){this.Qw=!0,this.tg=!0,this.ig=!0,this.sg=[],this.ng=null,this.Jn=e,this.Qn=t,this.eg=i}kt(e){this.Qw=!0,e==="data"&&(this.tg=!0),e==="options"&&(this.ig=!0)}Tt(){return this.Jn.Vt()?(this.rg(),this.ng===null?null:this.hg):null}ag(){this.sg=this.sg.map(e=>I(I({},e),this.Jn.Rh().Dr(e.wt)))}lg(){this.ng=null}rg(){this.tg&&(this.og(),this.tg=!1),this.ig&&(this.ag(),this.ig=!1),this.Qw&&(this._g(),this.Qw=!1)}_g(){let e=this.Jn.Ft(),t=this.Qn.Et();if(this.lg(),t.Ki()||e.Ki())return;let i=t.Pe();if(i===null||this.Jn.Xs().zr()===0)return;let r=this.Jn.zt();r!==null&&(this.ng=PC(this.sg,i,this.eg),this.ug(e,t,r.Wt),this.cg())}},jh=class{constructor(e,t){this.dg=e,this.Yi=t}nt(e,t,i){this.dg.draw(e,this.Yi,t,i)}},Uh=class extends ns{constructor(e,t,i){super(e,t,!1),this.sh=i,this.hg=new jh(this.sh.renderer(),r=>{let s=e.zt();return s===null?null:e.Ft().Nt(r,s.Wt)})}fa(e){return this.sh.priceValueBuilder(e)}va(e){return this.sh.isWhitespace(e)}og(){let e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>P(I({wt:t.Re,_t:NaN},e.Dr(t.Re)),{fg:t.se}))}ug(e,t){t._u(this.sg,es(this.ng))}cg(){this.sh.update({bars:this.sg.map(kC),barSpacing:this.Qn.Et().vu(),visibleRange:this.ng},this.Jn.N())}};function kC(n){return{x:n._t,time:n.wt,originalData:n.fg,barColor:n.cr}}var OC={color:"#2196f3"},FC=(n,e,t)=>{let i=Qt(t);return new Uh(n,e,i)};function rf(n){let e={value:n.Wt[3],time:n.Pw};return n.Iw!==void 0&&(e.customValues=n.Iw),e}function fy(n){let e=rf(n);return n.R!==void 0&&(e.color=n.R),e}function LC(n){let e=rf(n);return n.vt!==void 0&&(e.lineColor=n.vt),n.mr!==void 0&&(e.topColor=n.mr),n.wr!==void 0&&(e.bottomColor=n.wr),e}function VC(n){let e=rf(n);return n.gr!==void 0&&(e.topLineColor=n.gr),n.Mr!==void 0&&(e.bottomLineColor=n.Mr),n.br!==void 0&&(e.topFillColor1=n.br),n.Sr!==void 0&&(e.topFillColor2=n.Sr),n.Cr!==void 0&&(e.bottomFillColor1=n.Cr),n.Pr!==void 0&&(e.bottomFillColor2=n.Pr),e}function Ty(n){let e={open:n.Wt[0],high:n.Wt[1],low:n.Wt[2],close:n.Wt[3],time:n.Pw};return n.Iw!==void 0&&(e.customValues=n.Iw),e}function BC(n){let e=Ty(n);return n.R!==void 0&&(e.color=n.R),e}function jC(n){let e=Ty(n),{R:t,Ht:i,vr:r}=n;return t!==void 0&&(e.color=t),i!==void 0&&(e.borderColor=i),r!==void 0&&(e.wickColor=r),e}function Hh(n){return{Area:LC,Line:fy,Baseline:VC,Histogram:fy,Bar:BC,Candlestick:jC,Custom:UC}[n]}function UC(n){let e=n.Pw;return P(I({},n.se),{time:e})}var HC={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},$C={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},zC={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Ey,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},jd={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},GC={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function py(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:zC,crosshair:HC,grid:$C,overlayPriceScales:I({},jd),leftPriceScale:P(I({},jd),{visible:!1}),rightPriceScale:P(I({},jd),{visible:!0}),timeScale:GC,localization:{locale:Vi?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}var qa=class{constructor(e,t,i){this.Wf=e,this.pg=t,this.vg=i??0}applyOptions(e){this.Wf.Qt().lc(this.pg,e,this.vg)}options(){return this.Yi().N()}width(){return Ka(this.pg)?this.Wf.lw(this.pg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Wl(new Oe(e.from,e.to))}getVisibleRange(){let e=this.Yi().Qe();return e===null?null:{from:e.$e(),to:e.qe()}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return C(this.Wf.Qt().oc(this.pg,this.vg)).Ft}},$h=class{constructor(e,t,i,r){this.Wf=e,this.Pt=i,this.mg=t,this.wg=r}getHeight(){return this.Pt.$t()}setHeight(e){let t=this.Wf.Qt(),i=t.Hc(this.Pt);t.fc(i,e)}getStretchFactor(){return this.Pt.Io()}setStretchFactor(e){this.Pt.Bo(e),this.Wf.Qt().Bh()}paneIndex(){return this.Wf.Qt().Hc(this.Pt)}moveTo(e){let t=this.paneIndex();t!==e&&(de(e>=0&&e<this.Wf.Uf().length,"Invalid pane index"),this.Wf.Qt().mc(t,e))}getSeries(){return this.Pt.Oo().map(e=>this.mg(e))??[]}getHTMLElement(){let e=this.Wf.Uf();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Xf():null}attachPrimitive(e){this.Pt.ua(e),e.attached&&e.attached({chart:this.wg,requestUpdate:()=>this.Pt.Qt().Bh()})}detachPrimitive(e){this.Pt.ca(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new qa(this.Wf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,t={},i=0){return this.wg.addCustomSeries(e,t,i)}addSeries(e,t={}){return this.wg.addSeries(e,t,this.paneIndex())}},WC={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""},Za=class{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}gg(){return this.ir}},zh=class{constructor(e,t,i,r,s,o){this.Mg=new X,this.Jn=e,this.bg=t,this.Sg=i,this.o_=s,this.wg=r,this.xg=o}m(){this.Mg.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(e){let t=this.Jn.zt();return t===null?null:this.Jn.Ft().Nt(e,t.Wt)}coordinateToPrice(e){let t=this.Jn.zt();return t===null?null:this.Jn.Ft().Ts(e,t.Wt)}barsInLogicalRange(e){if(e===null)return null;let t=new Ni(new jn(e.from,e.to)).k_(),i=this.Jn.Xs();if(i.Ki())return null;let r=i.Fr(t.Uh(),1),s=i.Fr(t.bi(),-1),o=C(i.Lr()),a=C(i.Ks());if(r!==null&&s!==null&&r.Re>s.Re)return{barsBefore:e.from-o,barsAfter:a-e.to};let l={barsBefore:r===null||r.Re===o?e.from-o:r.Re-o,barsAfter:s===null||s.Re===a?a-e.to:a-s.Re};return r!==null&&s!==null&&(l.from=r.Pw,l.to=s.Pw),l}setData(e){this.o_,this.Jn.Rr(),this.bg.Cg(this.Jn,e),this.Pg("full")}update(e,t=!1){this.Jn.Rr(),this.bg.kg(this.Jn,e,t),this.Pg("update")}dataByIndex(e,t){let i=this.Jn.Xs().Fr(e,t);return i===null?null:Hh(this.seriesType())(i)}data(){let e=Hh(this.seriesType());return this.Jn.Xs().Hr().map(t=>e(t))}subscribeDataChanged(e){this.Mg.i(e)}unsubscribeDataChanged(e){this.Mg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return It(this.Jn.N())}priceScale(){return this.Sg.priceScale(this.Jn.Ft().wa(),this.getPane().paneIndex())}createPriceLine(e){let t=ke(It(WC),e),i=this.Jn.Oh(t);return new Za(i)}removePriceLine(e){this.Jn.Nh(e.gg())}priceLines(){return this.Jn.Fh().map(e=>new Za(e))}seriesType(){return this.Jn.Rr()}attachPrimitive(e){this.Jn.ua(e),e.attached&&e.attached({chart:this.wg,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ca(e),e.detached&&e.detached(),this.Jn.Qt().Bh()}getPane(){let e=this.Jn,t=C(this.Jn.Qt().Hn(e));return this.xg(t)}moveToPane(e){this.Jn.Qt().Oc(this.Jn,e)}seriesOrder(){let e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){let t=this.Jn.Qt().Hn(this.Jn);t!==null&&t.Qo(this.Jn,e)}Pg(e){this.Mg.v()&&this.Mg.p(e)}},Gh=class{constructor(e,t,i){this.yg=new X,this.z_=new X,this.wm=new X,this.ts=e,this.uh=e.Et(),this.Xm=t,this.uh.Du().i(this.Tg.bind(this)),this.uh.Vu().i(this.Rg.bind(this)),this.Xm.Pm().i(this.Dg.bind(this)),this.o_=i}m(){this.uh.Du().u(this),this.uh.Vu().u(this),this.Xm.Pm().u(this),this.yg.m(),this.z_.m(),this.wm.m()}scrollPosition(){return this.uh.wu()}scrollToPosition(e,t){t?this.uh.yu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){let e=this.uh.su();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){let t={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},i=this.uh.hu(t);this.ts.zc(i)}getVisibleLogicalRange(){let e=this.uh.iu();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){de(e.from<=e.to,"The from index cannot be after the to index."),this.ts.zc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Eu()}logicalToCoordinate(e){let t=this.ts.Et();return t.Ki()?null:t.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.uu(e)}timeToIndex(e,t){let i=this.o_.convertHorzItemToInternal(e);return this.uh.J_(i,t)}timeToCoordinate(e){let t=this.timeToIndex(e,!1);return t===null?null:this.uh.qt(t)}coordinateToTime(e){let t=this.ts.Et(),i=t.uu(e),r=t.ss(i);return r===null?null:r.originalTime}width(){return this.Xm.Zf().width}height(){return this.Xm.Zf().height}subscribeVisibleTimeRangeChange(e){this.yg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.yg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.wm.i(e)}unsubscribeSizeChange(e){this.wm._(e)}applyOptions(e){this.uh.hr(e)}options(){return P(I({},It(this.uh.N())),{barSpacing:this.uh.vu()})}Tg(){this.yg.v()&&this.yg.p(this.getVisibleRange())}Rg(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Dg(e){this.wm.p(e.width,e.height)}};function YC(n){if(n===void 0||n.type==="custom")return;let e=n;e.minMove!==void 0&&e.precision===void 0&&(e.precision=(function(t){if(t>=1)return 0;let i=0;for(;i<8;i++){let r=Math.round(t);if(Math.abs(r-t)<1e-8)return i;t*=10}return i})(e.minMove))}function my(n){return(function(e){if(wa(e.handleScale)){let i=e.handleScale;e.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(e.handleScale!==void 0){let{axisPressedMouseMove:i,axisDoubleClickReset:r}=e.handleScale;wa(i)&&(e.handleScale.axisPressedMouseMove={time:i,price:i}),wa(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}let t=e.handleScroll;wa(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})})(n),n}var Wh=class{constructor(e,t,i){this.Vg=new Map,this.Ig=new Map,this.Bg=new X,this.Eg=new X,this.Ag=new X,this.$u=new WeakMap,this.zg=new Bh(t);let r=i===void 0?It(py()):ke(It(py()),my(i));this.Lg=t,this.Wf=new Vh(e,r,t),this.Wf.Kv().i(o=>{this.Bg.v()&&this.Bg.p(this.Og(o()))},this),this.Wf.Xv().i(o=>{this.Eg.v()&&this.Eg.p(this.Og(o()))},this),this.Wf.uc().i(o=>{this.Ag.v()&&this.Ag.p(this.Og(o()))},this);let s=this.Wf.Qt();this.Ng=new Gh(s,this.Wf.tw(),this.Lg)}remove(){this.Wf.Kv().u(this),this.Wf.Xv().u(this),this.Wf.uc().u(this),this.Ng.m(),this.Wf.m(),this.Vg.clear(),this.Ig.clear(),this.Bg.m(),this.Eg.m(),this.Ag.m(),this.zg.m()}resize(e,t,i){this.autoSizeActive()||this.Wf.Gm(e,t,i)}addCustomSeries(e,t={},i=0){let r=(s=>({type:"Custom",isBuiltIn:!1,defaultOptions:I(I({},OC),s.defaultOptions()),Fg:FC,Wg:s}))(Qt(e));return this.Hg(r,t,i)}addSeries(e,t={},i=0){return this.Hg(e,t,i)}removeSeries(e){let t=Ie(this.Vg.get(e)),i=this.zg.Ec(t);this.Wf.Qt().Ec(t),this.Ug(i),this.Vg.delete(e),this.Ig.delete(t)}Cg(e,t){this.Ug(this.zg.Fw(e,t))}kg(e,t,i){this.Ug(this.zg.Yw(e,t,i))}subscribeClick(e){this.Bg.i(e)}unsubscribeClick(e){this.Bg._(e)}subscribeCrosshairMove(e){this.Ag.i(e)}unsubscribeCrosshairMove(e){this.Ag._(e)}subscribeDblClick(e){this.Eg.i(e)}unsubscribeDblClick(e){this.Eg._(e)}priceScale(e,t=0){return new qa(this.Wf,e,t)}timeScale(){return this.Ng}applyOptions(e){this.Wf.hr(my(e))}options(){return this.Wf.N()}takeScreenshot(){return this.Wf.hw()}addPane(e=!1){let t=this.Wf.Qt().Uc();return t.zo(e),this.$g(t)}removePane(e){this.Wf.Qt().dc(e)}swapPanes(e,t){this.Wf.Qt().vc(e,t)}autoSizeActive(){return this.Wf.uw()}chartElement(){return this.Wf.tp()}panes(){return this.Wf.Qt().$s().map(e=>this.$g(e))}paneSize(e=0){let t=this.Wf.fw(e);return{height:t.height,width:t.width}}setCrosshairPosition(e,t,i){let r=this.Vg.get(i);if(r===void 0)return;let s=this.Wf.Qt().Hn(r);s!==null&&this.Wf.Qt().Tc(e,t,s)}clearCrosshairPosition(){this.Wf.Qt().Rc(!0)}horzBehaviour(){return this.Lg}Hg(e,t={},i=0){de(e.Fg!==void 0),YC(t.priceFormat),e.type==="Candlestick"&&(function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)})(t);let r=ke(It(yy),It(e.defaultOptions),t),s=e.Fg,o=new Li(this.Wf.Qt(),e.type,r,s,e.Wg);this.Wf.Qt().Ic(o,i);let a=new zh(o,this,this,this,this.Lg,l=>this.$g(l));return this.Vg.set(a,o),this.Ig.set(o,a),a}Ug(e){let t=this.Wf.Qt();t.Dc(e.Et.ou,e.Et.Gw,e.Et.Jw),e.Oo.forEach((i,r)=>r.ht(i.se,i.Zw)),t.Et().j_(),t.pu()}qg(e){return Ie(this.Ig.get(e))}Og(e){let t=new Map;e.Rw.forEach((r,s)=>{let o=s.Rr(),a=Hh(o)(r);if(o!=="Custom")de(SC(a));else{let l=s.pa();de(!l||l(a)===!1)}t.set(this.qg(s),a)});let i=e.Tw!==void 0&&this.Ig.has(e.Tw)?this.qg(e.Tw):void 0;return{time:e.Pw,logical:e.Re,point:e.kw,paneIndex:e.yw,hoveredSeries:i,hoveredObjectId:e.Dw,seriesData:t,sourceEvent:e.Vw}}$g(e){let t=this.$u.get(e);return t||(t=new $h(this.Wf,i=>this.qg(i),e,this),this.$u.set(e,t)),t}};function qC(n){if(is(n)){let e=document.getElementById(n);return de(e!==null,`Cannot find element in DOM with id=${n}`),e}return n}function ZC(n,e,t){let i=qC(n),r=new Wh(i,e,t);return e.setOptions(r.options()),r}function xy(n,e){return ZC(n,new Ga,Ga.ad(e))}var Qa=class extends ns{constructor(e,t){super(e,t,!0)}ug(e,t,i){t._u(this.sg,es(this.ng)),e.$l(this.sg,i,es(this.ng))}Yg(e,t){return{wt:e,gt:t,_t:NaN,ut:NaN}}og(){let e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>{let i=t.Wt[3];return this.jg(t.Re,i,e)})}};function QC(n,e,t,i,r,s,o){if(e.length===0||i.from>=e.length||i.to<=0)return;let{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=n,u=e[i.from],d=s(n,u),h=u;if(i.to-i.from<2){let f=r/2;a.beginPath();let p={_t:u._t-f,ut:u.ut},g={_t:u._t+f,ut:u.ut};a.moveTo(p._t*l,p.ut*c),a.lineTo(g._t*l,g.ut*c),o(n,d,p,g)}else{let f=(g,v)=>{o(n,d,h,v),a.beginPath(),d=g,h=v},p=h;a.beginPath(),a.moveTo(u._t*l,u.ut*c);for(let g=i.from+1;g<i.to;++g){p=e[g];let v=s(n,p);switch(t){case 0:a.lineTo(p._t*l,p.ut*c);break;case 1:a.lineTo(p._t*l,e[g-1].ut*c),v!==d&&(f(v,p),a.lineTo(p._t*l,e[g-1].ut*c)),a.lineTo(p._t*l,p.ut*c);break;case 2:{let[y,S]=XC(e,g-1,g);a.bezierCurveTo(y._t*l,y.ut*c,S._t*l,S.ut*c,p._t*l,p.ut*c);break}}t!==1&&v!==d&&(f(v,p),a.moveTo(p._t*l,p.ut*c))}(h!==p||h===p&&t===1)&&o(n,d,h,p)}}var gy=6;function Ud(n,e){return{_t:n._t-e._t,ut:n.ut-e.ut}}function vy(n,e){return{_t:n._t/e,ut:n.ut/e}}function XC(n,e,t){let i=Math.max(0,e-1),r=Math.min(n.length-1,t+1);var s,o;return[(s=n[e],o=vy(Ud(n[t],n[i]),gy),{_t:s._t+o._t,ut:s.ut+o.ut}),Ud(n[t],vy(Ud(n[r],n[e]),gy))]}function KC(n,e){let t=n.context;t.strokeStyle=e,t.stroke()}var Yh=class extends vt{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;let{ot:t,lt:i,Kg:r,Xg:s,ct:o,Xt:a,Zg:l}=this.rt;if(i===null)return;let c=e.context;c.lineCap="butt",c.lineWidth=o*e.verticalPixelRatio,Ai(c,a),c.lineJoin="round";let u=this.Gg.bind(this);s!==void 0&&QC(e,t,s,i,r,u,KC),l&&(function(d,h,f,p,g){if(p.to-p.from<=0)return;let{horizontalPixelRatio:v,verticalPixelRatio:y,context:S}=d,R=null,x=Math.max(1,Math.floor(v))%2/2,G=f*y+x;for(let Z=p.to-1;Z>=p.from;--Z){let te=h[Z];if(te){let ce=g(d,te);ce!==R&&(S.beginPath(),R!==null&&S.fill(),S.fillStyle=ce,R=ce);let J=Math.round(te._t*v)+x,Fe=te.ut*y;S.moveTo(J,Fe),S.arc(J,Fe,G,0,2*Math.PI)}}S.fill()})(e,t,l,i,u)}},qh=class extends Yh{Gg(e,t){return t.vt}},Zh=class extends Qa{constructor(){super(...arguments),this.hg=new qh}jg(e,t,i){return I(I({},this.Yg(e,t)),i.Dr(e))}cg(){let e=this.Jn.N(),t={ot:this.sg,Xt:e.lineStyle,Xg:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.ng,Kg:this.Qn.Et().vu()};this.hg.ht(t)}},Ja={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(n,e)=>new Zh(n,e)};var Qh=class extends ns{constructor(e,t){super(e,t,!1)}ug(e,t,i){t._u(this.sg,es(this.ng)),e.Yl(this.sg,i,es(this.ng))}yM(e,t,i){return{wt:e,qh:t.Wt[0],Yh:t.Wt[1],jh:t.Wt[2],Kh:t.Wt[3],_t:NaN,jl:NaN,Kl:NaN,Xl:NaN,Zl:NaN}}og(){let e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>this.jg(t.Re,t,e))}};var Xh=class extends vt{constructor(){super(...arguments),this.Yt=null,this.SM=0}ht(e){this.Yt=e}et(e){if(this.Yt===null||this.Yt.Xs.length===0||this.Yt.lt===null)return;let{horizontalPixelRatio:t}=e;this.SM=(function(s,o){if(s>=2.5&&s<=4)return Math.floor(3*o);let a=1-.2*Math.atan(Math.max(4,s)-4)/(.5*Math.PI),l=Math.floor(s*a*o),c=Math.floor(s*o),u=Math.min(l,c);return Math.max(Math.floor(o),u)})(this.Yt.vu,t),this.SM>=2&&Math.floor(t)%2!=this.SM%2&&this.SM--;let i=this.Yt.Xs;this.Yt.TM&&this.RM(e,i,this.Yt.lt),this.Yt.Mi&&this._v(e,i,this.Yt.lt);let r=this.DM(t);(!this.Yt.Mi||this.SM>2*r)&&this.VM(e,i,this.Yt.lt)}RM(e,t,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e,a="",l=Math.min(Math.floor(s),Math.floor(this.Yt.vu*s));l=Math.max(Math.floor(s),Math.min(l,this.SM));let c=Math.floor(.5*l),u=null;for(let d=i.from;d<i.to;d++){let h=t[d];h.pr!==a&&(r.fillStyle=h.pr,a=h.pr);let f=Math.round(Math.min(h.jl,h.Zl)*o),p=Math.round(Math.max(h.jl,h.Zl)*o),g=Math.round(h.Kl*o),v=Math.round(h.Xl*o),y=Math.round(s*h._t)-c,S=y+l-1;u!==null&&(y=Math.max(u+1,y),y=Math.min(y,S));let R=S-y+1;r.fillRect(y,g,R,f-g),r.fillRect(y,p+1,R,v-p),u=S}}DM(e){let t=Math.floor(1*e);this.SM<=2*t&&(t=Math.floor(.5*(this.SM-1)));let i=Math.max(Math.floor(e),t);return this.SM<=2*i?Math.max(Math.floor(e),Math.floor(1*e)):i}_v(e,t,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e,a="",l=this.DM(s),c=null;for(let u=i.from;u<i.to;u++){let d=t[u];d.dr!==a&&(r.fillStyle=d.dr,a=d.dr);let h=Math.round(d._t*s)-Math.floor(.5*this.SM),f=h+this.SM-1,p=Math.round(Math.min(d.jl,d.Zl)*o),g=Math.round(Math.max(d.jl,d.Zl)*o);if(c!==null&&(h=Math.max(c+1,h),h=Math.min(h,f)),this.Yt.vu*s>2*l)J_(r,h,p,f-h+1,g-p+1,l);else{let v=f-h+1;r.fillRect(h,p,v,g-p+1)}c=f}}VM(e,t,i){if(this.Yt===null)return;let{context:r,horizontalPixelRatio:s,verticalPixelRatio:o}=e,a="",l=this.DM(s);for(let c=i.from;c<i.to;c++){let u=t[c],d=Math.round(Math.min(u.jl,u.Zl)*o),h=Math.round(Math.max(u.jl,u.Zl)*o),f=Math.round(u._t*s)-Math.floor(.5*this.SM),p=f+this.SM-1;if(u.cr!==a){let g=u.cr;r.fillStyle=g,a=g}this.Yt.Mi&&(f+=l,d+=l,p-=l,h-=l),d>h||r.fillRect(f,d,p-f+1,h-d+1)}}},Kh=class extends Qh{constructor(){super(...arguments),this.hg=new Xh}jg(e,t,i){return I(I({},this.yM(e,t,i)),i.Dr(e))}cg(){let e=this.Jn.N();this.hg.ht({Xs:this.sg,vu:this.Qn.Et().vu(),TM:e.wickVisible,Mi:e.borderVisible,lt:this.ng})}},Ny={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Fg:(n,e)=>new Kh(n,e)},Jh=class extends vt{constructor(){super(...arguments),this.Yt=null,this.IM=[]}ht(e){this.Yt=e,this.IM=[]}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:i}){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return;this.IM.length||this.BM(t);let r=Math.max(1,Math.floor(i)),s=Math.round(this.Yt.EM*i)-Math.floor(r/2),o=s+r;for(let a=this.Yt.lt.from;a<this.Yt.lt.to;a++){let l=this.Yt.ot[a],c=this.IM[a-this.Yt.lt.from],u=Math.round(l.ut*i),d,h;e.fillStyle=l.cr,u<=s?(d=u,h=o):(d=s,h=u-Math.floor(r/2)+r),e.fillRect(c.Uh,d,c.bi-c.Uh+1,h-d)}}BM(e){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return void(this.IM=[]);let t=Math.ceil(this.Yt.vu*e)<=1?0:Math.max(1,Math.floor(e)),i=Math.round(this.Yt.vu*e)-t;this.IM=new Array(this.Yt.lt.to-this.Yt.lt.from);for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.Yt.ot[s],a=Math.round(o._t*e),l,c;if(i%2){let u=(i-1)/2;l=a-u,c=a+u}else{let u=i/2;l=a-u,c=a+u-1}this.IM[s-this.Yt.lt.from]={Uh:l,bi:c,AM:a,ne:o._t*e,wt:o.wt}}for(let s=this.Yt.lt.from+1;s<this.Yt.lt.to;s++){let o=this.IM[s-this.Yt.lt.from],a=this.IM[s-this.Yt.lt.from-1];o.wt===a.wt+1&&o.Uh-a.bi!==t+1&&(a.AM>a.ne?a.bi=o.Uh-t-1:o.Uh=a.bi+t+1)}let r=Math.ceil(this.Yt.vu*e);for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.IM[s-this.Yt.lt.from];o.bi<o.Uh&&(o.bi=o.Uh);let a=o.bi-o.Uh+1;r=Math.min(a,r)}if(t>0&&r<4)for(let s=this.Yt.lt.from;s<this.Yt.lt.to;s++){let o=this.IM[s-this.Yt.lt.from];o.bi-o.Uh+1>r&&(o.AM>o.ne?o.bi-=1:o.Uh+=1)}}},ef=class extends Qa{constructor(){super(...arguments),this.hg=new Jh}jg(e,t,i){return I(I({},this.Yg(e,t)),i.Dr(e))}cg(){let e={ot:this.sg,vu:this.Qn.Et().vu(),lt:this.ng,EM:this.Jn.Ft().Nt(this.Jn.N().base,C(this.Jn.zt()).Wt)};this.hg.ht(e)}},Ay={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},Fg:(n,e)=>new ef(n,e)};var DB=P(I({},yy),{color:"#2196f3"});var JC=["chartContainer"],eS=()=>["1m","3m","5m","15m","1h"];function tS(n,e){if(n&1){let t=zt();D(0,"button",9),Gt("click",function(){let r=ye(t).$implicit,s=Pe();return De(s.onTimeframeChange(r))}),m(1),E()}if(n&2){let t=e.$implicit,i=Pe();pe("active",i.currentState().currentTimeframe===t),_(),T(" ",t," ")}}function nS(n,e){if(n&1&&(D(0,"div",10),m(1),H(2,"number"),E(),D(3,"div",11),m(4),H(5,"number"),E(),D(6,"div",12),m(7),H(8,"number"),E(),D(9,"div",13),m(10),H(11,"number"),E()),n&2){let t=Pe();_(),T(" EMA8: ",$(2,4,t.currentState().indicators.ema8[t.currentState().indicators.ema8.length-1],"1.2-4")," "),_(3),T(" EMA21: ",$(5,7,t.currentState().indicators.ema21[t.currentState().indicators.ema21.length-1],"1.2-4")," "),_(3),T(" EMA50: ",$(8,10,t.currentState().indicators.ema50[t.currentState().indicators.ema50.length-1],"1.2-4")," "),_(3),T(" Market Price: ",$(11,13,t.state.getCurrentMarketPrice(),"1.2-4")," ")}}var el=class n{state=M(le);signalLogic=M(qt);cdr=M(oa);chartContainer;chart;candlestickSeries;ema8Series;ema21Series;ema50Series;volumeSeries;lastLogicalRange=null;wasAtRightEdge=!0;previousDataLength=0;lastSymbol="";lastTimeframe="";currentState=this.state.currentState;constructor(){Wt(()=>{let e=this.currentState();if(this.chart&&e.ohlcvData.length){let t=e.currentSymbol!==this.lastSymbol||e.currentTimeframe!==this.lastTimeframe;this.updateChartData(t),this.lastSymbol=e.currentSymbol,this.lastTimeframe=e.currentTimeframe}})}ngAfterViewInit(){this.initializeChart(),this.cdr.detectChanges()}ngOnDestroy(){this.chart&&this.chart.remove()}onTimeframeChange(e){this.state.setCurrentTimeframe(e),this.signalLogic.fetchDataAndRunPipeline()}initializeChart(){this.chartContainer.nativeElement&&(this.chart=xy(this.chartContainer.nativeElement,{width:this.chartContainer.nativeElement.clientWidth,height:400,layout:{background:{type:$a.Solid,color:"#131722"},textColor:"rgba(255, 255, 255, 0.9)"},grid:{vertLines:{color:"rgba(197, 203, 206, 0.1)"},horzLines:{color:"rgba(197, 203, 206, 0.1)"}},crosshair:{mode:1},rightPriceScale:{borderColor:"rgba(197, 203, 206, 0.4)"},timeScale:{borderColor:"rgba(197, 203, 206, 0.4)",timeVisible:!0,secondsVisible:!1}}),this.candlestickSeries=this.chart.addSeries(Ny,{upColor:"#0354b6ff",downColor:"#fff",borderDownColor:"#fff",borderUpColor:"#0354b6ff",wickDownColor:"#fff",wickUpColor:"#0354b6ff"}),this.ema8Series=this.chart.addSeries(Ja,{color:"#22c55e",lineWidth:2,crosshairMarkerVisible:!1}),this.ema21Series=this.chart.addSeries(Ja,{color:"#FF6D00",lineWidth:2,crosshairMarkerVisible:!1}),this.ema50Series=this.chart.addSeries(Ja,{color:"#E91E63",lineWidth:2,crosshairMarkerVisible:!1}),this.volumeSeries=this.chart.addSeries(Ay,{priceFormat:{type:"volume"},priceScaleId:""}),this.chart.priceScale("").applyOptions({scaleMargins:{top:.8,bottom:0}}),this.updateChartData(!0),new ResizeObserver(e=>{if(e.length===0||e[0].target!==this.chartContainer.nativeElement)return;let t=e[0].contentRect;this.chart.applyOptions({width:t.width,height:t.height})}).observe(this.chartContainer.nativeElement))}updateChartData(e=!1){let t=this.currentState().ohlcvData,i=this.currentState().indicators;if(t.length===0)return;if(!e){let d=this.chart.timeScale().getVisibleLogicalRange();if(d){this.lastLogicalRange=d;let h=d.to,f=this.previousDataLength-1;this.wasAtRightEdge=Math.abs(f-h)<1}}let r=this.previousDataLength,s=t.map(u=>({time:u.time/1e3,open:u.open,high:u.high,low:u.low,close:u.close}));this.candlestickSeries.setData(s);let o=(u,d)=>{let h=d.length-u.length;return u.map((f,p)=>({time:d[p+h].time/1e3,value:f}))};this.ema8Series.setData(o(i.ema8,t)),this.ema21Series.setData(o(i.ema21,t)),this.ema50Series.setData(o(i.ema50,t));let a=t.map(u=>{let d=u.close>=u.open;return{time:u.time/1e3,value:u.volume,color:d?"rgba(38, 166, 154, 0.5)":"rgba(239, 83, 80, 0.5)"}});this.volumeSeries.setData(a);let l=t.length;this.previousDataLength=l;let c=this.chart.timeScale();if(e||!this.lastLogicalRange){c.fitContent();return}if(!e&&r>0){let u=l-r,d=this.lastLogicalRange.from+u,h=this.lastLogicalRange.to+u;if(this.wasAtRightEdge)c.scrollToRealTime();else{let f=l-1,p=0;if(d<p&&(h+=Math.abs(d-p),d=p),h>f){let g=h-f;d-=g,h=f}c.setVisibleLogicalRange({from:d,to:h})}}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-chart"]],viewQuery:function(t,i){if(t&1&&Nn(JC,5),t&2){let r;An(r=Rn())&&(i.chartContainer=r.first)}},decls:12,vars:2,consts:[["chartContainer",""],[1,"card","chart-section"],[1,"chart-header"],[1,"chart-title"],[1,"timeframe-selector"],[1,"tf-btn",3,"active"],["id","chart-display",1,"chart-display"],["id","indicators-overlay",1,"indicators-overlay"],[1,"candlestick-container"],[1,"tf-btn",3,"click"],[1,"indicator-line","ema8"],[1,"indicator-line","ema21"],[1,"indicator-line","ema50"],[1,"indicator-line","market-price"]],template:function(t,i){t&1&&(D(0,"div",1)(1,"div",2)(2,"div",3),m(3,"\u{1F4C8} Real-time Chart + Indicators"),E(),D(4,"div",4),Tr(5,tS,2,3,"button",5,Yu),E()(),D(7,"div",6)(8,"div",7),Ge(9,nS,12,16),E(),ea(10,"div",8,0),E()()),t&2&&(_(5),xr(Pn(1,eS)),_(4),We(i.currentState().indicators.ema8.length>0?9:-1))},dependencies:[Me,it],styles:[".chart-display[_ngcontent-%COMP%]{position:relative;height:400px;width:100%}.candlestick-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.indicators-overlay[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;z-index:10;display:flex;gap:15px;background-color:#131722b3;padding:5px 10px;border-radius:6px;pointer-events:none}.indicator-line[_ngcontent-%COMP%]{font-size:.75rem;font-weight:500}"]})};var iS=["calcLog"],rS=()=>[1,2,3,4,5,6];function sS(n,e){if(n&1&&(w(0,"div",3)(1,"div",6)(2,"div",7),m(3,"EMA 8"),b(),w(4,"div",8),m(5),H(6,"number"),b(),w(7,"div",9),m(8,"+0.00%"),b()(),w(9,"div",6)(10,"div",7),m(11,"EMA 21"),b(),w(12,"div",10),m(13),H(14,"number"),b(),w(15,"div",9),m(16,"+0.00%"),b()(),w(17,"div",6)(18,"div",7),m(19,"EMA 50"),b(),w(20,"div",11),m(21),H(22,"number"),b(),w(23,"div",9),m(24,"+0.00%"),b()(),w(25,"div",12)(26,"div")(27,"div",7),m(28,"Market Price"),b(),w(29,"div",13),m(30),H(31,"number"),b()()(),w(32,"div",6)(33,"div",7),m(34,"RSI 14"),b(),w(35,"div",14),m(36),H(37,"number"),b(),w(38,"div",9),m(39,"+0.00"),b()(),w(40,"div",6)(41,"div",7),m(42,"ATR 14"),b(),w(43,"div",15),m(44),H(45,"number"),b(),w(46,"div",9),m(47,"+0.00%"),b()(),w(48,"div",6)(49,"div",7),m(50,"Volume Ratio"),b(),w(51,"div",16),m(52),H(53,"number"),b(),w(54,"div",9),m(55,"Normal"),b()()()),n&2){let t,i=Pe();_(5),T(" ",$(6,7,i.getLatestNumericIndicator("ema8"),"1.2-4")," "),_(8),T(" ",$(14,10,i.getLatestNumericIndicator("ema21"),"1.2-4")," "),_(8),T(" ",$(22,13,i.getLatestNumericIndicator("ema50"),"1.2-4")," "),_(9),T(" ",$(31,16,i.state.getCurrentMarketPrice(),"1.2-4")," "),_(6),T(" ",$(37,19,i.getLatestNumericIndicator("rsi14"),"1.2-2")," "),_(8),T(" ",$(45,22,i.getLatestNumericIndicator("atr14"),"1.2-4")," "),_(8),T(" ",$(53,25,(t=i.getLatestVolume())==null?null:t.ratio,"1.2-2"),"x ")}}function oS(n,e){n&1&&(w(0,"div",6)(1,"div",7),m(2,"Loading..."),b(),w(3,"div",16),m(4,"--"),b()())}function aS(n,e){n&1&&(w(0,"div",3),Jo(1,oS,5,0,"div",17),b()),n&2&&(_(),Ce("ngForOf",Pn(1,rS)))}function lS(n,e){if(n&1&&(w(0,"div",5),m(1),b()),n&2){let t=e.$implicit;Ce("ngClass",t.type),_(),Ei(" ",t.timestamp,": ",t.message," ")}}var tl=class n{state=M(le);currentState=this.state.currentState;calcLog;constructor(){Wt(()=>{let e=this.currentState().logs.length;this.calcLog&&e&&queueMicrotask(()=>{try{let t=this.calcLog.nativeElement;t.scrollTop=t.scrollHeight}catch{}})})}getLatestNumericIndicator(e){let t=this.currentState().indicators[e];return!t||t.length===0?null:t[t.length-1]}getLatestVolume(){let e=this.currentState().indicators.volume;return!e||e.length===0?null:e[e.length-1]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-indicators-panel"]],viewQuery:function(t,i){if(t&1&&Nn(iS,5),t&2){let r;An(r=Rn())&&(i.calcLog=r.first)}},decls:9,vars:1,consts:[["calcLog",""],[1,"card","technical-indicators"],[1,"chart-title"],[1,"indicator-grid"],[1,"calculation-log"],[1,"log-entry",3,"ngClass"],[1,"indicator-item"],[1,"indicator-label"],[1,"indicator-value","ema8"],[1,"indicator-change","neutral"],[1,"indicator-value","ema21"],[1,"indicator-value","ema50"],[1,"indicator-item","market-price"],[1,"indicator-value","market-price-number"],[1,"indicator-value","rsi"],[1,"indicator-value","atr"],[1,"indicator-value"],["class","indicator-item",4,"ngFor","ngForOf"]],template:function(t,i){t&1&&(w(0,"div",1)(1,"div",2),m(2,"\u{1F52C} Technical Indicators Pipeline"),b(),Ge(3,sS,56,28,"div",3)(4,aS,2,2,"div",3),w(5,"div",4,0),Tr(7,lS,2,3,"div",5,Wu),b()()),t&2&&(_(3),We(i.currentState().indicators.ema8.length>0?3:4),_(4),xr(i.currentState().logs))},dependencies:[Me,Fn,ca,it],encapsulation:2})};var cS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},cj=P(I({},cS),{"[class.ng-submitted]":"isSubmitted"});var uS=new k("",{providedIn:"root",factory:()=>Ry}),Ry="always";var dS=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=$t({type:n});static \u0275inj=Et({})}return n})();var Py=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uS,useValue:t.callSetDisabledState??Ry}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=$t({type:n});static \u0275inj=Et({imports:[dS]})}return n})();var nl=class n{state=M(le);currentState=this.state.currentState;accountSize=Je(1e4);riskPercent=Je(1);positionInfo=nt(()=>{let e=this.accountSize(),t=this.riskPercent(),{entry:i,stopLoss:r}=this.currentState().executionParams,s=this.currentState().currentSymbol,o=e*(t/100);if(i===0||r===0)return{positionSizeCoin:0,positionSizeInUSDT:0,maxRisk:o,symbol:s.replace("USDT","")};let a=Math.abs(i-r),l=a>0?o/a:0,c=l*i;return{positionSizeCoin:l,positionSizeInUSDT:c,maxRisk:o,symbol:s.replace("USDT","")}});constructor(){}formatPrice(e){return!e||isNaN(e)?"$0.0000":e<1?`$${e.toFixed(4)}`:e<100?`$${e.toFixed(2)}`:`$${Math.round(e).toLocaleString()}`}trendTag=nt(()=>{let e=this.currentState(),{ema8:t,ema21:i,ema50:r}=e.indicators,s=t.length-1;if(s<0)return{status:"NEUTRAL",label:"Neutr\xE1ln\xED",emoji:"\u26A0\uFE0F",color:"#f59e0b"};let o=t[s],a=i[s],l=r[s];return o>a&&a>l?{status:"BULL",label:"B\xFD\u010D\xED",emoji:"\u{1F402}",color:"#22c55e"}:o<a&&a<l?{status:"BEAR",label:"Medv\u011Bd\xED",emoji:"\u{1F43B}",color:"#ef4444"}:{status:"NEUTRAL",label:"Neutr\xE1ln\xED",emoji:"\u26A0\uFE0F",color:"#f59e0b"}});atrValue=nt(()=>{let e=this.currentState();return e.indicators.atr14[e.indicators.atr14.length-1]||0});signalEntryText=nt(()=>{let e=this.currentState().executionParams;return`Entry: ${this.formatPrice(e.entry)} | Sm\u011Br: ${e.direction||"NONE"} | Market: ${this.formatPrice(e.currentMarketPrice||0)}`});signalSLText=nt(()=>{let e=this.currentState().executionParams;return`SL: ${this.formatPrice(e.stopLoss)} (\u22481\xD7ATR14)`});signalTPText=nt(()=>{let e=this.currentState().executionParams;return`TP1: ${this.formatPrice(e.tp1)} (1R) | TP2: ${this.formatPrice(e.tp2)} (2R)`});signalTSText=nt(()=>{let e=this.currentState().executionParams,t=this.currentState().signalEngine==="ENTRY";return`TS: ${this.formatPrice(e.trailingStop)} (0.5\xD7ATR) aktivn\xED: ${t?"true":"false"}`});signalComment=nt(()=>{let e=this.currentState(),t=Object.entries(e.gates).filter(([r,s])=>s).map(([r])=>{switch(r){case"trendStack":return"EMA";case"bosDirection":return"BOS";case"fiftyPercentRetest":return"50%";case"volumeSpike":return"Volume";default:return r}}),i;return e.signalEngine==="NO_TRADE"?i="\u017D\xE1dn\xE9 aktivn\xED riziko":t.length<4?i="Standardn\xED tr\u017En\xED riziko":i="Kontroluj volatilitu / news",t.length===0?"D\u016Fvod: \u010Cek\xE1n\xED na sign\xE1l. Riziko: \u017D\xE1dn\xE9 aktivn\xED riziko.":t.length===4?`D\u016Fvod: V\u0161echny gates spln\u011Bny (${t.join("/")}). Riziko: ${i}.`:`D\u016Fvod: \u010C\xE1ste\u010Dn\xFD setup (${t.join("/")}). Riziko: ${i}.`});onAccountSizeChange(e){this.accountSize.set(Number(e))}onRiskPercentChange(e){this.riskPercent.set(Number(e))}copyOrdersToClipboard(){let e=this.currentState().executionParams,t=this.positionInfo(),i=`
--- Crypto Scalper Pro Order ---
Direction: ${e.direction}
Symbol: ${this.currentState().currentSymbol}
Position Size: ${t.positionSizeCoin.toFixed(4)} ${t.symbol} (${t.positionSizeInUSDT.toFixed(2)} USDT)
Max Risk: $${t.maxRisk.toFixed(2)}

Entry: ${e.entry}
Stop Loss: ${e.stopLoss}
Take Profit 1: ${e.tp1}
Take Profit 2: ${e.tp2}
Trailing Stop: ${e.trailingStop}
---------------------------------
    `;navigator.clipboard.writeText(i.trim()).then(()=>{this.state.addLog("success","\u{1F4CB} Orders copied to clipboard.")}).catch(r=>{this.state.addLog("error","Failed to copy orders.")})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-execution-panel"]],decls:52,vars:25,consts:[[1,"card"],[1,"chart-title"],[1,"execution-params"],[1,"param-item"],[1,"param-label"],[1,"param-value","entry-value"],[2,"font-size","0.7rem","color","#94a3b8","margin-top","2px"],[1,"param-value","sl-value"],[1,"param-value","tp-value"],[1,"param-value","ts-value"],[1,"param-value"]],template:function(t,i){t&1&&(D(0,"div",0)(1,"div",1),m(2,"\u{1F3AF} Execution Parameters"),E(),D(3,"div",2)(4,"div",3)(5,"div",4),m(6,"Entry (Limit)"),E(),D(7,"div",5),m(8),H(9,"number"),E(),D(10,"div",6),m(11),H(12,"number"),E()(),D(13,"div",3)(14,"div",4),m(15,"Stop Loss"),E(),D(16,"div",7),m(17),H(18,"number"),E(),D(19,"div",6),m(20," -0.0% (-$0.00) "),E()(),D(21,"div",3)(22,"div",4),m(23,"TP1 (1R)"),E(),D(24,"div",8),m(25),H(26,"number"),E(),D(27,"div",6),m(28," +0.0% (+$0.00) "),E()(),D(29,"div",3)(30,"div",4),m(31,"TP2 (2R)"),E(),D(32,"div",8),m(33),H(34,"number"),E(),D(35,"div",6),m(36," +0.0% (+$0.00) "),E()(),D(37,"div",3)(38,"div",4),m(39,"Trailing Stop"),E(),D(40,"div",9),m(41),H(42,"number"),E(),D(43,"div",6),m(44," Aktivace: TP1 "),E()(),D(45,"div",3)(46,"div",4),m(47,"Risk/Reward"),E(),D(48,"div",10),m(49),E(),D(50,"div",6),m(51," Kvalita: Dobr\xE1 "),E()()()()),t&2&&(_(8),T(" ",$(9,7,i.currentState().executionParams.entry,"1.2-4")," "),_(3),T(" Market: ",$(12,10,i.currentState().executionParams.currentMarketPrice,"1.2-4")," "),_(6),T(" ",$(18,13,i.currentState().executionParams.stopLoss,"1.2-4")," "),_(8),T(" ",$(26,16,i.currentState().executionParams.tp1,"1.2-4")," "),_(8),T(" ",$(34,19,i.currentState().executionParams.tp2,"1.2-4")," "),_(8),T(" ",$(42,22,i.currentState().executionParams.trailingStop,"1.2-4")," "),_(8),T(" ",i.currentState().executionParams.riskReward," "))},dependencies:[Me,Py,it],styles:[".cz-signal-block[_ngcontent-%COMP%]{position:relative;padding:12px 16px;border-radius:10px;font-family:Courier New,monospace;font-size:.72rem;line-height:1.25rem;display:flex;flex-direction:column;gap:4px;margin-bottom:10px;background:linear-gradient(135deg,#ffffff08,#ffffff04);border-left:4px solid transparent;box-shadow:inset 0 0 0 1px #ffffff0a,0 2px 4px -2px #0006}.cz-signal-block[_ngcontent-%COMP%]:last-child{margin-bottom:0}.cz-signal-title[_ngcontent-%COMP%]{font-weight:600;font-size:.7rem;letter-spacing:.5px;color:#cbd5e1}.cz-signal-text[_ngcontent-%COMP%]{color:#e2e8f0;font-weight:500}.cz-signal-block.trend[_ngcontent-%COMP%]{border-left-color:#10b981}.cz-signal-block.entry[_ngcontent-%COMP%]{border-left-color:#2563eb}.cz-signal-block.sl[_ngcontent-%COMP%]{border-left-color:#ef4444}.cz-signal-block.tp[_ngcontent-%COMP%]{border-left-color:#2563eb}.cz-signal-block.ts[_ngcontent-%COMP%]{border-left-color:#f59e0b}.cz-signal-block.comment[_ngcontent-%COMP%]{border-left-color:#8b5cf6}.trend-chip[_ngcontent-%COMP%]{margin-top:4px;display:inline-flex;align-items:center;gap:4px;padding:6px 16px;font-size:.7rem;font-weight:600;border:2px solid currentColor;border-radius:24px;background:#00000040;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);box-shadow:0 0 0 1px #ffffff0d,0 2px 6px -2px #00000080 inset}@media (max-width: 920px){.cz-signal-block[_ngcontent-%COMP%]{font-size:.65rem}.trend-chip[_ngcontent-%COMP%]{font-size:.65rem;padding:4px 12px}}"]})};function hS(n,e){n&1&&m(0," \u{1F6AB} NO_TRADE ")}function fS(n,e){n&1&&m(0," \u26A0\uFE0F SETUP FORMING ")}function pS(n,e){n&1&&m(0," \u{1F680} ENTRY SIGNAL ")}function mS(n,e){n&1&&(w(0,"span"),m(1,"EMA8 > 21 > 50 (LONG)"),b())}function gS(n,e){n&1&&(w(0,"span"),m(1,"EMA8 < 21 < 50 (SHORT)"),b())}function vS(n,e){n&1&&(w(0,"span"),m(1,"Neutral Stack"),b())}function yS(n,e){if(n&1&&(w(0,"div",12),Ge(1,mS,2,0,"span")(2,gS,2,0,"span")(3,vS,2,0,"span"),b(),w(4,"div",13)(5,"div"),m(6),b()()),n&2){Pe();let t=wi(22),i=wi(23),r=wi(24);_(),We(t>i&&i>r?1:t<i&&i<r?2:3),_(5),T(" ",t>i&&i>r?"LONG aligned":t<i&&i<r?"SHORT aligned":"Not aligned"," ")}}function DS(n,e){n&1&&(w(0,"span"),m(1,"Loading..."),b())}function ES(n,e){if(n&1&&(w(0,"span"),m(1),H(2,"number"),H(3,"number"),b()),n&2){let t=Pe(),i=wi(53),r=i[i.length-1];_(),Ei(" ",t.currentState().gates.volumeSpike?$(2,2,r.ratio,"1.2-2")+"x spike":$(3,5,r.ratio,"1.2-2")+"x"," ",r.absorption?"+ absorption":""," ")}}function bS(n,e){n&1&&m(0," Loading... ")}var il=class n{state=M(le);currentState=this.state.currentState;getLatestNumericIndicator(e){let t=this.currentState().indicators[e];return!t||t.length===0?null:t[t.length-1]}getNumberOfValidGates(){let e=this.currentState().gates;return Object.values(e).filter(t=>t).length}getNumberOfGates(){let e=this.currentState().gates;return Object.values(e).length}generateTradingViewAlert(){let e=this.currentState().executionParams,t=`
{
  "name": "Scalper Pro Alert: ${e.direction} ${this.currentState().currentSymbol}",
  "symbol": "${this.currentState().currentSymbol}",
  "side": "${e.direction==="LONG"?"buy":"sell"}",
  "entry": "${e.entry}",
  "stop_loss": "${e.stopLoss}",
  "take_profit_1": "${e.tp1}",
  "take_profit_2": "${e.tp2}"
}
    `,i=new Blob([t.trim()],{type:"application/json"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=`TV_Alert_${this.currentState().currentSymbol}_${new Date().toISOString().slice(0,16).replace("T","_")}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r),this.state.addLog("success","\u{1F4FA} TradingView alert JSON file generated.")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-signal-engine"]],decls:57,vars:31,consts:[[1,"signal-engine"],[1,"card"],[1,"chart-title"],[2,"display","flex","justify-content","space-between","align-items","center","margin-bottom","12px"],[2,"font-size","0.875rem","font-weight","600"],[2,"display","flex","gap","8px"],[1,"control-btn",2,"padding","4px 8px","font-size","0.75rem",3,"click"],[1,"engine-status",3,"ngClass"],[1,"gates-section"],[1,"gate-item"],[1,"gate-title"],[1,"gate-status"],[1,"gate-details"],[1,"gate-value"]],template:function(t,i){if(t&1){let r=zt();w(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m(5," \u{1F6A6} Signal Engine Status "),b(),w(6,"div",5)(7,"button",6),Se("click",function(){return ye(r),De(i.generateTradingViewAlert())}),m(8," \u{1F4FA} Download Signal "),b()()()(),w(9,"div",7),Ge(10,hS,1,0)(11,fS,1,0)(12,pS,1,0),b()(),w(13,"div",1)(14,"div",2),m(15),b(),w(16,"div",8)(17,"div",9)(18,"div",10)(19,"div",11),m(20),b(),m(21," Trend Stack "),b(),Ar(22)(23)(24),Ge(25,yS,7,2)(26,DS,2,0,"span"),b(),w(27,"div",9)(28,"div",10)(29,"div",11),m(30),b(),m(31," BOS Direction "),b(),w(32,"div",12),m(33,"Break of Structure"),b(),w(34,"div",13),m(35),b()(),w(36,"div",9)(37,"div",10)(38,"div",11),m(39),b(),m(40," 50% Retest "),b(),w(41,"div",12),m(42,"Mid-level retest"),b(),w(43,"div",13),m(44),b()(),w(45,"div",9)(46,"div",10)(47,"div",11),m(48),b(),m(49," Volume Spike "),b(),w(50,"div",12),m(51,"\u22651.5x + absorption"),b(),w(52,"div",13),Ar(53),Ge(54,ES,4,8,"span")(55,bS,1,0),b()()()(),Tn(56,"app-execution-panel"),b()}if(t&2){let r;_(9),Ce("ngClass",i.currentState().signalEngine.toLowerCase().replace("_","-")),_(),We((r=i.currentState().signalEngine)==="NO_TRADE"?10:r==="SETUP"?11:r==="ENTRY"?12:-1),_(5),T(" \u{1F6AA} Gates Validation (",i.getNumberOfValidGates()+"/"+i.getNumberOfGates(),") "),_(2),pe("passed",i.currentState().gates.trendStack),_(2),pe("passed",i.currentState().gates.trendStack),_(),T(" ",i.currentState().gates.trendStack?"\u2713":"\u2717"," "),_(2);let s=bi(i.getLatestNumericIndicator("ema8"));_();let o=bi(i.getLatestNumericIndicator("ema21"));_();let a=bi(i.getLatestNumericIndicator("ema50"));_(),We(s&&o&&a&&i.currentState().indicators.ema8.length?25:26),_(2),pe("passed",i.currentState().gates.bosDirection),_(2),pe("passed",i.currentState().gates.bosDirection),_(),T(" ",i.currentState().gates.bosDirection?"\u2713":"\u2717"," "),_(5),T(" ",i.currentState().gates.bosDirection?"Recent BOS detected":"No BOS"," "),_(),pe("passed",i.currentState().gates.fiftyPercentRetest),_(2),pe("passed",i.currentState().gates.fiftyPercentRetest),_(),T(" ",i.currentState().gates.fiftyPercentRetest?"\u2713":"\u2717"," "),_(5),T(" ",i.currentState().gates.fiftyPercentRetest?"In zone":"Outside zone"," "),_(),pe("passed",i.currentState().gates.volumeSpike),_(2),pe("passed",i.currentState().gates.volumeSpike),_(),T(" ",i.currentState().gates.volumeSpike?"\u2713":"\u2717"," "),_(5);let l=bi(i.currentState().indicators.volume);_(),We(l.length?54:55)}},dependencies:[Me,Fn,nl,it],encapsulation:2})};var wS=["backtestLog"],rl=(n,e)=>({valid:n,invalid:e}),_S=()=>({}),CS=(n,e)=>({"expectancy-positive":n,"expectancy-negative":e}),SS=(n,e,t)=>({"adherence-high":n,"adherence-medium":e,"adherence-low":t});function MS(n,e){if(n&1){let t=zt();w(0,"div",23)(1,"div")(2,"strong"),m(3,"ID:"),b(),m(4),b(),w(5,"div")(6,"strong"),m(7,"Time:"),b(),m(8),b(),w(9,"div")(10,"strong"),m(11,"Symbol:"),b(),m(12),b(),w(13,"div")(14,"strong"),m(15,"TF:"),b(),m(16),b(),w(17,"div")(18,"strong"),m(19,"Engine:"),b(),m(20),b()(),w(21,"pre",24),m(22),H(23,"json"),b(),w(24,"button",12),Se("click",function(){ye(t);let r=Pe();return De(r.reloadLastSnapshot())}),m(25," \u{1F504} Load Last "),b()}if(n&2){let t=Pe();_(4),T(" ",t.lastSnapshot.meta.id),_(4),T(" ",t.lastSnapshot.meta.timestamp),_(4),T(" ",t.lastSnapshot.meta.symbol),_(4),T(" ",t.lastSnapshot.meta.timeframe),_(4),T(" ",t.lastSnapshot.meta.engine),_(2),ia(Xu(23,6,t.lastSnapshot.state))}}function IS(n,e){n&1&&(w(0,"div",15),m(1,"No snapshot captured yet..."),b())}var sl=class n{state=M(le);signalLogic=M(qt);currentState=this.state.currentState;backtestLog;lastSnapshot=null;constructor(){let e=localStorage.getItem("csp.lastSnapshot");e&&(this.lastSnapshot=JSON.parse(e))}captureSnapshot(){let e=this.buildSnapshot();this.lastSnapshot=e;try{localStorage.setItem("csp.lastSnapshot",JSON.stringify(e))}catch{}this.state.addLog("success",`\u{1F4F8} Snapshot captured (${e.meta.id}).`)}exportSnapshot(){let e=this.buildSnapshot();this.lastSnapshot=e;try{localStorage.setItem("csp.lastSnapshot",JSON.stringify(e))}catch{}let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),i=URL.createObjectURL(t),r=document.createElement("a");r.href=i,r.download=`snapshot_${e.meta.symbol}_${e.meta.timeframe}_${e.meta.timestamp}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i),this.state.addLog("success","\u{1F4BE} Snapshot exported as file.")}importSnapshot(e){let t=e.target;if(!t.files||!t.files.length)return;let i=t.files[0],r=new FileReader;r.onload=()=>{try{let s=JSON.parse(String(r.result));if(!s||!s.state)throw new Error("Invalid snapshot format");this.state.updateState(a=>P(I({},a),{currentSymbol:s.meta?.symbol||a.currentSymbol,currentTimeframe:s.meta?.timeframe||a.currentTimeframe,ohlcvData:s.state.ohlcvData||a.ohlcvData,executionParams:s.state.executionParams||a.executionParams,indicators:s.state.indicators||a.indicators,gates:s.state.gates||a.gates,signalEngine:s.state.signalEngine||a.signalEngine,backtestResults:s.state.backtestResults||a.backtestResults})),this.lastSnapshot=s;try{localStorage.setItem("csp.lastSnapshot",JSON.stringify(s))}catch{}this.state.addLog("success",`\u{1F4C2} Snapshot imported (${s.meta?.id||"unknown"}).`);let o=this.currentState();!o.indicators.ema8.length&&o.ohlcvData.length?this.signalLogic.runSignalPipeline():this.signalLogic.runSignalPipeline()}catch(s){this.state.addLog("error","Failed to import snapshot: "+s.message)}finally{t.value=""}},r.readAsText(i)}runMiniBacktest(){let e=this.currentState().ohlcvData;if(e.length<80){this.state.addLog("error","Not enough data (need >=80 candles) for mini backtest.");return}let t=Math.min(200,e.length-1),i=e.slice(-t),r=[];for(let p=14;p<i.length-5&&r.length<20;p++){let g=i.slice(p-14,p+1).map(J=>J.close),v=J=>J.reduce((Fe,ji)=>Fe+ji,0)/J.length,y=v(g.slice(-5)),S=v(g.slice(-8)),R=v(g.slice(-13));if(!(y>S&&S>R))continue;let x=i[p].close,G=Math.max(i[p].high-i[p].low,i[p].high-i[p-1].close,i[p-1].close-i[p].low),Z=x-G*1,te=x+G*2,ce=0;for(let J=p+1;J<i.length&&J<p+30;J++){if(i[J].low<=Z){ce=-1;break}if(i[J].high>=te){ce=2;break}}ce===0&&(ce=(i[Math.min(p+30,i.length-1)].close-x)/(x-Z)),r.push({entry:x,stop:Z,tp:te,r:ce})}if(!r.length){this.state.addLog("info","No qualifying setups found in sample window.");return}let s=r.filter(p=>p.r>0).length,o=s/r.length*100,a=r.reduce((p,g)=>p+g.r,0)/r.length,l=a,c=Math.min(...h(r.map(p=>p.r)))*-100,u=f(r.map(p=>p.r)),d=80+Math.min(20,s);function h(p){let g=0,v=[0];for(let y of p)g+=y,v.push(g);return v}function f(p){let g=p.reduce((v,y)=>v+y,0)/p.length;return p.reduce((v,y)=>v+(y-g)**2,0)/p.length}this.state.updateState(p=>P(I({},p),{backtestResults:{setups:r,expectancy:l,hitRate:o,avgR:a,maxDD:c,ruleAdherence:d,varianceR:u}})),this.state.addLog("success",`Mini backtest done: ${r.length} setups, hitRate ${o.toFixed(1)}%, avgR ${a.toFixed(2)}.`)}generateHistoricalSetups(){let e=this.currentState(),{ohlcvData:t,indicators:i}=e;if(t.length<120){this.state.addLog("error","Need at least 120 candles to scan for setups.");return}let r=i.ema8,s=i.ema21,o=i.ema50,a=i.atr14,l=i.volume,c=[],u=(f,p)=>f-(p-1),d=f=>f-14,h=f=>f-19;for(let f=60;f<t.length&&c.length<100;f++){let p=u(f,8),g=u(f,21),v=u(f,50);if(p<0||g<0||v<0||p>=r.length||g>=s.length||v>=o.length)continue;let y=r[p],S=s[g],R=o[v],x=y>S&&S>R,G=y<S&&S<R;if(!x&&!G)continue;let Z=10;if(f-Z<0)continue;let te=t.slice(f-Z,f),ce=Math.max(...te.map(Xt=>Xt.high)),J=Math.min(...te.map(Xt=>Xt.low)),Fe=t[f].close,ji=Fe>ce,rs=Fe<J;if(!(ji||rs)||f-10<0)continue;let $n=t.slice(f-10,f+1),ss=Math.max(...$n.map(Xt=>Xt.high)),zn=Math.min(...$n.map(Xt=>Xt.low)),Ui=(ss+zn)/2,yt=d(f);if(yt<0||yt>=a.length)continue;let xt=a[yt],Gn=.25*xt;if(!(Fe>=Ui-Gn&&Fe<=Ui+Gn))continue;let al=h(f);if(al<0||al>=l.length)continue;let ll=l[al];if(!(ll.spike&&ll.absorption))continue;let as=x?"LONG":"SHORT",sf=t[f],Nt=sf.close,of=as==="LONG"?Nt-xt:Nt+xt,ls=Math.abs(Nt-of),ky=as==="LONG"?Nt+ls:Nt-ls,Oy=as==="LONG"?Nt+2*ls:Nt-2*ls;c.push({time:sf.time,direction:as,entry:Nt,stop:of,tp1:ky,tp2:Oy,atr:xt,volumeRatio:ll.ratio,ema8:y,ema21:S,ema50:R})}if(!c.length){this.state.addLog("info","No historical setups matched criteria.");return}this.state.updateState(f=>P(I({},f),{backtestResults:P(I({},f.backtestResults),{setups:c})})),this.state.addLog("success",`Generated ${c.length} historical setups.`)}clearBacktestResults(){this.state.updateState(e=>P(I({},e),{backtestResults:{setups:[],expectancy:0,hitRate:0,avgR:0,maxDD:0,ruleAdherence:0,varianceR:0}})),this.state.addLog("info","Backtest results cleared.")}trackLog=(e,t)=>t.timestamp+t.message;buildSnapshot(){let e=this.currentState();return{meta:{id:crypto.randomUUID?.()||Math.random().toString(36).slice(2),timestamp:new Date().toISOString().replace(/[:]/g,"-"),symbol:e.currentSymbol,timeframe:e.currentTimeframe,engine:e.signalEngine},state:{ohlcvData:e.ohlcvData,executionParams:e.executionParams,indicators:e.indicators,gates:e.gates,backtestResults:e.backtestResults,lastLog:e.logs[e.logs.length-1]||null}}}reloadLastSnapshot(){try{let e=localStorage.getItem("csp.lastSnapshot");if(!e){this.state.addLog("info","No stored snapshot found.");return}let t=JSON.parse(e);if(!t||!t.state)throw new Error("Invalid snapshot");this.state.updateState(i=>P(I({},i),{currentSymbol:t.meta?.symbol||i.currentSymbol,currentTimeframe:t.meta?.timeframe||i.currentTimeframe,ohlcvData:t.state.ohlcvData||i.ohlcvData,executionParams:t.state.executionParams||i.executionParams,indicators:t.state.indicators||i.indicators,gates:t.state.gates||i.gates,signalEngine:t.state.signalEngine||i.signalEngine,backtestResults:t.state.backtestResults||i.backtestResults})),this.lastSnapshot=t,this.state.addLog("success","\u{1F504} Loaded snapshot from storage."),this.signalLogic.runSignalPipeline()}catch(e){this.state.addLog("error","Failed to load snapshot: "+e.message)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-performance-panel"]],viewQuery:function(t,i){if(t&1&&Nn(wS,5),t&2){let r;An(r=Rn())&&(i.backtestLog=r.first)}},decls:115,vars:70,consts:[["snapshotImport",""],[1,"execution-panel"],[1,"card"],[1,"chart-title"],[1,"status-grid"],[1,"status-item"],[1,"status-label"],[1,"status-badge",3,"ngClass"],[1,"status-value"],[1,"status-badge","borderline"],[1,"status-badge","valid"],[1,"snapshot-controls"],[1,"control-btn",3,"click"],["type","file","accept",".json",2,"display","none",3,"change"],["id","snapshot-preview",1,"snapshot-preview"],[1,"log-entry","info"],[1,"backtest-controls"],[1,"backtest-metrics"],[1,"metric-item"],[1,"metric-value",3,"ngClass"],[1,"metric-label"],[1,"metric-value"],["id","backtest-log",1,"calculation-log"],[1,"snapshot-meta"],[1,"snapshot-json"]],template:function(t,i){if(t&1){let r=zt();w(0,"div",1)(1,"div",2)(2,"div",3),m(3,"\u{1F517} UI Status Wiring"),b(),w(4,"div",4)(5,"div",5)(6,"div",6),m(7,"EMA Stack"),b(),w(8,"div",7),m(9),b(),w(10,"div",8),m(11),b()(),w(12,"div",5)(13,"div",6),m(14,"BOS Signal"),b(),w(15,"div",7),m(16),b(),w(17,"div",8),m(18),b()(),w(19,"div",5)(20,"div",6),m(21,"50% Retest"),b(),w(22,"div",7),m(23),b(),w(24,"div",8),m(25),b()(),w(26,"div",5)(27,"div",6),m(28,"Volume Spike"),b(),w(29,"div",7),m(30),b(),w(31,"div",8),m(32),H(33,"number"),b()(),w(34,"div",5)(35,"div",6),m(36,"RSI Level"),b(),w(37,"div",9),m(38,"\u26A0\uFE0F BORDERLINE"),b(),w(39,"div",8),m(40),H(41,"number"),b()(),w(42,"div",5)(43,"div",6),m(44,"ATR Volatility"),b(),w(45,"div",10),m(46,"\u{1F7E2} VALID"),b(),w(47,"div",8),m(48),H(49,"number"),b()()()(),w(50,"div",2)(51,"div",3),m(52,"\u{1F4F8} Snapshot System"),b(),w(53,"div",11)(54,"button",12),Se("click",function(){return ye(r),De(i.captureSnapshot())}),m(55," \u{1F4F8} Capture "),b(),w(56,"button",12),Se("click",function(){return ye(r),De(i.exportSnapshot())}),m(57,"\u{1F4BE} Export"),b(),w(58,"input",13,0),Se("change",function(o){return ye(r),De(i.importSnapshot(o))}),b(),w(60,"button",12),Se("click",function(){ye(r);let o=qu(59);return De(o.click())}),m(61," \u{1F4C2} Import "),b()(),w(62,"div",14),Ge(63,MS,26,8)(64,IS,2,0,"div",15),b()(),w(65,"div",2)(66,"div",3),m(67,"\u{1F9EA} Mini Backtest (20 Setups)"),b(),w(68,"div",16)(69,"button",12),Se("click",function(){return ye(r),De(i.runMiniBacktest())}),m(70," \u{1F680} Run Test "),b(),w(71,"button",12),Se("click",function(){return ye(r),De(i.generateHistoricalSetups())}),m(72," \u{1F4CA} Generate Setups "),b(),w(73,"button",12),Se("click",function(){return ye(r),De(i.clearBacktestResults())}),m(74," \u{1F5D1}\uFE0F Clear "),b()(),w(75,"div",17)(76,"div",18)(77,"div",19),m(78),H(79,"number"),b(),w(80,"div",20),m(81,"Expectancy"),b()(),w(82,"div",18)(83,"div",21),m(84),H(85,"number"),b(),w(86,"div",20),m(87,"Hit Rate"),b()(),w(88,"div",18)(89,"div",21),m(90),H(91,"number"),b(),w(92,"div",20),m(93,"Avg R"),b()(),w(94,"div",18)(95,"div",21),m(96),H(97,"number"),b(),w(98,"div",20),m(99,"Max DD"),b()(),w(100,"div",18)(101,"div",19),m(102),H(103,"number"),b(),w(104,"div",20),m(105,"Rule Adherence"),b()(),w(106,"div",18)(107,"div",21),m(108),H(109,"number"),b(),w(110,"div",20),m(111,"Variance R"),b()()(),w(112,"div",22)(113,"div",15),m(114,"Ready to run mini backtest..."),b()()()()}t&2&&(_(8),Ce("ngClass",kn(50,rl,i.currentState().gates.trendStack,!i.currentState().gates.trendStack)),_(),T(" ",i.currentState().gates.trendStack?"\u{1F7E2} VALID":"\u{1F534} INVALID"," "),_(2),T(" 8>21>50: ",i.currentState().gates.trendStack?"TRUE":"FALSE"," "),_(4),Ce("ngClass",kn(53,rl,i.currentState().gates.bosDirection,!i.currentState().gates.bosDirection)),_(),T(" ",i.currentState().gates.bosDirection?"\u{1F7E2} VALID":"\u{1F534} INVALID"," "),_(2),T(" ",i.currentState().gates.bosDirection?"Break Detected":"No Break"," "),_(4),Ce("ngClass",kn(56,rl,i.currentState().gates.fiftyPercentRetest,!i.currentState().gates.fiftyPercentRetest)),_(),T(" ",i.currentState().gates.fiftyPercentRetest?"\u{1F7E2} VALID":"\u{1F534} INVALID"," "),_(2),T(" ",i.currentState().gates.fiftyPercentRetest?"In Zone":"Outside Zone"," "),_(4),Ce("ngClass",kn(59,rl,i.currentState().gates.volumeSpike,!i.currentState().gates.volumeSpike)),_(),T(" ",i.currentState().gates.volumeSpike?"\u{1F7E2} VALID":"\u{1F534} INVALID"," "),_(2),T(" ",$(33,23,(i.currentState().indicators.volume[i.currentState().indicators.volume.length-1]||Pn(62,_S)).ratio,"1.1-1"),"x Normal "),_(8),T(" ",$(41,26,i.currentState().indicators.rsi14[i.currentState().indicators.rsi14.length-1],"1.1-1")," "),_(8),T(" ",$(49,29,i.currentState().indicators.atr14[i.currentState().indicators.atr14.length-1],"1.2-4")," "),_(15),We(i.lastSnapshot?63:64),_(14),Ce("ngClass",kn(63,CS,i.currentState().backtestResults.expectancy>=0,i.currentState().backtestResults.expectancy<0)),_(),T(" ",$(79,32,i.currentState().backtestResults.expectancy,"1.2-2"),"R "),_(6),T(" ",$(85,35,i.currentState().backtestResults.hitRate,"1.1-1"),"% "),_(6),T(" ",$(91,38,i.currentState().backtestResults.avgR,"1.2-2"),"R "),_(6),T(" ",$(97,41,i.currentState().backtestResults.maxDD,"1.1-1"),"% "),_(5),Ce("ngClass",Zu(66,SS,i.currentState().backtestResults.ruleAdherence>=90,i.currentState().backtestResults.ruleAdherence>=70&&i.currentState().backtestResults.ruleAdherence<90,i.currentState().backtestResults.ruleAdherence<70)),_(),T(" ",$(103,44,i.currentState().backtestResults.ruleAdherence,"1.1-1"),"% "),_(6),T(" ",$(109,47,i.currentState().backtestResults.varianceR,"1.2-2")," "))},dependencies:[Me,Fn,hd,it],encapsulation:2})};var ol=class n{title=Je("crypto-scalper-pro");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"app-shell"],[1,"pipeline-container"],[1,"main-section"]],template:function(t,i){t&1&&(w(0,"div",0)(1,"div",1)(2,"div",2),Tn(3,"app-header")(4,"app-chart")(5,"app-indicators-panel"),b(),Tn(6,"app-signal-engine")(7,"app-performance-panel"),b()())},dependencies:[ba,el,tl,il,sl],styles:[".main-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]})};bd(ol,xv).catch(n=>console.error(n));
